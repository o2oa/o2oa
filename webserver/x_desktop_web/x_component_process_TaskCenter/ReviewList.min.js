MWF.xDesktop.requireApp("process.TaskCenter","TaskCompletedList",null,false);MWF.xApplication.process.TaskCenter.ReviewList=new Class({Extends:MWF.xApplication.process.TaskCenter.TaskCompletedList,_getCurrentPageData:function(t,i){this.app.getAction(function(){if(this.filterData){this.filterListNode.empty();var e={};Object.each(this.filterData,function(t,i){if(i!="key"){if(t){if(!e[this.app.options.filterMap[i]])e[this.app.options.filterMap[i]]=[];e[this.app.options.filterMap[i]].push(t.value);this.createFilterItemNode(i,t)}}else{e.key=t}}.bind(this));if(this.filterData.key){this.createFilterItemNode("key",{name:this.filterData.key})}var s=this.items.length?this.items[this.items.length-1].data.id:"(0)";this.app.action.listReviewFilter(function(i){if(t)t(i)},null,s,i||this.pageCount,e)}else{var s=this.items.length?this.items[this.items.length-1].data.id:"(0)";this.app.action.listReviewNext(function(i){if(t)t(i)},null,s,i||this.pageCount)}}.bind(this))},_getApplicationCount:function(t){this.app.getAction(function(){this.app.action.listReviewApplication(function(i){if(t)t(i)}.bind(this))}.bind(this))},_createItem:function(t){return new MWF.xApplication.process.TaskCenter.ReviewList.Item(t,this)},_getFilterCount:function(t){this.app.action.listReviewFilterCount(function(i){if(t)t(i)})}});MWF.xApplication.process.TaskCenter.ReviewList.Item=new Class({Extends:MWF.xApplication.process.TaskCenter.TaskCompletedList.Item,setFlowChart:function(t){var i=0;t.workLogTokenList={};t.workLogList.each(function(e){t.workLogTokenList[e.fromActivityToken]=e;if(!e.taskCompletedList)e.taskCompletedList=[];if(!e.taskList)e.taskList=[];if(e.taskCompletedList.length||e.taskList.length){this.createFlowInforWorklogNode(e.fromActivityName,e.taskCompletedList,e.taskList||[],i,false);i++}}.bind(this));return i},_getSimpleJobByTaskComplete:function(t){this.list.app.action.getSimpleJobByReview(function(i){if(t)t(i.data)}.bind(this),null,this.data.id)}});