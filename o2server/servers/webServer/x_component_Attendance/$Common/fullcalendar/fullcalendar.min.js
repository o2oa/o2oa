(function(e){if(typeof define==="function"&&define.amd){define(["jquery","moment"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"),require("moment"))}else{e(jQuery,moment)}})(function(te,ie){var ne=te.fullCalendar={version:"2.6.1",internalApiVersion:3};var d=ne.views={};te.fn.fullCalendar=function(s){var a=Array.prototype.slice.call(arguments,1);var o=this;this.each(function(e,t){var i=te(t);var n=i.data("fullCalendar");var r;if(typeof s==="string"){if(n&&te.isFunction(n[s])){r=n[s].apply(n,a);if(!e){o=r}if(s==="destroy"){i.removeData("fullCalendar")}}}else if(!n){n=new ut(i,s);i.data("fullCalendar",n);n.render()}});return o};var t=["header","buttonText","buttonIcons","themeButtonIcons"];function c(e){return Z(e,t)}function s(e){var n={views:e.views||{}};var r;te.each(e,function(i,e){if(i!="views"){if(te.isPlainObject(e)&&!/(time|duration|interval)$/i.test(i)&&te.inArray(i,t)==-1){r=null;te.each(e,function(e,t){if(/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(e)){if(!n.views[e]){n.views[e]={}}n.views[e][i]=t}else{if(!r){r={}}r[e]=t}});if(r){n[i]=r}}else{n[i]=e}}});return n}ne.intersectRanges=F;ne.applyAll=Q;ne.debounce=de;ne.isInt=le;ne.htmlEscape=J;ne.cssToStr=se;ne.proxy=ue;ne.capitaliseFirstLetter=ae;function r(e,t){if(t.left){e.css({"border-left-width":1,"margin-left":t.left-1})}if(t.right){e.css({"border-right-width":1,"margin-right":t.right-1})}}function a(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function h(){te("body").addClass("fc-not-allowed")}function v(){te("body").removeClass("fc-not-allowed")}function i(r,e,t){var a=Math.floor(e/r.length);var o=Math.floor(e-a*(r.length-1));var l=[];var u=[];var d=[];var s=0;n(r);r.each(function(e,t){var i=e===r.length-1?o:a;var n=te(t).outerHeight(true);if(n<i){l.push(t);u.push(n);d.push(te(t).height())}else{s+=n}});if(t){e-=s;a=Math.floor(e/l.length);o=Math.floor(e-a*(l.length-1))}te(l).each(function(e,t){var i=e===l.length-1?o:a;var n=u[e];var r=d[e];var s=i-(n-r);if(n<i){te(t).height(s)}})}function n(e){e.height("")}function e(e){var n=0;e.find("> span").each(function(e,t){var i=te(t).outerWidth();if(i>n){n=i}});n++;e.width(n);return n}function o(e,t){e.height(t).addClass("fc-scroller");if(e[0].scrollHeight-1>e[0].clientHeight){return true}l(e);return false}function l(e){e.height("").removeClass("fc-scroller")}ne.getOuterRect=u;ne.getClientRect=g;ne.getContentRect=p;ne.getScrollbarWidths=m;function f(e){var t=e.css("position"),i=e.parents().filter(function(){var e=te(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return t==="fixed"||!i.length?te(e[0].ownerDocument||document):i}function u(e){var t=e.offset();return{left:t.left,right:t.left+e.outerWidth(),top:t.top,bottom:t.top+e.outerHeight()}}function g(e){var t=e.offset();var i=m(e);var n=t.left+b(e,"border-left-width")+i.left;var r=t.top+b(e,"border-top-width")+i.top;return{left:n,right:n+e[0].clientWidth,top:r,bottom:r+e[0].clientHeight}}function p(e){var t=e.offset();var i=t.left+b(e,"border-left-width")+b(e,"padding-left");var n=t.top+b(e,"border-top-width")+b(e,"padding-top");return{left:i,right:i+e.width(),top:n,bottom:n+e.height()}}function m(e){var t=e.innerWidth()-e[0].clientWidth;var i={left:0,right:0,top:0,bottom:e.innerHeight()-e[0].clientHeight};if(w()&&e.css("direction")=="rtl"){i.left=t}else{i.right=t}return i}var y=null;function w(){if(y===null){y=S()}return y}function S(){var e=te("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body");var t=e.children();var i=t.offset().left>e.offset().left;e.remove();return i}function b(e,t){return parseFloat(e.css(t))||0}function E(e){return e.which==1&&!e.ctrlKey}ne.intersectRects=D;function D(e,t){var i={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};if(i.left<i.right&&i.top<i.bottom){return i}return false}function C(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function H(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function T(e,t){return{left:e.left-t.left,top:e.top-t.top}}ne.parseFieldSpecs=x;ne.compareByFieldSpecs=R;ne.compareByFieldSpec=k;ne.flexibleCompare=I;function x(e){var t=[];var i=[];var n,r;if(typeof e==="string"){i=e.split(/\s*,\s*/)}else if(typeof e==="function"){i=[e]}else if(te.isArray(e)){i=e}for(n=0;n<i.length;n++){r=i[n];if(typeof r==="string"){t.push(r.charAt(0)=="-"?{field:r.substring(1),order:-1}:{field:r,order:1})}else if(typeof r==="function"){t.push({func:r})}}return t}function R(e,t,i){var n;var r;for(n=0;n<i.length;n++){r=k(e,t,i[n]);if(r){return r}}return 0}function k(e,t,i){if(i.func){return i.func(e,t)}return I(e[i.field],t[i.field])*(i.order||1)}function I(e,t){if(!e&&!t){return 0}if(t==null){return-1}if(e==null){return 1}if(te.type(e)==="string"||te.type(t)==="string"){return String(e).localeCompare(String(t))}return e-t}function F(e,t){var i=e.start;var n=e.end;var r=t.start;var s=t.end;var a,o;var l,u;if(n>r&&i<s){if(i>=r){a=i.clone();l=true}else{a=r.clone();l=false}if(n<=s){o=n.clone();u=true}else{o=s.clone();u=false}return{start:a,end:o,isStart:l,isEnd:u}}}ne.computeIntervalUnit=N;ne.divideRangeByDuration=L;ne.divideDurationByDuration=G;ne.multiplyDuration=P;ne.durationHasTime=V;var z=["sun","mon","tue","wed","thu","fri","sat"];var M=["year","month","week","day","hour","minute","second","millisecond"];function O(e,t){return ie.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),"days"),ms:e.time()-t.time()})}function _(e,t){return ie.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),"days")})}function A(e,t,i){return ie.duration(Math.round(e.diff(t,i,true)),i)}function N(e,t){var i,n;var r;for(i=0;i<M.length;i++){n=M[i];r=B(n,e,t);if(r>=1&&le(r)){break}}return n}function B(e,t,i){if(i!=null){return i.diff(t,e,true)}else if(ie.isDuration(t)){return t.as(e)}else{return t.end.diff(t.start,e,true)}}function L(e,t,i){var n;if(V(i)){return(t-e)/i}n=i.asMonths();if(Math.abs(n)>=1&&le(n)){return t.diff(e,"months",true)/n}return t.diff(e,"days",true)/i.asDays()}function G(e,t){var i,n;if(V(e)||V(t)){return e/t}i=e.asMonths();n=t.asMonths();if(Math.abs(i)>=1&&le(i)&&Math.abs(n)>=1&&le(n)){return i/n}return e.asDays()/t.asDays()}function P(e,t){var i;if(V(e)){return ie.duration(e*t)}i=e.asMonths();if(Math.abs(i)>=1&&le(i)){return ie.duration({months:i*t})}return ie.duration({days:e.asDays()*t})}function V(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function Y(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function W(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}ne.log=function(){var e=window.console;if(e&&e.log){return e.log.apply(e,arguments)}};ne.warn=function(){var e=window.console;if(e&&e.warn){return e.warn.apply(e,arguments)}else{return ne.log.apply(ne,arguments)}};var j={}.hasOwnProperty;function Z(e,t){var i={};var n,r;var s;var a,o;var l;if(t){for(n=0;n<t.length;n++){r=t[n];s=[];for(a=e.length-1;a>=0;a--){o=e[a][r];if(typeof o==="object"){s.unshift(o)}else if(o!==undefined){i[r]=o;break}}if(s.length){i[r]=Z(s)}}}for(n=e.length-1;n>=0;n--){l=e[n];for(r in l){if(!(r in i)){i[r]=l[r]}}}return i}function re(e){var t=function(){};t.prototype=e;return new t}function U(e,t){for(var i in e){if($(e,i)){t[i]=e[i]}}}function q(e,t){var i=["constructor","toString","valueOf"];var n,r;for(n=0;n<i.length;n++){r=i[n];if(e[r]!==Object.prototype[r]){t[r]=e[r]}}}function $(e,t){return j.call(e,t)}function X(e){return/undefined|null|boolean|number|string/.test(te.type(e))}function Q(e,t,i){if(te.isFunction(e)){e=[e]}if(e){var n;var r;for(n=0;n<e.length;n++){r=e[n].apply(t,i)||r}return r}}function K(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined){return arguments[e]}}}function J(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ee(e){return e.replace(/&.*?;/g,"")}function se(e){var i=[];te.each(e,function(e,t){if(t!=null){i.push(e+":"+t)}});return i.join(";")}function ae(e){return e.charAt(0).toUpperCase()+e.slice(1)}function oe(e,t){return e-t}function le(e){return e%1===0}function ue(e,t){var i=e[t];return function(){return i.apply(e,arguments)}}function de(t,i){var n;var r;var s;var a;var o=function(){var e=+new Date-a;if(e<i&&e>0){n=setTimeout(o,i-e)}else{n=null;t.apply(s,r);if(!n){s=r=null}}};return function(){s=this;r=arguments;a=+new Date;if(!n){n=setTimeout(o,i)}}}var ce=/^\s*\d{4}-\d\d$/;var fe=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var he=ie.fn;var ve=te.extend({},he);var ge;var pe;var me;ne.moment=function(){return ye(arguments)};ne.moment.utc=function(){var e=ye(arguments,true);if(e.hasTime()){e.utc()}return e};ne.moment.parseZone=function(){return ye(arguments,true,true)};function ye(e,t,i){var n=e[0];var r=e.length==1&&typeof n==="string";var s;var a;var o;var l;if(ie.isMoment(n)){l=ie.apply(null,e);Se(n,l)}else if(Y(n)||n===undefined){l=ie.apply(null,e)}else{s=false;a=false;if(r){if(ce.test(n)){n+="-01";e=[n];s=true;a=true}else if(o=fe.exec(n)){s=!o[5];a=true}}else if(te.isArray(n)){a=true}if(t||s){l=ie.utc.apply(ie,e)}else{l=ie.apply(null,e)}if(s){l._ambigTime=true;l._ambigZone=true}else if(i){if(a){l._ambigZone=true}else if(r){if(l.utcOffset){l.utcOffset(n)}else{l.zone(n)}}}}l._fullCalendar=true;return l}he.clone=function(){var e=ve.clone.apply(this,arguments);Se(this,e);if(this._fullCalendar){e._fullCalendar=true}return e};he.week=he.weeks=function(e){var t=(this._locale||this._lang)._fullCalendar_weekCalc;if(e==null&&typeof t==="function"){return t(this)}else if(t==="ISO"){return ve.isoWeek.apply(this,arguments)}return ve.week.apply(this,arguments)};he.time=function(e){if(!this._fullCalendar){return ve.time.apply(this,arguments)}if(e==null){return ie.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!ie.isDuration(e)&&!ie.isMoment(e)){e=ie.duration(e)}var t=0;if(ie.isDuration(e)){t=Math.floor(e.asDays())*24}return this.hours(t+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())}};he.stripTime=function(){var e;if(!this._ambigTime){e=this.toArray();this.utc();pe(this,e.slice(0,3));this._ambigTime=true;this._ambigZone=true}return this};he.hasTime=function(){return!this._ambigTime};he.stripZone=function(){var e,t;if(!this._ambigZone){e=this.toArray();t=this._ambigTime;this.utc();pe(this,e);this._ambigTime=t||false;this._ambigZone=true}return this};he.hasZone=function(){return!this._ambigZone};he.local=function(){var e=this.toArray();var t=this._ambigZone;ve.local.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;if(t){me(this,e)}return this};he.utc=function(){ve.utc.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;return this};te.each(["zone","utcOffset"],function(e,t){if(ve[t]){he[t]=function(e){if(e!=null){this._ambigTime=false;this._ambigZone=false}return ve[t].apply(this,arguments)}}});he.format=function(){if(this._fullCalendar&&arguments[0]){return De(this,arguments[0])}if(this._ambigTime){return Ee(this,"YYYY-MM-DD")}if(this._ambigZone){return Ee(this,"YYYY-MM-DD[T]HH:mm:ss")}return ve.format.apply(this,arguments)};he.toISOString=function(){if(this._ambigTime){return Ee(this,"YYYY-MM-DD")}if(this._ambigZone){return Ee(this,"YYYY-MM-DD[T]HH:mm:ss")}return ve.toISOString.apply(this,arguments)};he.isWithin=function(e,t){var i=we([this,e,t]);return i[0]>=i[1]&&i[0]<i[2]};he.isSame=function(e,t){var i;if(!this._fullCalendar){return ve.isSame.apply(this,arguments)}if(t){i=we([this,e],true);return ve.isSame.call(i[0],i[1],t)}else{e=ne.moment.parseZone(e);return ve.isSame.call(this,e)&&Boolean(this._ambigTime)===Boolean(e._ambigTime)&&Boolean(this._ambigZone)===Boolean(e._ambigZone)}};te.each(["isBefore","isAfter"],function(e,n){he[n]=function(e,t){var i;if(!this._fullCalendar){return ve[n].apply(this,arguments)}i=we([this,e]);return ve[n].call(i[0],i[1],t)}});function we(e,t){var i=false;var n=false;var r=e.length;var s=[];var a,o;for(a=0;a<r;a++){o=e[a];if(!ie.isMoment(o)){o=ne.moment.parseZone(o)}i=i||o._ambigTime;n=n||o._ambigZone;s.push(o)}for(a=0;a<r;a++){o=s[a];if(!t&&i&&!o._ambigTime){s[a]=o.clone().stripTime()}else if(n&&!o._ambigZone){s[a]=o.clone().stripZone()}}return s}function Se(e,t){if(e._ambigTime){t._ambigTime=true}else if(t._ambigTime){t._ambigTime=false}if(e._ambigZone){t._ambigZone=true}else if(t._ambigZone){t._ambigZone=false}}function be(e,t){e.year(t[0]||0).month(t[1]||0).date(t[2]||0).hours(t[3]||0).minutes(t[4]||0).seconds(t[5]||0).milliseconds(t[6]||0)}ge="_d"in ie()&&"updateOffset"in ie;pe=ge?function(e,t){e._d.setTime(Date.UTC.apply(Date,t));ie.updateOffset(e,false)}:be;me=ge?function(e,t){e._d.setTime(+new Date(t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0,t[6]||0));ie.updateOffset(e,false)}:be;function Ee(e,t){return ve.format.call(e,t)}function De(e,t){return Ce(e,ze(t))}function Ce(e,t){var i="";var n;for(n=0;n<t.length;n++){i+=Te(e,t[n])}return i}var He={t:function(e){return Ee(e,"a").charAt(0)},T:function(e){return Ee(e,"A").charAt(0)}};function Te(e,t){var i;var n;if(typeof t==="string"){return t}else if(i=t.token){if(He[i]){return He[i](e)}return Ee(e,i)}else if(t.maybe){n=Ce(e,t.maybe);if(n.match(/[1-9]/)){return n}}return""}function xe(e,t,i,n,r){var s;e=ne.moment.parseZone(e);t=ne.moment.parseZone(t);s=(e.localeData||e.lang).call(e);i=s.longDateFormat(i)||i;n=n||" - ";return Re(e,t,ze(i),n,r)}ne.formatRange=xe;function Re(e,t,i,n,r){var s=e.clone().stripZone();var a=t.clone().stripZone();var o;var l;var u="";var d;var c="";var f;var h="";var v="";var g="";for(l=0;l<i.length;l++){o=Ie(e,t,s,a,i[l]);if(o===false){break}u+=o}for(d=i.length-1;d>l;d--){o=Ie(e,t,s,a,i[d]);if(o===false){break}c=o+c}for(f=l;f<=d;f++){h+=Te(e,i[f]);v+=Te(t,i[f])}if(h||v){if(r){g=v+n+h}else{g=h+n+v}}return u+g+c}var ke={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function Ie(e,t,i,n,r){var s;var a;if(typeof r==="string"){return r}else if(s=r.token){a=ke[s.charAt(0)];if(a&&i.isSame(n,a)){return Ee(e,s)}}return false}var Fe={};function ze(e){if(e in Fe){return Fe[e]}return Fe[e]=Me(e)}function Me(e){var t=[];var i=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;var n;while(n=i.exec(e)){if(n[1]){t.push(n[1])}else if(n[2]){t.push({maybe:Me(n[2])})}else if(n[3]){t.push({token:n[3]})}else if(n[5]){t.push(n[5])}}return t}ne.Class=Ne;function Ne(){}Ne.extend=function(){var e=arguments.length;var t;var i;for(t=0;t<e;t++){i=arguments[t];if(t<e-1){Le(this,i)}}return Be(this,i||{})};Ne.mixin=function(e){Le(this,e)};function Be(e,t){var i;if($(t,"constructor")){i=t.constructor}if(typeof i!=="function"){i=t.constructor=function(){e.apply(this,arguments)}}i.prototype=re(e.prototype);U(t,i.prototype);q(t,i.prototype);U(e,i);return i}function Le(e,t){U(t.prototype||t,e.prototype)}var Ge=ne.Emitter=Ne.extend({callbackHash:null,on:function(e,t){this.getCallbacks(e).add(t);return this},off:function(e,t){this.getCallbacks(e).remove(t);return this},trigger:function(e){var t=Array.prototype.slice.call(arguments,1);this.triggerWith(e,this,t);return this},triggerWith:function(e,t,i){var n=this.getCallbacks(e);n.fireWith(t,i);return this},getCallbacks:function(e){var t;if(!this.callbackHash){this.callbackHash={}}t=this.callbackHash[e];if(!t){t=this.callbackHash[e]=te.Callbacks()}return t}});var Pe=Ne.extend({isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var e=this;var t=this.options;this.el=te('<div class="fc-popover"/>').addClass(t.className||"").css({top:0,left:0}).append(t.content).appendTo(t.parentEl);this.el.on("click",".fc-close",function(){e.hide()});if(t.autoHide){te(document).on("mousedown",this.documentMousedownProxy=ue(this,"documentMousedown"))}},documentMousedown:function(e){if(this.el&&!te(e.target).closest(this.el).length){this.hide()}},removeElement:function(){this.hide();if(this.el){this.el.remove();this.el=null}te(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e=this.options;var t=this.el.offsetParent().offset();var i=this.el.outerWidth();var n=this.el.outerHeight();var r=te(window);var s=f(this.el);var a;var o;var l;var u;var d;u=e.top||0;if(e.left!==undefined){d=e.left}else if(e.right!==undefined){d=e.right-i}else{d=0}if(s.is(window)||s.is(document)){s=r;a=0;o=0}else{l=s.offset();a=l.top;o=l.left}a+=r.scrollTop();o+=r.scrollLeft();if(e.viewportConstrain!==false){u=Math.min(u,a+s.outerHeight()-n-this.margin);u=Math.max(u,a+this.margin);d=Math.min(d,o+s.outerWidth()-i-this.margin);d=Math.max(d,o+this.margin)}this.el.css({top:u-t.top,left:d-t.left})},trigger:function(e){if(this.options[e]){this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}});var Ve=ne.CoordCache=Ne.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:false,isVertical:false,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(e){this.els=te(e.els);this.isHorizontal=e.isHorizontal;this.isVertical=e.isVertical;this.forcedOffsetParentEl=e.offsetParent?te(e.offsetParent):null},build:function(){var e=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=e.offset();this.boundingRect=this.queryBoundingRect();if(this.isHorizontal){this.buildElHorizontals()}if(this.isVertical){this.buildElVerticals()}},clear:function(){this.origin=null;this.boundingRect=null;this.lefts=null;this.rights=null;this.tops=null;this.bottoms=null},ensureBuilt:function(){if(!this.origin){this.build()}},queryBoundingRect:function(){var e=f(this.els.eq(0));if(!e.is(document)){return g(e)}},buildElHorizontals:function(){var s=[];var a=[];this.els.each(function(e,t){var i=te(t);var n=i.offset().left;var r=i.outerWidth();s.push(n);a.push(n+r)});this.lefts=s;this.rights=a},buildElVerticals:function(){var s=[];var a=[];this.els.each(function(e,t){var i=te(t);var n=i.offset().top;var r=i.outerHeight();s.push(n);a.push(n+r)});this.tops=s;this.bottoms=a},getHorizontalIndex:function(e){this.ensureBuilt();var t=this.boundingRect;var i=this.lefts;var n=this.rights;var r=i.length;var s;if(!t||e>=t.left&&e<t.right){for(s=0;s<r;s++){if(e>=i[s]&&e<n[s]){return s}}}},getVerticalIndex:function(e){this.ensureBuilt();var t=this.boundingRect;var i=this.tops;var n=this.bottoms;var r=i.length;var s;if(!t||e>=t.top&&e<t.bottom){for(s=0;s<r;s++){if(e>=i[s]&&e<n[s]){return s}}}},getLeftOffset:function(e){this.ensureBuilt();return this.lefts[e]},getLeftPosition:function(e){this.ensureBuilt();return this.lefts[e]-this.origin.left},getRightOffset:function(e){this.ensureBuilt();return this.rights[e]},getRightPosition:function(e){this.ensureBuilt();return this.rights[e]-this.origin.left},getWidth:function(e){this.ensureBuilt();return this.rights[e]-this.lefts[e]},getTopOffset:function(e){this.ensureBuilt();return this.tops[e]},getTopPosition:function(e){this.ensureBuilt();return this.tops[e]-this.origin.top},getBottomOffset:function(e){this.ensureBuilt();return this.bottoms[e]},getBottomPosition:function(e){this.ensureBuilt();return this.bottoms[e]-this.origin.top},getHeight:function(e){this.ensureBuilt();return this.bottoms[e]-this.tops[e]}});var Oe=ne.DragListener=Ne.extend({options:null,isListening:false,isDragging:false,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(e){e=e||{};this.options=e;this.subjectEl=e.subjectEl},mousedown:function(e){if(E(e)){e.preventDefault();this.startListening(e);if(!this.options.distance){this.startDrag(e)}}},startListening:function(e){var t;if(!this.isListening){if(e&&this.options.scroll){t=f(te(e.target));if(!t.is(window)&&!t.is(document)){this.scrollEl=t;this.scrollHandlerProxy=de(ue(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}te(document).on("mousemove",this.mousemoveProxy=ue(this,"mousemove")).on("mouseup",this.mouseupProxy=ue(this,"mouseup")).on("selectstart",this.preventDefault);if(e){this.originX=e.pageX;this.originY=e.pageY}else{this.originX=0;this.originY=0}this.isListening=true;this.listenStart(e)}},listenStart:function(e){this.trigger("listenStart",e)},mousemove:function(e){var t=e.pageX-this.originX;var i=e.pageY-this.originY;var n;var r;if(!this.isDragging){n=this.options.distance||1;r=t*t+i*i;if(r>=n*n){this.startDrag(e)}}if(this.isDragging){this.drag(t,i,e)}},startDrag:function(e){if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.dragStart(e)}},dragStart:function(e){var t=this.subjectEl;this.trigger("dragStart",e);if(this.subjectHref=t?t.attr("href"):null){t.removeAttr("href")}},drag:function(e,t,i){this.trigger("drag",e,t,i);this.updateScroll(i)},mouseup:function(e){this.stopListening(e)},stopDrag:function(e){if(this.isDragging){this.stopScrolling();this.dragStop(e);this.isDragging=false}},dragStop:function(e){var t=this;this.trigger("dragStop",e);setTimeout(function(){if(t.subjectHref){t.subjectEl.attr("href",t.subjectHref)}},0)},stopListening:function(e){this.stopDrag(e);if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}te(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.listenStop(e)}},listenStop:function(e){this.trigger("listenStop",e)},trigger:function(e){if(this.options[e]){this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(e){e.preventDefault()},computeScrollBounds:function(){var e=this.scrollEl;this.scrollBounds=e?u(e):null},updateScroll:function(e){var t=this.scrollSensitivity;var i=this.scrollBounds;var n,r;var s,a;var o=0;var l=0;if(i){n=(t-(e.pageY-i.top))/t;r=(t-(i.bottom-e.pageY))/t;s=(t-(e.pageX-i.left))/t;a=(t-(i.right-e.pageX))/t;if(n>=0&&n<=1){o=n*this.scrollSpeed*-1}else if(r>=0&&r<=1){o=r*this.scrollSpeed}if(s>=0&&s<=1){l=s*this.scrollSpeed*-1}else if(a>=0&&a<=1){l=a*this.scrollSpeed}}this.setScrollVel(o,l)},setScrollVel:function(e,t){this.scrollTopVel=e;this.scrollLeftVel=t;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(ue(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var e=this.scrollEl;if(this.scrollTopVel<0){if(e.scrollTop()<=0){this.scrollTopVel=0}}else if(this.scrollTopVel>0){if(e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight){this.scrollTopVel=0}}if(this.scrollLeftVel<0){if(e.scrollLeft()<=0){this.scrollLeftVel=0}}else if(this.scrollLeftVel>0){if(e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth){this.scrollLeftVel=0}}},scrollIntervalFunc:function(){var e=this.scrollEl;var t=this.scrollIntervalMs/1e3;if(this.scrollTopVel){e.scrollTop(e.scrollTop()+this.scrollTopVel*t)}if(this.scrollLeftVel){e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.scrollStop()}},scrollHandler:function(){if(!this.scrollIntervalId){this.scrollStop()}},scrollStop:function(){}});var _e=Oe.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(e,t){Oe.call(this,t);this.component=e},listenStart:function(e){var t=this.subjectEl;var i;var n;var r;Oe.prototype.listenStart.apply(this,arguments);this.computeCoords();if(e){n={left:e.pageX,top:e.pageY};r=n;if(t){i=u(t);r=C(r,i)}this.origHit=this.queryHit(r.left,r.top);if(t&&this.options.subjectCenter){if(this.origHit){i=D(this.origHit,i)||i}r=H(i)}this.coordAdjust=T(r,n)}else{this.origHit=null;this.coordAdjust=null}},computeCoords:function(){this.component.prepareHits();this.computeScrollBounds()},dragStart:function(e){var t;Oe.prototype.dragStart.apply(this,arguments);t=this.queryHit(e.pageX,e.pageY);if(t){this.hitOver(t)}},drag:function(e,t,i){var n;Oe.prototype.drag.apply(this,arguments);n=this.queryHit(i.pageX,i.pageY);if(!Ae(n,this.hit)){if(this.hit){this.hitOut()}if(n){this.hitOver(n)}}},dragStop:function(){this.hitDone();Oe.prototype.dragStop.apply(this,arguments)},hitOver:function(e){var t=Ae(e,this.origHit);this.hit=e;this.trigger("hitOver",this.hit,t,this.origHit)},hitOut:function(){if(this.hit){this.trigger("hitOut",this.hit);this.hitDone();this.hit=null}},hitDone:function(){if(this.hit){this.trigger("hitDone",this.hit)}},listenStop:function(){Oe.prototype.listenStop.apply(this,arguments);this.origHit=null;this.hit=null;this.component.releaseHits()},scrollStop:function(){Oe.prototype.scrollStop.apply(this,arguments);this.computeCoords()},queryHit:function(e,t){if(this.coordAdjust){e+=this.coordAdjust.left;t+=this.coordAdjust.top}return this.component.queryHit(e,t)}});function Ae(e,t){if(!e&&!t){return true}if(e&&t){return e.component===t.component&&Ye(e,t)&&Ye(t,e)}return false}function Ye(e,t){for(var i in e){if(!/^(component|left|right|top|bottom)$/.test(i)){if(e[i]!==t[i]){return false}}}return true}var We=Ne.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,constructor:function(e,t){this.options=t=t||{};this.sourceEl=e;this.parentEl=t.parentEl?te(t.parentEl):e.parent()},start:function(e){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=e.pageY;this.mouseX0=e.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}te(document).on("mousemove",this.mousemoveProxy=ue(this,"mousemove"))}},stop:function(e,t){var i=this;var n=this.options.revertDuration;function r(){this.isAnimating=false;i.removeElement();this.top0=this.left0=null;if(t){t()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;te(document).off("mousemove",this.mousemoveProxy);if(e&&n&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:n,complete:r})}else{r()}}},getEl:function(){var e=this.el;if(!e){this.sourceEl.width();e=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return e},removeElement:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var e;var t;this.getEl();if(this.top0===null){this.sourceEl.width();e=this.sourceEl.offset();t=this.el.offsetParent().offset();this.top0=e.top-t.top;this.left0=e.left-t.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(e){this.topDelta=e.pageY-this.mouseY0;this.leftDelta=e.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}});var je=ne.Grid=Ne.extend({view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,externalDragStartProxy:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,constructor:function(e){this.view=e;this.isRTL=e.opt("isRTL");this.elsByFill={};this.externalDragStartProxy=ue(this,"externalDragStart")},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return true},computeDisplayEventEnd:function(){return true},setRange:function(e){this.start=e.start.clone();this.end=e.end.clone();this.rangeUpdated();this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var e=this.view;var t;var i;this.eventTimeFormat=e.opt("eventTimeFormat")||e.opt("timeFormat")||this.computeEventTimeFormat();t=e.opt("displayEventTime");if(t==null){t=this.computeDisplayEventTime()}i=e.opt("displayEventEnd");if(i==null){i=this.computeDisplayEventEnd()}this.displayEventTime=t;this.displayEventEnd=i},spanToSegs:function(e){},diffDates:function(e,t){if(this.largeUnit){return A(e,t,this.largeUnit)}else{return O(e,t)}},prepareHits:function(){},releaseHits:function(){},queryHit:function(e,t){},getHitSpan:function(e){},getHitEl:function(e){},setElement:function(e){var t=this;this.el=e;e.on("mousedown",function(e){if(!te(e.target).is(".fc-event-container *, .fc-more")&&!te(e.target).closest(".fc-popover").length){t.dayMousedown(e)}});this.bindSegHandlers();this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers();this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){te(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){te(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(e){var n=this;var t=this.view;var r=t.opt("selectable");var s;var a;var i=new _e(this,{scroll:t.opt("dragScroll"),dragStart:function(){t.unselect()},hitOver:function(e,t,i){if(i){s=t?e:null;if(r){a=n.computeSelection(n.getHitSpan(i),n.getHitSpan(e));if(a){n.renderSelection(a)}else if(a===false){h()}}}},hitOut:function(){s=null;a=null;n.unrenderSelection();v()},listenStop:function(e){if(s){t.triggerDayClick(n.getHitSpan(s),n.getHitEl(s),e)}if(a){t.reportSelection(a,e)}v()}});i.mousedown(e)},renderEventLocationHelper:function(e,t){var i=this.fabricateHelperEvent(e,t);this.renderHelper(i,t)},fabricateHelperEvent:function(e,t){var i=t?re(t.event):{};i.start=e.start.clone();i.end=e.end?e.end.clone():null;i.allDay=null;this.view.calendar.normalizeEventDates(i);i.className=(i.className||[]).concat("fc-helper");if(!t){i.editable=false}return i},renderHelper:function(e,t){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var i=this.computeSelectionSpan(e,t);if(i&&!this.view.calendar.isSelectionSpanAllowed(i)){return false}return i},computeSelectionSpan:function(e,t){var i=[e.start,e.end,t.start,t.end];i.sort(oe);return{start:i[0].clone(),end:i[3].clone()}},renderHighlight:function(e){this.renderFill("highlight",this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},renderFill:function(e,t){},unrenderFill:function(e){var t=this.elsByFill[e];if(t){t.remove();delete this.elsByFill[e]}},renderFillSegEls:function(e,r){var s=this;var a=this[e+"SegEl"];var t="";var o=[];var i;if(r.length){for(i=0;i<r.length;i++){t+=this.fillSegHtml(e,r[i])}te(t).each(function(e,t){var i=r[e];var n=te(t);if(a){n=a.call(s,i,n)}if(n){n=te(n);if(n.is(s.fillSegTag)){i.el=n;o.push(i)}}})}return o},fillSegTag:"div",fillSegHtml:function(e,t){var i=this[e+"SegClasses"];var n=this[e+"SegCss"];var r=i?i.call(this,t):[];var s=se(n?n.call(this,t):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},getDayClasses:function(e){var t=this.view;var i=t.calendar.getNow();var n=["fc-"+z[e.day()]];if(t.intervalDuration.as("months")==1&&e.month()!=t.intervalStart.month()){n.push("fc-other-month")}if(e.isSame(i,"day")){n.push("fc-today",t.highlightStateClass)}else if(e<i){n.push("fc-past")}else{n.push("fc-future")}return n}});je.mixin({mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,isDraggingExternal:false,segs:null,renderEvents:function(e){var t=[];var i=[];var n;for(n=0;n<e.length;n++){(Ze(e[n])?t:i).push(e[n])}this.segs=[].concat(this.renderBgEvents(t),this.renderFgEvents(i))},renderBgEvents:function(e){var t=this.eventsToSegs(e);return this.renderBgSegs(t)||t},renderFgEvents:function(e){var t=this.eventsToSegs(e);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.triggerSegMouseout();this.unrenderFgSegs();this.unrenderBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(e){},unrenderFgSegs:function(){},renderFgSegEls:function(r,e){var s=this.view;var t="";var a=[];var i;if(r.length){for(i=0;i<r.length;i++){t+=this.fgSegHtml(r[i],e)}te(t).each(function(e,t){var i=r[e];var n=s.resolveEventEl(i.event,te(t));if(n){n.data("fc-seg",i);i.el=n;a.push(i)}})}return a},fgSegHtml:function(e,t){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event;var i=t.source||{};return["fc-bgevent"].concat(t.className,i.className||[])},bgEventSegCss:function(e){return{"background-color":this.getSegSkinCss(e)["background-color"]}},businessHoursSegClasses:function(e){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var n=this;var i=this.view;te.each({mouseenter:function(e,t){n.triggerSegMouseover(e,t)},mouseleave:function(e,t){n.triggerSegMouseout(e,t)},click:function(e,t){return i.trigger("eventClick",this,e.event,t)},mousedown:function(e,t){if(te(t.target).is(".fc-resizer")&&i.isEventResizable(e.event)){n.segResizeMousedown(e,t,te(t.target).is(".fc-start-resizer"))}else if(i.isEventDraggable(e.event)){n.segDragMousedown(e,t)}}},function(e,i){n.el.on(e,".fc-event-container > *",function(e){var t=te(this).data("fc-seg");if(t&&!n.isDraggingSeg&&!n.isResizingSeg){return i.call(this,t,e)}})})},triggerSegMouseover:function(e,t){if(!this.mousedOverSeg){this.mousedOverSeg=e;this.view.trigger("eventMouseover",e.el[0],e.event,t)}},triggerSegMouseout:function(e,t){t=t||{};if(this.mousedOverSeg){e=e||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",e.el[0],e.event,t)}},segDragMousedown:function(n,e){var r=this;var s=this.view;var a=s.calendar;var t=n.el;var o=n.event;var l;var u=new We(n.el,{parentEl:s.el,opacity:s.opt("dragOpacity"),revertDuration:s.opt("dragRevertDuration"),zIndex:2});var i=new _e(s,{distance:5,scroll:s.opt("dragScroll"),subjectEl:t,subjectCenter:true,listenStart:function(e){u.hide();u.start(e)},dragStart:function(e){r.triggerSegMouseout(n,e);r.segDragStart(n,e);s.hideEvent(o)},hitOver:function(e,t,i){if(n.hit){i=n.hit}l=r.computeEventDrop(i.component.getHitSpan(i),e.component.getHitSpan(e),o);if(l&&!a.isEventSpanAllowed(r.eventToSpan(l),o)){h();l=null}if(l&&s.renderDrag(l,n)){u.hide()}else{u.show()}if(t){l=null}},hitOut:function(){s.unrenderDrag();u.show();l=null},hitDone:function(){v()},dragStop:function(e){u.stop(!l,function(){s.unrenderDrag();s.showEvent(o);r.segDragStop(n,e);if(l){s.reportEventDrop(o,l,this.largeUnit,t,e)}})},listenStop:function(){u.stop()}});i.mousedown(e)},segDragStart:function(e,t){this.isDraggingSeg=true;this.view.trigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=false;this.view.trigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,i){var n=this.view.calendar;var r=e.start;var s=t.start;var a;var o;if(r.hasTime()===s.hasTime()){a=this.diffDates(s,r);if(i.allDay&&V(a)){o={start:i.start.clone(),end:n.getEventEnd(i),allDay:false};n.normalizeEventTimes(o)}else{o={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay}}o.start.add(a);if(o.end){o.end.add(a)}}else{o={start:s.clone(),end:null,allDay:!s.hasTime()}}return o},applyDragOpacity:function(e){var i=this.view.opt("dragOpacity");if(i!=null){e.each(function(e,t){t.style.opacity=i})}},externalDragStart:function(e,t){var i=this.view;var n;var r;if(i.opt("droppable")){n=te((t?t.item:null)||e.target);r=i.opt("dropAccept");if(te.isFunction(r)?r.call(n[0],n):n.is(r)){if(!this.isDraggingExternal){this.listenToExternalDrag(n,e,t)}}}},listenToExternalDrag:function(e,t,i){var n=this;var r=this.view.calendar;var s=Qe(e);var a;var o=new _e(this,{listenStart:function(){n.isDraggingExternal=true},hitOver:function(e){a=n.computeExternalDrop(e.component.getHitSpan(e),s);if(a&&!r.isExternalSpanAllowed(n.eventToSpan(a),a,s.eventProps)){h();a=null}if(a){n.renderDrag(a)}},hitOut:function(){a=null},hitDone:function(){v();n.unrenderDrag()},dragStop:function(){if(a){n.view.reportExternalDrop(s,a,e,t,i)}},listenStop:function(){n.isDraggingExternal=false}});o.startDrag(t)},computeExternalDrop:function(e,t){var i=this.view.calendar;var n={start:i.applyTimezone(e.start),end:null};if(t.startTime&&!n.start.hasTime()){n.start.time(t.startTime)}if(t.duration){n.end=n.start.clone().add(t.duration)}return n},renderDrag:function(e,t){},unrenderDrag:function(){},segResizeMousedown:function(s,e,a){var o=this;var l=this.view;var u=l.calendar;var t=s.el;var d=s.event;var c=u.getEventEnd(d);var f;var i=new _e(this,{distance:5,scroll:l.opt("dragScroll"),subjectEl:t,dragStart:function(e){o.triggerSegMouseout(s,e);o.segResizeStart(s,e)},hitOver:function(e,t,i){var n=o.getHitSpan(i);var r=o.getHitSpan(e);f=a?o.computeEventStartResize(n,r,d):o.computeEventEndResize(n,r,d);if(f){if(!u.isEventSpanAllowed(o.eventToSpan(f),d)){h();f=null}else if(f.start.isSame(d.start)&&f.end.isSame(c)){f=null}}if(f){l.hideEvent(d);o.renderEventResize(f,s)}},hitOut:function(){f=null},hitDone:function(){o.unrenderEventResize();l.showEvent(d);v()},dragStop:function(e){o.segResizeStop(s,e);if(f){l.reportEventResize(d,f,this.largeUnit,t,e)}}});i.mousedown(e)},segResizeStart:function(e,t){this.isResizingSeg=true;this.view.trigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=false;this.view.trigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,i){return this.computeEventResize("start",e,t,i)},computeEventEndResize:function(e,t,i){return this.computeEventResize("end",e,t,i)},computeEventResize:function(e,t,i,n){var r=this.view.calendar;var s=this.diffDates(i[e],t[e]);var a;var o;a={start:n.start.clone(),end:r.getEventEnd(n),allDay:n.allDay};if(a.allDay&&V(s)){a.allDay=false;r.normalizeEventTimes(a)}a[e].add(s);if(!a.start.isBefore(a.end)){o=this.minResizeDuration||(n.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);if(e=="start"){a.start=a.end.clone().subtract(o)}else{a.end=a.start.clone().add(o)}}return a},renderEventResize:function(e,t){},unrenderEventResize:function(){},getEventTimeText:function(e,t,i){if(t==null){t=this.eventTimeFormat}if(i==null){i=this.displayEventEnd}if(this.displayEventTime&&e.start.hasTime()){if(i&&e.end){return this.view.formatRange(e,t)}else{return e.start.format(t)}}return""},getSegClasses:function(e,t,i){var n=e.event;var r=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);if(t){r.push("fc-draggable")}if(i){r.push("fc-resizable")}return r},getSegSkinCss:function(e){var t=e.event;var i=this.view;var n=t.source||{};var r=t.color;var s=n.color;var a=i.opt("eventColor");return{"background-color":t.backgroundColor||r||n.backgroundColor||s||i.opt("eventBackgroundColor")||a,"border-color":t.borderColor||r||n.borderColor||s||i.opt("eventBorderColor")||a,color:t.textColor||n.textColor||i.opt("eventTextColor")}},eventToSegs:function(e){return this.eventsToSegs([e])},eventToSpan:function(e){return this.eventToSpans(e)[0]},eventToSpans:function(e){var t=this.eventToRange(e);return this.eventRangeToSpans(t,e)},eventsToSegs:function(e,r){var s=this;var t=$e(e);var a=[];te.each(t,function(e,t){var i=[];var n;for(n=0;n<t.length;n++){i.push(s.eventToRange(t[n]))}if(Ue(t[0])){i=s.invertRanges(i);for(n=0;n<i.length;n++){a.push.apply(a,s.eventRangeToSegs(i[n],t[0],r))}}else{for(n=0;n<i.length;n++){a.push.apply(a,s.eventRangeToSegs(i[n],t[n],r))}}});return a},eventToRange:function(e){return{start:e.start.clone().stripZone(),end:(e.end?e.end.clone():this.view.calendar.getDefaultEventEnd(e.allDay!=null?e.allDay:!e.start.hasTime(),e.start)).stripZone()}},eventRangeToSegs:function(e,t,i){var n=this.eventRangeToSpans(e,t);var r=[];var s;for(s=0;s<n.length;s++){r.push.apply(r,this.eventSpanToSegs(n[s],t,i))}return r},eventRangeToSpans:function(e,t){return[te.extend({},e)]},eventSpanToSegs:function(e,t,i){var n=i?i(e):this.spanToSegs(e);var r,s;for(r=0;r<n.length;r++){s=n[r];s.event=t;s.eventStartMS=+e.start;s.eventDurationMS=e.end-e.start}return n},invertRanges:function(e){var t=this.view;var i=t.start.clone();var n=t.end.clone();var r=[];var s=i;var a,o;e.sort(Xe);for(a=0;a<e.length;a++){o=e[a];if(o.start>s){r.push({start:s,end:o.start})}s=o.end}if(s<n){r.push({start:s,end:n})}return r},sortEventSegs:function(e){e.sort(ue(this,"compareEventSegs"))},compareEventSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||R(e.event,t.event,this.view.eventOrderSpecs)}});function Ze(e){var t=qe(e);return t==="background"||t==="inverse-background"}ne.isBgEvent=Ze;function Ue(e){return qe(e)==="inverse-background"}function qe(e){return K((e.source||{}).rendering,e.rendering)}function $e(e){var t={};var i,n;for(i=0;i<e.length;i++){n=e[i];(t[n._id]||(t[n._id]=[])).push(n)}return t}function Xe(e,t){return e.start-t.start}ne.dataAttrPrefix="";function Qe(e){var t=ne.dataAttrPrefix;var i;var n;var r;var s;if(t){t+="-"}i=e.data(t+"event")||null;if(i){if(typeof i==="object"){i=te.extend({},i)}else{i={}}n=i.start;if(n==null){n=i.time}r=i.duration;s=i.stick;delete i.start;delete i.time;delete i.duration;delete i.stick}if(n==null){n=e.data(t+"start")}if(n==null){n=e.data(t+"time")}if(r==null){r=e.data(t+"duration")}if(s==null){s=e.data(t+"stick")}n=n!=null?ie.duration(n):null;r=r!=null?ie.duration(r):null;s=Boolean(s);return{eventProps:i,startTime:n,duration:r,stick:s}}var Ke=ne.DayTableMixin={breakOnWeeks:false,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){var e=this.view;var t=this.start.clone();var i=-1;var n=[];var r=[];var s;var a;var o;while(t.isBefore(this.end)){if(e.isHiddenDay(t)){n.push(i+.5)}else{i++;n.push(i);r.push(t.clone())}t.add(1,"days")}if(this.breakOnWeeks){a=r[0].day();for(s=1;s<r.length;s++){if(r[s].day()==a){break}}o=Math.ceil(r.length/s)}else{o=1;s=r.length}this.dayDates=r;this.dayIndices=n;this.daysPerRow=s;this.rowCnt=o;this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt();this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()},getCellRange:function(e,t){var i=this.getCellDate(e,t);var n=i.clone().add(1,"days");return{start:i,end:n}},getCellDayIndex:function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)},getColDayIndex:function(e){if(this.isRTL){return this.colCnt-1-e}else{return e}},getDateDayIndex:function(e){var t=this.dayIndices;var i=e.diff(this.start,"days");if(i<0){return t[0]-1}else if(i>=t.length){return t[t.length-1]+1}else{return t[i]}},computeColHeadFormat:function(){if(this.rowCnt>1||this.colCnt>10){return"ddd"}else if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},sliceRangeByRow:function(e){var t=this.daysPerRow;var i=this.view.computeDayRange(e);var n=this.getDateDayIndex(i.start);var r=this.getDateDayIndex(i.end.clone().subtract(1,"days"));var s=[];var a;var o,l;var u,d;for(a=0;a<this.rowCnt;a++){o=a*t;l=o+t-1;u=Math.max(n,o);d=Math.min(r,l);u=Math.ceil(u);d=Math.floor(d);if(u<=d){s.push({row:a,firstRowDayIndex:u-o,lastRowDayIndex:d-o,isStart:u===n,isEnd:d===r})}}return s},sliceRangeByDay:function(e){var t=this.daysPerRow;var i=this.view.computeDayRange(e);var n=this.getDateDayIndex(i.start);var r=this.getDateDayIndex(i.end.clone().subtract(1,"days"));var s=[];var a;var o,l;var u;var d,c;for(a=0;a<this.rowCnt;a++){o=a*t;l=o+t-1;for(u=o;u<=l;u++){d=Math.max(n,u);c=Math.min(r,u);d=Math.ceil(d);c=Math.floor(c);if(d<=c){s.push({row:a,firstRowDayIndex:d-o,lastRowDayIndex:c-o,isStart:d===n,isEnd:c===r})}}}return s},renderHeadHtml:function(){var e=this.view;return""+'<div class="fc-row '+e.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.renderHeadTrHtml()+"</thead>"+"</table>"+"</div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return""+"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var e=[];var t,i;for(t=0;t<this.colCnt;t++){i=this.getCellDate(0,t);e.push(this.renderHeadDateCellHtml(i))}return e.join("")},renderHeadDateCellHtml:function(e,t,i){var n=this.view;return""+'<th class="fc-day-header '+n.widgetHeaderClass+" fc-"+z[e.day()]+'"'+(this.rowCnt==1?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(t>1?' colspan="'+t+'"':"")+(i?" "+i:"")+">"+J(e.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(e){return""+"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):"")+"</tr>"},renderBgIntroHtml:function(e){return this.renderIntroHtml()},renderBgCellsHtml:function(e){var t=[];var i,n;for(i=0;i<this.colCnt;i++){n=this.getCellDate(e,i);t.push(this.renderBgCellHtml(n))}return t.join("")},renderBgCellHtml:function(e,t){var i=this.view;var n=this.getDayClasses(e);n.unshift("fc-day",i.widgetContentClass);return'<td class="'+n.join(" ")+'"'+' data-date="'+e.format("YYYY-MM-DD")+'"'+(t?" "+t:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(e){var t=this.renderIntroHtml();if(t){if(this.isRTL){e.append(t)}else{e.prepend(t)}}}};var Je=ne.DayGrid=je.extend(Ke,{numbersVisible:false,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(e){var t=this.view;var i=this.rowCnt;var n=this.colCnt;var r="";var s;var a;for(s=0;s<i;s++){r+=this.renderDayRowHtml(s,e)}this.el.html(r);this.rowEls=this.el.find(".fc-row");this.cellEls=this.el.find(".fc-day");this.rowCoordCache=new Ve({els:this.rowEls,isVertical:true});this.colCoordCache=new Ve({els:this.cellEls.slice(0,this.colCnt),isHorizontal:true});for(s=0;s<i;s++){for(a=0;a<n;a++){t.trigger("dayRender",null,this.getCellDate(s,a),this.getCellEl(s,a))}}},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents(true);var t=this.eventsToSegs(e);this.renderFill("businessHours",t,"bgevent")},renderDayRowHtml:function(e,t){var i=this.view;var n=["fc-row","fc-week",i.widgetContentClass];if(t){n.push("fc-rigid")}return""+'<div class="'+n.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.renderBgTrHtml(e)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table>"+"</div>"+"</div>"},renderNumberTrHtml:function(e){return""+"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):"")+"</tr>"},renderNumberIntroHtml:function(e){return this.renderIntroHtml()},renderNumberCellsHtml:function(e){var t=[];var i,n;for(i=0;i<this.colCnt;i++){n=this.getCellDate(e,i);t.push(this.renderNumberCellHtml(n))}return t.join("")},renderNumberCellHtml:function(e){var t;if(!this.view.dayNumbersVisible){return"<td/>"}t=this.getDayClasses(e);t.unshift("fc-day-number");if(this.view.opt("rendingNumberCellFun")){var i=this.view.opt("rendingNumberCellFun").call(this,e,e.format(),e.date());return'<td class="'+t.join(" ")+'" data-date="'+e.format()+'">'+e.date()+(i?i:"")+"</td>"}else{return""+'<td class="'+t.join(" ")+'" data-date="'+e.format()+'">'+e.date()+"</td>"}},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(e){var t=this.sliceRangeByRow(e);var i,n;for(i=0;i<t.length;i++){n=t[i];if(this.isRTL){n.leftCol=this.daysPerRow-1-n.lastRowDayIndex;n.rightCol=this.daysPerRow-1-n.firstRowDayIndex}else{n.leftCol=n.firstRowDayIndex;n.rightCol=n.lastRowDayIndex}}return t},prepareHits:function(){this.colCoordCache.build();this.rowCoordCache.build();this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear();this.rowCoordCache.clear()},queryHit:function(e,t){var i=this.colCoordCache.getHorizontalIndex(e);var n=this.rowCoordCache.getVerticalIndex(t);if(n!=null&&i!=null){return this.getCellHit(n,i)}},getHitSpan:function(e){return this.getCellRange(e.row,e.col)},getHitEl:function(e){return this.getCellEl(e.row,e.col)},getCellHit:function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}},getCellEl:function(e,t){return this.cellEls.eq(e*this.colCnt+t)},renderDrag:function(e,t){this.renderHighlight(this.eventToSpan(e));if(t&&!t.el.closest(this.el).length){this.renderEventLocationHelper(e,t);this.applyDragOpacity(this.helperEls);return true}},unrenderDrag:function(){this.unrenderHighlight();this.unrenderHelper()},renderEventResize:function(e,t){this.renderHighlight(this.eventToSpan(e));this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight();this.unrenderHelper()},renderHelper:function(e,s){var a=[];var t=this.eventToSegs(e);var o;t=this.renderFgSegEls(t);o=this.renderSegRows(t);this.rowEls.each(function(e,t){var i=te(t);var n=te('<div class="fc-helper-skeleton"><table/></div>');var r;if(s&&s.row===e){r=s.el.position().top}else{r=i.find(".fc-content-skeleton tbody").position().top}n.css("top",r).find("table").append(o[e].tbodyEl);i.append(n);a.push(n[0])});this.helperEls=te(a)},unrenderHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(e,t,i){var n=[];var r,s;var a;t=this.renderFillSegEls(e,t);for(r=0;r<t.length;r++){s=t[r];a=this.renderFillRow(e,s,i);this.rowEls.eq(s.row).append(a);n.push(a[0])}this.elsByFill[e]=te(n);return t},renderFillRow:function(e,t,i){var n=this.colCnt;var r=t.leftCol;var s=t.rightCol+1;var a;var o;i=i||e.toLowerCase();a=te('<div class="fc-'+i+'-skeleton">'+"<table><tr/></table>"+"</div>");o=a.find("tr");if(r>0){o.append('<td colspan="'+r+'"/>')}o.append(t.el.attr("colspan",s-r));if(s<n){o.append('<td colspan="'+(n-s)+'"/>')}this.bookendCells(o);return a}});Je.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover();je.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return je.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var t=te.grep(e,function(e){return e.event.allDay});return je.prototype.renderBgSegs.call(this,t)},renderFgSegs:function(e){var i;e=this.renderFgSegEls(e);i=this.rowStructs=this.renderSegRows(e);this.rowEls.each(function(e,t){te(t).find(".fc-content-skeleton > table").append(i[e].tbodyEl)});return e},unrenderFgSegs:function(){var e=this.rowStructs||[];var t;while(t=e.pop()){t.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(e){var t=[];var i;var n;i=this.groupSegRows(e);for(n=0;n<i.length;n++){t.push(this.renderSegRow(n,i[n]))}return t},fgSegHtml:function(e,t){var i=this.view;var n=e.event;var r=i.isEventDraggable(n);var s=!t&&n.allDay&&e.isStart&&i.isEventResizableFromStart(n);var a=!t&&n.allDay&&e.isEnd&&i.isEventResizableFromEnd(n);var o=this.getSegClasses(e,r,s||a);var l=se(this.getSegSkinCss(e));var u="";var d;var c;o.unshift("fc-day-grid-event","fc-h-event");if(e.isStart){d=this.getEventTimeText(n);if(d){u='<span class="fc-time">'+J(d)+"</span>"}}c='<span class="fc-title">'+(J(n.title||"")||"&nbsp;")+"</span>";return'<a class="'+o.join(" ")+'"'+(n.url?' href="'+J(n.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(this.isRTL?c+" "+u:u+" "+c)+"</div>"+(s?'<div class="fc-resizer fc-start-resizer" />':"")+(a?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(e,t){var i=this.colCnt;var n=this.buildSegLevels(t);var r=Math.max(1,n.length);var s=te("<tbody/>");var a=[];var o=[];var l=[];var u,d;var c;var f;var h,v;var g;function p(e){while(c<e){g=(l[u-1]||[])[c];if(g){g.attr("rowspan",parseInt(g.attr("rowspan")||1,10)+1)}else{g=te("<td/>");f.append(g)}o[u][c]=g;l[u][c]=g;c++}}for(u=0;u<r;u++){d=n[u];c=0;f=te("<tr/>");a.push([]);o.push([]);l.push([]);if(d){for(h=0;h<d.length;h++){v=d[h];p(v.leftCol);g=te('<td class="fc-event-container"/>').append(v.el);if(v.leftCol!=v.rightCol){g.attr("colspan",v.rightCol-v.leftCol+1)}else{l[u][c]=g}while(c<=v.rightCol){o[u][c]=g;a[u][c]=v;c++}f.append(g)}}p(i);this.bookendCells(f);s.append(f)}return{row:e,tbodyEl:s,cellMatrix:o,segMatrix:a,segLevels:n,segs:t}},buildSegLevels:function(e){var t=[];var i,n;var r;this.sortEventSegs(e);for(i=0;i<e.length;i++){n=e[i];for(r=0;r<t.length;r++){if(!et(n,t[r])){break}}n.level=r;(t[r]||(t[r]=[])).push(n)}for(r=0;r<t.length;r++){t[r].sort(tt)}return t},groupSegRows:function(e){var t=[];var i;for(i=0;i<this.rowCnt;i++){t.push([])}for(i=0;i<e.length;i++){t[e[i].row].push(e[i])}return t}});function et(e,t){var i,n;for(i=0;i<t.length;i++){n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol){return true}}return false}function tt(e,t){return e.leftCol-t.leftCol}Je.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(e){var t=this.rowStructs||[];var i;var n;for(i=0;i<t.length;i++){this.unlimitRow(i);if(!e){n=false}else if(typeof e==="number"){n=e}else{n=this.computeRowLevelLimit(i)}if(n!==false){this.limitRow(i,n)}}},computeRowLevelLimit:function(e){var t=this.rowEls.eq(e);var i=t.height();var n=this.rowStructs[e].tbodyEl.children();var r,s;var a;function o(e,t){a=Math.max(a,te(t).outerHeight())}for(r=0;r<n.length;r++){s=n.eq(r).removeClass("fc-limited");a=0;s.find("> td > :first-child").each(o);if(s.position().top+a>i){return r}}return false},limitRow:function(t,i){var n=this;var e=this.rowStructs[t];var r=[];var s=0;var a;var o;var l;var u,d;var c;var f;var h;var v,g;var p;var m;var y,w,S;function b(e){while(s<e){c=n.getCellSegs(t,s,i);if(c.length){v=o[i-1][s];S=n.renderMoreLink(t,s,c);w=te("<div/>").append(S);v.append(w);r.push(w[0])}s++}}if(i&&i<e.segLevels.length){a=e.segLevels[i-1];o=e.cellMatrix;l=e.tbodyEl.children().slice(i).addClass("fc-limited").get();for(u=0;u<a.length;u++){d=a[u];b(d.leftCol);h=[];f=0;while(s<=d.rightCol){c=this.getCellSegs(t,s,i);h.push(c);f+=c.length;s++}if(f){v=o[i-1][d.leftCol];g=v.attr("rowspan")||1;p=[];for(m=0;m<h.length;m++){y=te('<td class="fc-more-cell"/>').attr("rowspan",g);c=h[m];S=this.renderMoreLink(t,d.leftCol+m,[d].concat(c));w=te("<div/>").append(S);y.append(w);p.push(y[0]);r.push(y[0])}v.addClass("fc-limited").after(te(p));l.push(v[0])}}b(this.colCnt);e.moreEls=te(r);e.limitedEls=te(l)}},unlimitRow:function(e){var t=this.rowStructs[e];if(t.moreEls){t.moreEls.remove();t.moreEls=null}if(t.limitedEls){t.limitedEls.removeClass("fc-limited");t.limitedEls=null}},renderMoreLink:function(l,u,d){var c=this;var f=this.view;return te('<a class="fc-more"/>').text(this.getMoreLinkText(d.length)).on("click",function(e){var t=f.opt("eventLimitClick");var i=c.getCellDate(l,u);var n=te(this);var r=c.getCellEl(l,u);var s=c.getCellSegs(l,u);var a=c.resliceDaySegs(s,i);var o=c.resliceDaySegs(d,i);if(typeof t==="function"){t=f.trigger("eventLimitClick",null,{date:i,dayEl:r,moreEl:n,segs:a,hiddenSegs:o},e)}if(t==="popover"){c.showSegPopover(l,u,n,a)}else if(typeof t==="string"){f.calendar.zoomTo(i,t)}})},showSegPopover:function(e,t,i,n){var r=this;var s=this.view;var a=i.parent();var o;var l;if(this.rowCnt==1){o=s.el}else{o=this.rowEls.eq(e)}l={className:"fc-more-popover",content:this.renderSegPopoverContent(e,t,n),parentEl:this.el,top:o.offset().top,autoHide:true,viewportConstrain:s.opt("popoverViewportConstrain"),hide:function(){r.segPopover.removeElement();r.segPopover=null;r.popoverSegs=null}};if(this.isRTL){l.right=a.offset().left+a.outerWidth()+1}else{l.left=a.offset().left-1}this.segPopover=new Pe(l);this.segPopover.show()},renderSegPopoverContent:function(e,t,i){var n=this.view;var r=n.opt("theme");var s=this.getCellDate(e,t).format(n.opt("dayPopoverFormat"));var a=te('<div class="fc-header '+n.widgetHeaderClass+'">'+'<span class="fc-close '+(r?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+J(s)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+n.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>");var o=a.find(".fc-event-container");var l;i=this.renderFgSegEls(i,true);this.popoverSegs=i;for(l=0;l<i.length;l++){this.prepareHits();i[l].hit=this.getCellHit(e,t);this.releaseHits();o.append(i[l].el)}return a},resliceDaySegs:function(e,t){var i=te.map(e,function(e){return e.event});var n=t.clone();var r=n.clone().add(1,"days");var s={start:n,end:r};e=this.eventsToSegs(i,function(e){var t=F(e,s);return t?[t]:[]});this.sortEventSegs(e);return e},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");if(typeof t==="function"){return t(e)}else{return"+"+e+" "+t}},getCellSegs:function(e,t,i){var n=this.rowStructs[e].segMatrix;var r=i||0;var s=[];var a;while(r<n.length){a=n[r][t];if(a){s.push(a)}r++}return s}});var it=ne.TimeGrid=je.extend(Ke,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){je.apply(this,arguments);this.processOptions()},renderDates:function(){this.el.html(this.renderHtml());this.colEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.colCoordCache=new Ve({els:this.colEls,isHorizontal:true});this.slatCoordCache=new Ve({els:this.slatEls,isVertical:true});this.renderContentSkeleton()},renderHtml:function(){return""+'<div class="fc-bg">'+"<table>"+this.renderBgTrHtml(0)+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.renderSlatRowHtml()+"</table>"+"</div>"},renderSlatRowHtml:function(){var e=this.view;var t=this.isRTL;var i="";var n=ie.duration(+this.minTime);var r;var s;var a;while(n<this.maxTime){r=this.start.clone().time(n);s=le(G(n,this.labelInterval));a='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(s?"<span>"+J(r.format(this.labelFormat))+"</span>":"")+"</td>";i+='<tr data-time="'+r.format("HH:mm:ss")+'"'+(s?"":' class="fc-minor"')+">"+(!t?a:"")+'<td class="'+e.widgetContentClass+'"/>'+(t?a:"")+"</tr>";n.add(this.slotDuration)}return i},processOptions:function(){var e=this.view;var t=e.opt("slotDuration");var i=e.opt("snapDuration");var n;t=ie.duration(t);i=i?ie.duration(i):t;this.slotDuration=t;this.snapDuration=i;this.snapsPerSlot=t/i;this.minResizeDuration=i;this.minTime=ie.duration(e.opt("minTime"));this.maxTime=ie.duration(e.opt("maxTime"));n=e.opt("slotLabelFormat");if(te.isArray(n)){n=n[n.length-1]}this.labelFormat=n||e.opt("axisFormat")||e.opt("smallTimeFormat");n=e.opt("slotLabelInterval");this.labelInterval=n?ie.duration(n):this.computeLabelInterval(t)},computeLabelInterval:function(e){var t;var i;var n;for(t=kt.length-1;t>=0;t--){i=ie.duration(kt[t]);n=G(i,e);if(le(n)&&n>1){return i}}return ie.duration(e)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return true},prepareHits:function(){this.colCoordCache.build();this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(e,t){var i=this.snapsPerSlot;var n=this.colCoordCache;var r=this.slatCoordCache;var s=n.getHorizontalIndex(e);var a=r.getVerticalIndex(t);if(s!=null&&a!=null){var o=r.getTopOffset(a);var l=r.getHeight(a);var u=(t-o)/l;var d=Math.floor(u*i);var c=a*i+d;var f=o+d/i*l;var h=o+(d+1)/i*l;return{col:s,snap:c,component:this,left:n.getLeftOffset(s),right:n.getRightOffset(s),top:f,bottom:h}}},getHitSpan:function(e){var t=this.getCellDate(0,e.col);var i=this.computeSnapTime(e.snap);var n;t.time(i);n=t.clone().add(this.snapDuration);return{start:t,end:n}},getHitEl:function(e){return this.colEls.eq(e.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(e){return ie.duration(this.minTime+this.snapDuration*e)},spanToSegs:function(e){var t=this.sliceRangeByTimes(e);var i;for(i=0;i<t.length;i++){if(this.isRTL){t[i].col=this.daysPerRow-1-t[i].dayIndex}else{t[i].col=t[i].dayIndex}}return t},sliceRangeByTimes:function(e){var t=[];var i;var n;var r;var s;for(n=0;n<this.daysPerRow;n++){r=this.dayDates[n].clone();s={start:r.clone().time(this.minTime),end:r.clone().time(this.maxTime)};i=F(e,s);if(i){i.dayIndex=n;t.push(i)}}return t},updateSize:function(e){this.slatCoordCache.build();if(e){this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))}},computeDateTop:function(e,t){return this.computeTimeTop(ie.duration(e-t.clone().stripTime()))},computeTimeTop:function(e){var t=this.slatEls.length;var i=(e-this.minTime)/this.slotDuration;var n;var r;i=Math.max(0,i);i=Math.min(t,i);n=Math.floor(i);n=Math.min(n,t-1);r=i-n;return this.slatCoordCache.getTopPosition(n)+this.slatCoordCache.getHeight(n)*r},renderDrag:function(e,t){if(t){this.renderEventLocationHelper(e,t);for(var i=0;i<this.helperSegs.length;i++){this.applyDragOpacity(this.helperSegs[i].el)}return true}else{this.renderHighlight(this.eventToSpan(e))}},unrenderDrag:function(){this.unrenderHelper();this.unrenderHighlight()},renderEventResize:function(e,t){this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,t){this.renderHelperSegs(this.eventToSegs(e),t)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents();var t=this.eventsToSegs(e);this.renderBusinessSegs(t)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(e){var t=this.spanToSegs({start:e,end:e});var i=this.computeDateTop(e,e);var n=[];var r;for(r=0;r<t.length;r++){n.push(te('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",i).appendTo(this.colContainerEls.eq(t[r].col))[0])}if(t.length>0){n.push(te('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",i).appendTo(this.el.find(".fc-content-skeleton"))[0])}this.nowIndicatorEls=te(n)},unrenderNowIndicator:function(){if(this.nowIndicatorEls){this.nowIndicatorEls.remove();this.nowIndicatorEls=null}},renderSelection:function(e){if(this.view.opt("selectHelper")){this.renderEventLocationHelper(e)}else{this.renderHighlight(e)}},unrenderSelection:function(){this.unrenderHelper();this.unrenderHighlight()},renderHighlight:function(e){this.renderHighlightSegs(this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});it.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var e="";var t;var i;for(t=0;t<this.colCnt;t++){e+="<td>"+'<div class="fc-content-col">'+'<div class="fc-event-container fc-helper-container"></div>'+'<div class="fc-event-container"></div>'+'<div class="fc-highlight-container"></div>'+'<div class="fc-bgevent-container"></div>'+'<div class="fc-business-container"></div>'+"</div>"+"</td>"}i=te('<div class="fc-content-skeleton">'+"<table>"+"<tr>"+e+"</tr>"+"</table>"+"</div>");this.colContainerEls=i.find(".fc-content-col");this.helperContainerEls=i.find(".fc-helper-container");this.fgContainerEls=i.find(".fc-event-container:not(.fc-helper-container)");this.bgContainerEls=i.find(".fc-bgevent-container");this.highlightContainerEls=i.find(".fc-highlight-container");this.businessContainerEls=i.find(".fc-business-container");this.bookendCells(i.find("tr"));this.el.append(i)},renderFgSegs:function(e){e=this.renderFgSegsIntoContainers(e,this.fgContainerEls);this.fgSegs=e;return e},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(e,t){var i,n;var r;e=this.renderFgSegsIntoContainers(e,this.helperContainerEls);for(i=0;i<e.length;i++){n=e[i];if(t&&t.col===n.col){r=t.el;n.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")})}}this.helperSegs=e},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(e){e=this.renderFillSegEls("bgEvent",e);this.updateSegVerticals(e);this.attachSegsByCol(this.groupSegsByCol(e),this.bgContainerEls);this.bgSegs=e;return e},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(e){e=this.renderFillSegEls("highlight",e);this.updateSegVerticals(e);this.attachSegsByCol(this.groupSegsByCol(e),this.highlightContainerEls);this.highlightSegs=e},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(e){e=this.renderFillSegEls("businessHours",e);this.updateSegVerticals(e);this.attachSegsByCol(this.groupSegsByCol(e),this.businessContainerEls);this.businessSegs=e},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(e){var t=[];var i;for(i=0;i<this.colCnt;i++){t.push([])}for(i=0;i<e.length;i++){t[e[i].col].push(e[i])}return t},attachSegsByCol:function(e,t){var i;var n;var r;for(i=0;i<this.colCnt;i++){n=e[i];for(r=0;r<n.length;r++){t.eq(i).append(n[r].el)}}},unrenderNamedSegs:function(e){var t=this[e];var i;if(t){for(i=0;i<t.length;i++){t[i].el.remove()}this[e]=null}},renderFgSegsIntoContainers:function(e,t){var i;var n;e=this.renderFgSegEls(e);i=this.groupSegsByCol(e);for(n=0;n<this.colCnt;n++){this.updateFgSegCoords(i[n])}this.attachSegsByCol(i,t);return e},fgSegHtml:function(e,t){var i=this.view;var n=e.event;var r=i.isEventDraggable(n);var s=!t&&e.isStart&&i.isEventResizableFromStart(n);var a=!t&&e.isEnd&&i.isEventResizableFromEnd(n);var o=this.getSegClasses(e,r,s||a);var l=se(this.getSegSkinCss(e));var u;var d;var c;o.unshift("fc-time-grid-event","fc-v-event");if(i.isMultiDayEvent(n)){if(e.isStart||e.isEnd){u=this.getEventTimeText(e);d=this.getEventTimeText(e,"LT");c=this.getEventTimeText(e,null,false)}}else{u=this.getEventTimeText(n);d=this.getEventTimeText(n,"LT");c=this.getEventTimeText(n,null,false)}return'<a class="'+o.join(" ")+'"'+(n.url?' href="'+J(n.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(u?'<div class="fc-time"'+' data-start="'+J(c)+'"'+' data-full="'+J(d)+'"'+">"+"<span>"+J(u)+"</span>"+"</div>":"")+(n.title?'<div class="fc-title">'+J(n.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(a?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(e){this.computeSegVerticals(e);this.assignSegVerticals(e)},computeSegVerticals:function(e){var t,i;for(t=0;t<e.length;t++){i=e[t];i.top=this.computeDateTop(i.start,i.start);i.bottom=this.computeDateTop(i.end,i.start)}},assignSegVerticals:function(e){var t,i;for(t=0;t<e.length;t++){i=e[t];i.el.css(this.generateSegVerticalCss(i))}},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},updateFgSegCoords:function(e){this.computeSegVerticals(e);this.computeFgSegHorizontals(e);this.assignSegVerticals(e);this.assignFgSegHorizontals(e)},computeFgSegHorizontals:function(e){var t;var i;var n;this.sortEventSegs(e);t=nt(e);rt(t);if(i=t[0]){for(n=0;n<i.length;n++){st(i[n])}for(n=0;n<i.length;n++){this.computeFgSegForwardBack(i[n],0,0)}}},computeFgSegForwardBack:function(e,t,i){var n=e.forwardSegs;var r;if(e.forwardCoord===undefined){if(!n.length){e.forwardCoord=1}else{this.sortForwardSegs(n);this.computeFgSegForwardBack(n[0],t+1,i);e.forwardCoord=n[0].backwardCoord}e.backwardCoord=e.forwardCoord-(e.forwardCoord-i)/(t+1);for(r=0;r<n.length;r++){this.computeFgSegForwardBack(n[r],0,e.forwardCoord)}}},sortForwardSegs:function(e){e.sort(ue(this,"compareForwardSegs"))},compareForwardSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)},assignFgSegHorizontals:function(e){var t,i;for(t=0;t<e.length;t++){i=e[t];i.el.css(this.generateFgSegHorizontalCss(i));if(i.bottom-i.top<30){i.el.addClass("fc-short")}}},generateFgSegHorizontalCss:function(e){var t=this.view.opt("slotEventOverlap");var i=e.backwardCoord;var n=e.forwardCoord;var r=this.generateSegVerticalCss(e);var s;var a;if(t){n=Math.min(1,i+(n-i)*2)}if(this.isRTL){s=1-n;a=i}else{s=i;a=1-n}r.zIndex=e.level+1;r.left=s*100+"%";r.right=a*100+"%";if(t&&e.forwardPressure){r[this.isRTL?"marginLeft":"marginRight"]=10*2}return r}});function nt(e){var t=[];var i,n;var r;for(i=0;i<e.length;i++){n=e[i];for(r=0;r<t.length;r++){if(!at(n,t[r]).length){break}}n.level=r;(t[r]||(t[r]=[])).push(n)}return t}function rt(e){var t,i;var n,r;var s;for(t=0;t<e.length;t++){i=e[t];for(n=0;n<i.length;n++){r=i[n];r.forwardSegs=[];for(s=t+1;s<e.length;s++){at(r,e[s],r.forwardSegs)}}}}function st(e){var t=e.forwardSegs;var i=0;var n,r;if(e.forwardPressure===undefined){for(n=0;n<t.length;n++){r=t[n];st(r);i=Math.max(i,1+r.forwardPressure)}e.forwardPressure=i}}function at(e,t,i){i=i||[];for(var n=0;n<t.length;n++){if(ot(e,t[n])){i.push(t[n])}}return i}function ot(e,t){return e.bottom>t.top&&e.top<t.bottom}var lt=ne.View=Ne.extend({type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:false,isEventsRendered:false,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:false,isSelected:false,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(e,t,i,n){this.calendar=e;this.type=this.name=t;this.options=i;this.intervalDuration=n||ie.duration(1,"day");this.nextDayThreshold=ie.duration(this.opt("nextDayThreshold"));this.initThemingProps();this.initHiddenDays();this.isRTL=this.opt("isRTL");this.eventOrderSpecs=x(this.opt("eventOrder"));this.documentMousedownProxy=ue(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(e){return this.options[e]},trigger:function(e,t){var i=this.calendar;return i.trigger.apply(i,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(e){this.setRange(this.computeRange(e))},setRange:function(e){te.extend(this,e);this.updateTitle()},computeRange:function(e){var t=N(this.intervalDuration);var i=e.clone().startOf(t);var n=i.clone().add(this.intervalDuration);var r,s;if(/year|month|week|day/.test(t)){i.stripTime();n.stripTime()}else{if(!i.hasTime()){i=this.calendar.time(0)}if(!n.hasTime()){n=this.calendar.time(0)}}r=i.clone();r=this.skipHiddenDays(r);s=n.clone();s=this.skipHiddenDays(s,-1,true);return{intervalUnit:t,intervalStart:i,intervalEnd:n,start:r,end:s}},computePrevDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(e,t){if(this.intervalDuration.as("days")<=1){if(this.isHiddenDay(e)){e=this.skipHiddenDays(e,t);e.startOf("day")}}return e},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){if(this.intervalUnit=="year"){return"YYYY"}else if(this.intervalUnit=="month"){return this.opt("monthYearFormat")}else if(this.intervalDuration.as("days")>1){return"ll"}else{return"LL"}},formatRange:function(e,t,i){var n=e.end;if(!n.hasTime()){n=n.clone().subtract(1)}return xe(e.start,n,t,i,this.opt("isRTL"))},setElement:function(e){this.el=e;this.bindGlobalHandlers()},removeElement:function(){this.clear();if(this.isSkeletonRendered){this.unrenderSkeleton();this.isSkeletonRendered=false}this.unbindGlobalHandlers();this.el.remove()},display:function(e){var t=this;var i=null;if(this.displaying){i=this.queryScroll()}this.calendar.freezeContentHeight();return this.clear().then(function(){return t.displaying=te.when(t.displayView(e)).then(function(){t.forceScroll(t.computeInitialScroll(i));t.calendar.unfreezeContentHeight();t.triggerRender()})})},clear:function(){var e=this;var t=this.displaying;if(t){return t.then(function(){e.displaying=null;e.clearEvents();return e.clearView()})}else{return te.when()}},displayView:function(e){if(!this.isSkeletonRendered){this.renderSkeleton();this.isSkeletonRendered=true}if(e){this.setDate(e)}if(this.render){this.render()}this.renderDates();this.updateSize();this.renderBusinessHours();this.startNowIndicator()},clearView:function(){this.unselect();this.stopNowIndicator();this.triggerUnrender();this.unrenderBusinessHours();this.unrenderDates();if(this.destroy){this.destroy()}},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){te(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){te(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header";this.widgetContentClass=e+"-widget-content";this.highlightStateClass=e+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var e=this;var t;var i;var n;if(this.opt("nowIndicator")){t=this.getNowIndicatorUnit();if(t){i=ue(this,"updateNowIndicator");this.initialNowDate=this.calendar.getNow();this.initialNowQueriedMs=+new Date;this.renderNowIndicator(this.initialNowDate);this.isNowIndicatorRendered=true;n=this.initialNowDate.clone().startOf(t).add(1,t)-this.initialNowDate;this.nowIndicatorTimeoutID=setTimeout(function(){e.nowIndicatorTimeoutID=null;i();n=+ie.duration(1,t);n=Math.max(100,n);e.nowIndicatorIntervalID=setInterval(i,n)},n)}}},updateNowIndicator:function(){if(this.isNowIndicatorRendered){this.unrenderNowIndicator();this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs))}},stopNowIndicator:function(){if(this.isNowIndicatorRendered){if(this.nowIndicatorTimeoutID){clearTimeout(this.nowIndicatorTimeoutID);this.nowIndicatorTimeoutID=null}if(this.nowIndicatorIntervalID){clearTimeout(this.nowIndicatorIntervalID);this.nowIndicatorIntervalID=null}this.unrenderNowIndicator();this.isNowIndicatorRendered=false}},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},updateSize:function(e){var t;if(e){t=this.queryScroll()}this.updateHeight(e);this.updateWidth(e);this.updateNowIndicator();if(e){this.setScroll(t)}},updateWidth:function(e){},updateHeight:function(e){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(e,t){},computeScrollerHeight:function(e){var t=this.scrollerEl;var i;var n;i=this.el.add(t);i.css({position:"relative",left:-1});n=this.el.outerHeight()-t.height();i.css({position:"",left:""});return e-n},computeInitialScroll:function(e){return 0},queryScroll:function(){if(this.scrollerEl){return this.scrollerEl.scrollTop()}},setScroll:function(e){if(this.scrollerEl){return this.scrollerEl.scrollTop(e)}},forceScroll:function(e){var t=this;this.setScroll(e);setTimeout(function(){t.setScroll(e)},0)},displayEvents:function(e){var t=this.queryScroll();this.clearEvents();this.renderEvents(e);this.isEventsRendered=true;this.setScroll(t);this.triggerEventRender()},clearEvents:function(){var e;if(this.isEventsRendered){e=this.queryScroll();this.triggerEventUnrender();if(this.destroyEvents){this.destroyEvents()}this.unrenderEvents();this.setScroll(e);this.isEventsRendered=false}},renderEvents:function(e){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(e){this.trigger("eventAfterRender",e.event,e.event,e.el)});this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)})},resolveEventEl:function(e,t){var i=this.trigger("eventRender",e,e,t);if(i===false){t=null}else if(i&&i!==true){t=te(i)}return t},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var i=this.getEventSegs();var n;for(n=0;n<i.length;n++){if(!t||i[n].event._id===t._id){if(i[n].el){e.call(this,i[n])}}}},getEventSegs:function(){return[]},isEventDraggable:function(e){var t=e.source||{};return K(e.startEditable,t.startEditable,this.opt("eventStartEditable"),e.editable,t.editable,this.opt("editable"))},reportEventDrop:function(e,t,i,n,r){var s=this.calendar;var a=s.mutateEvent(e,t,i);var o=function(){a.undo();s.reportEventChange()};this.triggerEventDrop(e,a.dateDelta,o,n,r);s.reportEventChange()},triggerEventDrop:function(e,t,i,n,r){this.trigger("eventDrop",n[0],e,t,i,r,{})},reportExternalDrop:function(e,t,i,n,r){var s=e.eventProps;var a;var o;if(s){a=te.extend({},s,t);o=this.calendar.renderEvent(a,e.stick)[0]}this.triggerExternalDrop(o,t,i,n,r)},triggerExternalDrop:function(e,t,i,n,r){this.trigger("drop",i[0],t.start,n,r);if(e){this.trigger("eventReceive",null,e)}},renderDrag:function(e,t){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return K(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportEventResize:function(e,t,i,n,r){var s=this.calendar;var a=s.mutateEvent(e,t,i);var o=function(){a.undo();s.reportEventChange()};this.triggerEventResize(e,a.durationDelta,o,n,r);s.reportEventChange()},triggerEventResize:function(e,t,i,n,r){this.trigger("eventResize",n[0],e,t,i,r,{})},select:function(e,t){this.unselect(t);this.renderSelection(e);this.reportSelection(e,t)},renderSelection:function(e){},reportSelection:function(e,t){this.isSelected=true;this.triggerSelect(e,t)},triggerSelect:function(e,t){this.trigger("select",null,this.calendar.applyTimezone(e.start),this.calendar.applyTimezone(e.end),t)},unselect:function(e){if(this.isSelected){this.isSelected=false;if(this.destroySelection){this.destroySelection()}this.unrenderSelection();this.trigger("unselect",null,e)}},unrenderSelection:function(){},documentMousedown:function(e){var t;if(this.isSelected&&this.opt("unselectAuto")&&E(e)){t=this.opt("unselectCancel");if(!t||!te(e.target).closest(t).length){this.unselect(e)}}},triggerDayClick:function(e,t,i){this.trigger("dayClick",t,this.calendar.applyTimezone(e.start),i)},initHiddenDays:function(){var e=this.opt("hiddenDays")||[];var t=[];var i=0;var n;if(this.opt("weekends")===false){e.push(0,6)}for(n=0;n<7;n++){if(!(t[n]=te.inArray(n,e)!==-1)){i++}}if(!i){throw"invalid hiddenDays"}this.isHiddenDayHash=t},isHiddenDay:function(e){if(ie.isMoment(e)){e=e.day()}return this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,i){var n=e.clone();t=t||1;while(this.isHiddenDayHash[(n.day()+(i?t:0)+7)%7]){n.add(t,"days")}return n},computeDayRange:function(e){var t=e.start.clone().stripTime();var i=e.end;var n=null;var r;if(i){n=i.clone().stripTime();r=+i.time();if(r&&r>=this.nextDayThreshold){n.add(1,"days")}}if(!i||n<=t){n=t.clone().add(1,"days")}return{start:t,end:n}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return t.end.diff(t.start,"days")>1}});var ut=ne.Calendar=Ne.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:dt,initialize:function(){},initOptions:function(e){var t,i;var n,r;e=s(e);t=e.lang;i=ct[t];if(!i){t=ut.defaults.lang;i=ct[t]||{}}n=K(e.isRTL,i.isRTL,ut.defaults.isRTL);r=n?ut.rtlDefaults:{};this.dirDefaults=r;this.langDefaults=i;this.overrides=e;this.options=c([ut.defaults,r,i,e]);gt(this.options);this.viewSpecCache={}},getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(e){var t;var i;var n;if(te.inArray(e,M)!=-1){t=this.header.getViewsWithButtons();te.each(ne.views,function(e){t.push(e)});for(i=0;i<t.length;i++){n=this.getViewSpec(t[i]);if(n){if(n.singleUnit==e){return n}}}}},buildViewSpec:function(e){var t=this.overrides.views||{};var i=[];var n=[];var r=[];var s=e;var a;var o;var l;var u;while(s){a=d[s];o=t[s];s=null;if(typeof a==="function"){a={class:a}}if(a){i.unshift(a);n.unshift(a.defaults||{});l=l||a.duration;s=s||a.type}if(o){r.unshift(o);l=l||o.duration;s=s||o.type}}a=Z(i);a.type=e;if(!a["class"]){return false}if(l){l=ie.duration(l);if(l.valueOf()){a.duration=l;u=N(l);if(l.as(u)===1){a.singleUnit=u;r.unshift(t[u]||{})}}}a.defaults=c(n);a.overrides=c(r);this.buildViewSpecOptions(a);this.buildViewSpecButtonText(a,e);return a},buildViewSpecOptions:function(e){e.options=c([ut.defaults,e.defaults,this.dirDefaults,this.langDefaults,this.overrides,e.overrides]);gt(e.options)},buildViewSpecButtonText:function(i,n){function e(e){var t=e.buttonText||{};return t[n]||(i.singleUnit?t[i.singleUnit]:null)}i.buttonTextOverride=e(this.overrides)||i.overrides.buttonText;i.buttonTextDefault=e(this.langDefaults)||e(this.dirDefaults)||i.defaults.buttonText||e(ut.defaults)||(i.duration?this.humanizeDuration(i.duration):null)||n},instantiateView:function(e){var t=this.getViewSpec(e);return new t["class"](this,e,t.options,t.duration)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))},pushLoading:function(){if(!this.loadingLevel++){this.trigger("loading",null,true,this.view)}},popLoading:function(){if(!--this.loadingLevel){this.trigger("loading",null,false,this.view)}},buildSelectSpan:function(e,t){var i=this.moment(e).stripZone();var n;if(t){n=this.moment(t).stripZone()}else if(i.hasTime()){n=i.clone().add(this.defaultTimedEventDuration)}else{n=i.clone().add(this.defaultAllDayEventDuration)}return{start:i,end:n}}});ut.mixin(Ge);function dt(e,t){var r=this;r.initOptions(t||{});var n=this.options;r.render=S;r.destroy=E;r.refetchEvents=k;r.reportEvents=N;r.reportEventChange=B;r.rerenderEvents=I;r.changeView=C;r.select=P;r.unselect=V;r.prev=O;r.next=_;r.prevYear=A;r.nextYear=Y;r.today=W;r.gotoDate=j;r.incrementDate=Z;r.zoomTo=U;r.getDate=q;r.getCalendar=Q;r.getView=K;r.option=J;r.trigger=ee;var i=re(pt(n.lang));if(n.monthNames){i._months=n.monthNames}if(n.monthNamesShort){i._monthsShort=n.monthNamesShort}if(n.dayNames){i._weekdays=n.dayNames}if(n.dayNamesShort){i._weekdaysShort=n.dayNamesShort}if(n.firstDay!=null){var s=re(i._week);s.dow=n.firstDay;i._week=s}i._fullCalendar_weekCalc=function(e){if(typeof e==="function"){return e}else if(e==="local"){return e}else if(e==="iso"||e==="ISO"){return"ISO"}}(n.weekNumberCalculation);r.defaultAllDayEventDuration=ie.duration(n.defaultAllDayEventDuration);r.defaultTimedEventDuration=ie.duration(n.defaultTimedEventDuration);r.moment=function(){var e;if(n.timezone==="local"){e=ne.moment.apply(null,arguments);if(e.hasTime()){e.local()}}else if(n.timezone==="UTC"){e=ne.moment.utc.apply(null,arguments)}else{e=ne.moment.parseZone.apply(null,arguments)}if("_locale"in e){e._locale=i}else{e._lang=i}return e};r.getIsAmbigTimezone=function(){return n.timezone!=="local"&&n.timezone!=="UTC"};r.applyTimezone=function(e){if(!e.hasTime()){return e.clone()}var t=r.moment(e.toArray());var i=e.time()-t.time();var n;if(i){n=t.clone().add(i);if(e.time()-n.time()===0){t=n}}return t};r.getNow=function(){var e=n.now;if(typeof e==="function"){e=e()}return r.moment(e).stripZone()};r.getEventEnd=function(e){if(e.end){return e.end.clone()}else{return r.getDefaultEventEnd(e.allDay,e.start)}};r.getDefaultEventEnd=function(e,t){var i=t.clone();if(e){i.stripTime().add(r.defaultAllDayEventDuration)}else{i.add(r.defaultTimedEventDuration)}if(r.getIsAmbigTimezone()){i.stripZone()}return i};r.humanizeDuration=function(e){return(e.locale||e.lang).call(e,n.lang).humanize()};St.call(r,n);var a=r.isFetchNeeded;var o=r.fetchEvents;var l=e[0];var u;var d;var c;var f;var h;var v={};var g;var p;var m=0;var y=[];var w;if(n.defaultDate!=null){w=r.moment(n.defaultDate).stripZone()}else{w=r.getNow()}function S(){if(!c){b()}else if(D()){T();C()}}function b(){f=n.theme?"ui":"fc";e.addClass("fc");if(n.isRTL){e.addClass("fc-rtl")}else{e.addClass("fc-ltr")}if(n.theme){e.addClass("ui-widget")}else{e.addClass("fc-unthemed")}c=te("<div class='fc-view-container'/>").prependTo(e);u=r.header=new mt(r,n);d=u.render();if(d){e.prepend(d)}C(n.defaultView);if(n.handleWindowResize){p=de(R,n.windowResizeDelay);te(window).resize(p)}}function E(){if(h){h.removeElement()}u.removeElement();c.remove();e.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");if(p){te(window).unbind("resize",p)}}function D(){return e.is(":visible")}function C(e){m++;if(h&&e&&h.type!==e){u.deactivateButton(h.type);$();h.removeElement();h=r.view=null}if(!h&&e){h=r.view=v[e]||(v[e]=r.instantiateView(e));h.setElement(te("<div class='fc-view fc-"+e+"-view' />").appendTo(c));u.activateButton(e)}if(h){w=h.massageCurrentDate(w);if(!h.displaying||!w.isWithin(h.intervalStart,h.intervalEnd)){if(D()){h.display(w);X();L();G();z()}}}X();m--}r.getSuggestedViewHeight=function(){if(g===undefined){T()}return g};r.isHeightAuto=function(){return n.contentHeight==="auto"||n.height==="auto"};function H(e){if(D()){if(e){x()}m++;h.updateSize(true);m--;return true}}function T(){if(D()){x()}}function x(){if(typeof n.contentHeight==="number"){g=n.contentHeight}else if(typeof n.height==="number"){g=n.height-(d?d.outerHeight(true):0)}else{g=Math.round(c.width()/Math.max(n.aspectRatio,.5))}}function R(e){if(!m&&e.target===window&&h.start){if(H(true)){h.trigger("windowResize",l)}}}function k(){F();M()}function I(){if(D()){$();h.displayEvents(y);X()}}function F(){$();h.clearEvents();X()}function z(){if(!n.lazyFetching||a(h.start,h.end)){M()}else{I()}}function M(){o(h.start,h.end)}function N(e){y=e;I()}function B(){I()}function L(){u.updateTitle(h.title)}function G(){var e=r.getNow();if(e.isWithin(h.intervalStart,h.intervalEnd)){u.disableButton("today")}else{u.enableButton("today")}}function P(e,t){h.select(r.buildSelectSpan.apply(r,arguments))}function V(){if(h){h.unselect()}}function O(){w=h.computePrevDate(w);C()}function _(){w=h.computeNextDate(w);C()}function A(){w.add(-1,"years");C()}function Y(){w.add(1,"years");C()}function W(){w=r.getNow();C()}function j(e){w=r.moment(e).stripZone();C()}function Z(e){w.add(ie.duration(e));C()}function U(e,t){var i;t=t||"day";i=r.getViewSpec(t)||r.getUnitViewSpec(t);w=e.clone();C(i?i.type:null)}function q(){return r.applyTimezone(w)}r.freezeContentHeight=$;r.unfreezeContentHeight=X;function $(){c.css({width:"100%",height:c.height(),overflow:"hidden"})}function X(){c.css({width:"",height:"",overflow:""})}function Q(){return r}function K(){return h}function J(e,t){if(t===undefined){return n[e]}if(e=="height"||e=="contentHeight"||e=="aspectRatio"){n[e]=t;H(true)}}function ee(e,t){var i=Array.prototype.slice.call(arguments,2);t=t||l;this.triggerWith(e,t,i);if(n[e]){return n[e].apply(t,i)}}r.initialize()}ut.defaults={titleRangeSeparator:"  ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,isRTL:false,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventOrder:"title",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};ut.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};ut.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var ct=ne.langs={};ne.datepickerLang=function(e,t,i){var n=ct[e]||(ct[e]={});n.isRTL=i.isRTL;n.weekNumberTitle=i.weekHeader;te.each(ft,function(e,t){n[e]=t(i)});if(te.datepicker){te.datepicker.regional[t]=te.datepicker.regional[e]=i;te.datepicker.regional.en=te.datepicker.regional[""];te.datepicker.setDefaults(i)}};ne.lang=function(e,t){var i;var n;i=ct[e]||(ct[e]={});if(t){i=ct[e]=c([i,t])}n=pt(e);te.each(ht,function(e,t){if(i[e]==null){i[e]=t(n,i)}});ut.defaults.lang=e};var ft={buttonText:function(e){return{prev:ee(e.prevText),next:ee(e.nextText),today:ee(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}};var ht={dayOfMonthFormat:function(e,t){var i=e.longDateFormat("l");i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(t.isRTL){i+=" ddd"}else{i="ddd "+i}return i},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}};var vt={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};function gt(i){te.each(vt,function(e,t){if(i[e]==null){i[e]=t(i)}})}function pt(e){var t=ie.localeData||ie.langData;return t.call(ie,e)||t.call(ie,"en")}ne.lang("en",ut.englishDefaults);function mt(v,g){var e=this;e.render=i;e.removeElement=n;e.updateTitle=s;e.activateButton=a;e.deactivateButton=o;e.disableButton=l;e.enableButton=u;e.getViewsWithButtons=d;var t=te();var p=[];var m;function i(){var e=g.header;m=g.theme?"ui":"fc";if(e){t=te("<div class='fc-toolbar'/>").append(r("left")).append(r("right")).append(r("center")).append('<div class="fc-clear"/>');return t}}function n(){t.remove();t=te()}function r(e){var i=te('<div class="fc-'+e+'"/>');var t=g.header[e];if(t){te.each(t.split(" "),function(e){var f=te();var h=true;var t;te.each(this.split(","),function(e,t){var i;var n;var r;var s;var a;var o;var l;var u;var d;var c;if(t=="title"){f=f.add(te("<h2>&nbsp;</h2>"));h=false}else{if(i=(v.options.customButtons||{})[t]){r=function(e){if(i.click){i.click.call(c[0],e)}};s="";a=i.text}else if(n=v.getViewSpec(t)){r=function(){v.changeView(t)};p.push(t);s=n.buttonTextOverride;a=n.buttonTextDefault}else if(v[t]){r=function(){v[t]()};s=(v.overrides.buttonText||{})[t];a=g.buttonText[t]}if(r){o=i?i.themeIcon:g.themeButtonIcons[t];l=i?i.icon:g.buttonIcons[t];if(s){u=J(s)}else if(o&&g.theme){u="<span class='ui-icon ui-icon-"+o+"'></span>"}else if(l&&!g.theme){u="<span class='fc-icon fc-icon-"+l+"'></span>"}else{u=J(a)}d=["fc-"+t+"-button",m+"-button",m+"-state-default"];c=te('<button type="button" class="'+d.join(" ")+'">'+u+"</button>").click(function(e){if(!c.hasClass(m+"-state-disabled")){r(e);if(c.hasClass(m+"-state-active")||c.hasClass(m+"-state-disabled")){c.removeClass(m+"-state-hover")}}}).mousedown(function(){c.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-down")}).mouseup(function(){c.removeClass(m+"-state-down")}).hover(function(){c.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-hover")},function(){c.removeClass(m+"-state-hover").removeClass(m+"-state-down")});f=f.add(c)}}});if(h){f.first().addClass(m+"-corner-left").end().last().addClass(m+"-corner-right").end()}if(f.length>1){t=te("<div/>");if(h){t.addClass("fc-button-group")}t.append(f);i.append(t)}else{i.append(f)}})}return i}function s(e){t.find("h2").text(e)}function a(e){t.find(".fc-"+e+"-button").addClass(m+"-state-active")}function o(e){t.find(".fc-"+e+"-button").removeClass(m+"-state-active")}function l(e){t.find(".fc-"+e+"-button").attr("disabled","disabled").addClass(m+"-state-disabled")}function u(e){t.find(".fc-"+e+"-button").removeAttr("disabled").removeClass(m+"-state-disabled")}function d(){return p}}ne.sourceNormalizers=[];ne.sourceFetchers=[];var yt={dataType:"json",cache:false};var wt=1;function St(g){var p=this;p.isFetchNeeded=e;p.fetchEvents=t;p.addEventSource=i;p.removeEventSource=r;p.updateEvent=v;p.renderEvent=E;p.removeEvents=D;p.clientEvents=C;p.mutateEvent=I;p.normalizeEventDates=x;p.normalizeEventTimes=R;var o=p.reportEvents;var a={events:[]};var s=[a];var m,y;var l=0;var u=0;var d=[];te.each((g.events?[g.events]:[]).concat(g.eventSources||[]),function(e,t){var i=n(t);if(i){s.push(i)}});function e(e,t){return!m||e<m||t>y}function t(e,t){m=e;y=t;d=[];var i=++l;var n=s.length;u=n;for(var r=0;r<n;r++){c(s[r],i)}}function c(s,a){w(s,function(e){var t=te.isArray(s.events);var i,n;var r;if(a==l){if(e){for(i=0;i<e.length;i++){n=e[i];if(t){r=n}else{r=H(n,s)}if(r){d.push.apply(d,k(r))}}}u--;if(!u){o(d)}}})}function w(e,i){var t;var n=ne.sourceFetchers;var r;for(t=0;t<n.length;t++){r=n[t].call(p,e,m.clone(),y.clone(),g.timezone,i);if(r===true){return}else if(typeof r=="object"){w(r,i);return}}var s=e.events;if(s){if(te.isFunction(s)){p.pushLoading();s.call(p,m.clone(),y.clone(),g.timezone,function(e){i(e);p.popLoading()})}else if(te.isArray(s)){i(s)}else{i()}}else{var a=e.url;if(a){var o=e.success;var l=e.error;var u=e.complete;var d;if(te.isFunction(e.data)){d=e.data()}else{d=e.data}var c=te.extend({},d||{});var f=K(e.startParam,g.startParam);var h=K(e.endParam,g.endParam);var v=K(e.timezoneParam,g.timezoneParam);if(f){c[f]=m.format()}if(h){c[h]=y.format()}if(g.timezone&&g.timezone!="local"){c[v]=g.timezone}p.pushLoading();te.ajax(te.extend({},yt,e,{data:c,success:function(e){e=e||[];var t=Q(o,this,arguments);if(te.isArray(t)){e=t}i(e)},error:function(){Q(l,this,arguments);i()},complete:function(){Q(u,this,arguments);p.popLoading()}}))}else{i()}}}function i(e){var t=n(e);if(t){s.push(t);u++;c(t,l)}}function n(e){var t=ne.sourceNormalizers;var i;var n;if(te.isFunction(e)||te.isArray(e)){i={events:e}}else if(typeof e==="string"){i={url:e}}else if(typeof e==="object"){i=te.extend({},e)}if(i){if(i.className){if(typeof i.className==="string"){i.className=i.className.split(/\s+/)}}else{i.className=[]}if(te.isArray(i.events)){i.origArray=i.events;i.events=te.map(i.events,function(e){return H(e,i)})}for(n=0;n<t.length;n++){t[n].call(p,i)}return i}}function r(t){s=te.grep(s,function(e){return!f(e,t)});d=te.grep(d,function(e){return!f(e.source,t)});o(d)}function f(e,t){return e&&t&&h(e)==h(t)}function h(e){return(typeof e==="object"?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function v(e){e.start=p.moment(e.start);if(e.end){e.end=p.moment(e.end)}else{e.end=null}I(e,S(e));o(d)}function S(e){var i={};te.each(e,function(e,t){if(b(e)){if(t!==undefined&&X(t)){i[e]=t}}});return i}function b(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function E(e,t){var i=H(e);var n;var r,s;if(i){n=k(i);for(r=0;r<n.length;r++){s=n[r];if(!s.source){if(t){a.events.push(s);s.source=a}d.push(s)}}o(d);return n}return[]}function D(e){var t;var i;if(e==null){e=function(){return true}}else if(!te.isFunction(e)){t=e+"";e=function(e){return e._id==t}}d=te.grep(d,e,true);for(i=0;i<s.length;i++){if(te.isArray(s[i].events)){s[i].events=te.grep(s[i].events,e,true)}}o(d)}function C(t){if(te.isFunction(t)){return te.grep(d,t)}else if(t!=null){t+="";return te.grep(d,function(e){return e._id==t})}return d}function H(e,t){var i={};var n,r;var s;if(g.eventDataTransform){e=g.eventDataTransform(e)}if(t&&t.eventDataTransform){e=t.eventDataTransform(e)}te.extend(i,e);if(t){i.source=t}i._id=e._id||(e.id===undefined?"_fc"+wt++:e.id+"");if(e.className){if(typeof e.className=="string"){i.className=e.className.split(/\s+/)}else{i.className=e.className}}else{i.className=[]}n=e.start||e.date;r=e.end;if(W(n)){n=ie.duration(n)}if(W(r)){r=ie.duration(r)}if(e.dow||ie.isDuration(n)||ie.isDuration(r)){i.start=n?ie.duration(n):null;i.end=r?ie.duration(r):null;i._recurring=true}else{if(n){n=p.moment(n);if(!n.isValid()){return false}}if(r){r=p.moment(r);if(!r.isValid()){r=null}}s=e.allDay;if(s===undefined){s=K(t?t.allDayDefault:undefined,g.allDayDefault)}T(n,r,s,i)}return i}function T(e,t,i,n){n.start=e;n.end=t;n.allDay=i;x(n);bt(n)}function x(e){R(e);if(e.end&&!e.end.isAfter(e.start)){e.end=null}if(!e.end){if(g.forceEventDuration){e.end=p.getDefaultEventEnd(e.allDay,e.start)}else{e.end=null}}}function R(e){if(e.allDay==null){e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())}if(e.allDay){e.start.stripTime();if(e.end){e.end.stripTime()}}else{if(!e.start.hasTime()){e.start=p.applyTimezone(e.start.time(0))}if(e.end&&!e.end.hasTime()){e.end=p.applyTimezone(e.end.time(0))}}}function k(e,t,i){var n=[];var r;var s;var a;var o;var l,u;var d,c;var f;t=t||m;i=i||y;if(e){if(e._recurring){if(s=e.dow){r={};for(a=0;a<s.length;a++){r[s[a]]=true}}o=t.clone().stripTime();while(o.isBefore(i)){if(!r||r[o.day()]){l=e.start;u=e.end;d=o.clone();c=null;if(l){d=d.time(l)}if(u){c=o.clone().time(u)}f=te.extend({},e);T(d,c,!l&&!u,f);n.push(f)}o.add(1,"days")}}else{n.push(e)}}return n}function I(e,i,n){var r={};var t;var s;var a;var o;var l;var u;function d(e,t){if(n){return A(e,t,n)}else if(i.allDay){return _(e,t)}else{return O(e,t)}}i=i||{};if(!i.start){i.start=e.start.clone()}if(i.end===undefined){i.end=e.end?e.end.clone():null}if(i.allDay==null){i.allDay=e.allDay}x(i);t={start:e._start.clone(),end:e._end?e._end.clone():p.getDefaultEventEnd(e._allDay,e._start),allDay:i.allDay};x(t);s=e._end!==null&&i.end===null;a=d(i.start,t.start);if(i.end){o=d(i.end,t.end);l=o.subtract(a)}else{l=null}te.each(i,function(e,t){if(b(e)){if(t!==undefined){r[e]=t}}});u=F(C(e._id),s,i.allDay,a,l,r);return{dateDelta:a,durationDelta:l,undo:u}}function F(e,r,s,a,o,l){var u=p.getIsAmbigTimezone();var d=[];if(a&&!a.valueOf()){a=null}if(o&&!o.valueOf()){o=null}te.each(e,function(e,t){var i;var n;i={start:t.start.clone(),end:t.end?t.end.clone():null,allDay:t.allDay};te.each(l,function(e){i[e]=t[e]});n={start:t._start,end:t._end,allDay:s};x(n);if(r){n.end=null}else if(o&&!n.end){n.end=p.getDefaultEventEnd(n.allDay,n.start)}if(a){n.start.add(a);if(n.end){n.end.add(a)}}if(o){n.end.add(o)}if(u&&!n.allDay&&(a||o)){n.start.stripZone();if(n.end){n.end.stripZone()}}te.extend(t,l,n);bt(t);d.push(function(){te.extend(t,i);bt(t)})});return function(){for(var e=0;e<d.length;e++){d[e]()}}}p.getBusinessHoursEvents=z;function z(e){var t=g.businessHours;var i={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var n=p.getView();var r;if(t){r=te.extend({},i,typeof t==="object"?t:{})}if(r){if(e){r.start=null;r.end=null}return k(H(r),n.start,n.end)}return[]}p.isEventSpanAllowed=M;p.isExternalSpanAllowed=N;p.isSelectionSpanAllowed=B;function M(e,t){var i=t.source||{};var n=K(t.constraint,i.constraint,g.eventConstraint);var r=K(t.overlap,i.overlap,g.eventOverlap);return L(e,n,r,t)}function N(e,t,i){var n;var r;if(i){n=te.extend({},i,t);r=k(H(n))[0]}if(r){return M(e,r)}else{return B(e)}}function B(e){return L(e,g.selectConstraint,g.selectOverlap)}function L(e,t,i,n){var r;var s;var a;var o,l;var u;if(t!=null){r=G(t);s=false;for(o=0;o<r.length;o++){if(P(r[o],e)){s=true;break}}if(!s){return false}}a=p.getPeerEvents(e,n);for(o=0;o<a.length;o++){l=a[o];if(V(l,e)){if(i===false){return false}else if(typeof i==="function"&&!i(l,n)){return false}if(n){u=K(l.overlap,(l.source||{}).overlap);if(u===false){return false}if(typeof u==="function"&&!u(n,l)){return false}}}}return true}function G(e){if(e==="businessHours"){return z()}if(typeof e==="object"){return k(H(e))}return C(e)}function P(e,t){var i=e.start.clone().stripZone();var n=p.getEventEnd(e).stripZone();return t.start>=i&&t.end<=n}function V(e,t){var i=e.start.clone().stripZone();var n=p.getEventEnd(e).stripZone();return t.start<n&&t.end>i}p.getEventCache=function(){return d}}ut.prototype.getPeerEvents=function(e,t){var i=this.getEventCache();var n=[];var r,s;for(r=0;r<i.length;r++){s=i[r];if(!t||t._id!==s._id){n.push(s)}}return n};function bt(e){e._allDay=e.allDay;e._start=e.start.clone();e._end=e.end?e.end.clone():null}var Et=ne.BasicView=lt.extend({dayGridClass:Je,dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid()},instantiateDayGrid:function(){var e=this.dayGridClass.extend(Dt);return new e(this)},setRange:function(e){lt.prototype.setRange.call(this,e);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(e)},computeRange:function(e){var t=lt.prototype.computeRange.call(this,e);if(/year|month/.test(t.intervalUnit)){t.start.startOf("week");t.start=this.skipHiddenDays(t.start);if(t.end.weekday()){t.end.add(1,"week").startOf("week");t.end=this.skipHiddenDays(t.end,-1,true)}}return t},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml());this.renderHead();this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml());this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates();this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="fc-head-container '+this.widgetHeaderClass+'"></td>'+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&typeof e!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=e(this.el.find(".fc-week-number"))}},setHeight:function(e,t){var i=this.opt("eventLimit");var n;l(this.scrollerEl);a(this.headRowEl);this.dayGrid.removeSegPopover();if(i&&typeof i==="number"){this.dayGrid.limitRows(i)}n=this.computeScrollerHeight(e);this.setGridHeight(n,t);if(i&&typeof i!=="number"){this.dayGrid.limitRows(i)}if(!t&&o(this.scrollerEl,n)){r(this.headRowEl,m(this.scrollerEl));n=this.computeScrollerHeight(e);this.scrollerEl.height(n)}},setGridHeight:function(e,t){if(t){n(this.dayGrid.rowEls)}else{i(this.dayGrid.rowEls,e,true)}},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(e,t){return this.dayGrid.queryHit(e,t)},getHitSpan:function(e){return this.dayGrid.getHitSpan(e)},getHitEl:function(e){return this.dayGrid.getHitEl(e)},renderEvents:function(e){this.dayGrid.renderEvents(e);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}});var Dt={renderHeadIntroHtml:function(){var e=this.view;if(e.weekNumbersVisible){return""+'<th class="fc-week-number '+e.widgetHeaderClass+'" '+e.weekNumberStyleAttr()+">"+"<span>"+J(e.opt("weekNumberTitle"))+"</span>"+"</th>"}return""},renderNumberIntroHtml:function(e){var t=this.view;if(t.weekNumbersVisible){return""+'<td class="fc-week-number" '+t.weekNumberStyleAttr()+">"+"<span>"+this.getCellDate(e,0).format("w")+"</span>"+"</td>"}return""},renderBgIntroHtml:function(){var e=this.view;if(e.weekNumbersVisible){return'<td class="fc-week-number '+e.widgetContentClass+'" '+e.weekNumberStyleAttr()+"></td>"}return""},renderIntroHtml:function(){var e=this.view;if(e.weekNumbersVisible){return'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"></td>"}return""}};var Ct=ne.MonthView=Et.extend({computeRange:function(e){var t=Et.prototype.computeRange.call(this,e);var i;if(this.isFixedWeeks()){i=Math.ceil(t.end.diff(t.start,"weeks",true));t.end.add(6-i,"weeks")}return t},setGridHeight:function(e,t){t=t||this.opt("weekMode")==="variable";if(t){e*=this.rowCnt/6}i(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");if(e){return e==="fixed"}return this.opt("fixedWeekCount")}});d.basic={class:Et};d.basicDay={type:"basic",duration:{days:1}};d.basicWeek={type:"basic",duration:{weeks:1}};d.month={class:Ct,duration:{months:1},defaults:{fixedWeekCount:true}};var Ht=ne.AgendaView=lt.extend({timeGridClass:it,timeGrid:null,dayGridClass:Je,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid();if(this.opt("allDaySlot")){this.dayGrid=this.instantiateDayGrid()}},instantiateTimeGrid:function(){var e=this.timeGridClass.extend(Tt);return new e(this)},instantiateDayGrid:function(){var e=this.dayGridClass.extend(xt);return new e(this)},setRange:function(e){lt.prototype.setRange.call(this,e);this.timeGrid.setRange(e);if(this.dayGrid){this.dayGrid.setRange(e)}},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml());this.renderHead();this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.setElement(this.el.find(".fc-time-grid"));this.timeGrid.renderDates();this.bottomRuleEl=te('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates();this.timeGrid.removeElement();if(this.dayGrid){this.dayGrid.unrenderDates();this.dayGrid.removeElement()}},renderSkeletonHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="fc-head-container '+this.widgetHeaderClass+'"></td>'+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/>'+'<hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours();if(this.dayGrid){this.dayGrid.renderBusinessHours()}},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours();if(this.dayGrid){this.dayGrid.unrenderBusinessHours()}},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(e){this.timeGrid.renderNowIndicator(e)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(e){this.timeGrid.updateSize(e);lt.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=e(this.el.find(".fc-axis"))},setHeight:function(e,t){var i;var n;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");l(this.scrollerEl);a(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.removeSegPopover();i=this.opt("eventLimit");if(i&&typeof i!=="number"){i=Rt}if(i){this.dayGrid.limitRows(i)}}if(!t){n=this.computeScrollerHeight(e);if(o(this.scrollerEl,n)){r(this.noScrollRowEls,m(this.scrollerEl));n=this.computeScrollerHeight(e);this.scrollerEl.height(n)}else{this.scrollerEl.height(n).css("overflow","hidden");this.bottomRuleEl.show()}}},computeInitialScroll:function(){var e=ie.duration(this.opt("scrollTime"));var t=this.timeGrid.computeTimeTop(e);t=Math.ceil(t);if(t){t++}return t},prepareHits:function(){this.timeGrid.prepareHits();if(this.dayGrid){this.dayGrid.prepareHits()}},releaseHits:function(){this.timeGrid.releaseHits();if(this.dayGrid){this.dayGrid.releaseHits()}},queryHit:function(e,t){var i=this.timeGrid.queryHit(e,t);if(!i&&this.dayGrid){i=this.dayGrid.queryHit(e,t)}return i},getHitSpan:function(e){return e.component.getHitSpan(e)},getHitEl:function(e){return e.component.getHitEl(e)},renderEvents:function(e){var t=[];var i=[];var n=[];var r;var s;for(s=0;s<e.length;s++){if(e[s].allDay){t.push(e[s])}else{i.push(e[s])}}r=this.timeGrid.renderEvents(i);if(this.dayGrid){n=this.dayGrid.renderEvents(t)}this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents();if(this.dayGrid){this.dayGrid.unrenderEvents()}},renderDrag:function(e,t){if(e.start.hasTime()){return this.timeGrid.renderDrag(e,t)}else if(this.dayGrid){return this.dayGrid.renderDrag(e,t)}},unrenderDrag:function(){this.timeGrid.unrenderDrag();if(this.dayGrid){this.dayGrid.unrenderDrag()}},renderSelection:function(e){if(e.start.hasTime()||e.end.hasTime()){this.timeGrid.renderSelection(e)}else if(this.dayGrid){this.dayGrid.renderSelection(e)}},unrenderSelection:function(){this.timeGrid.unrenderSelection();if(this.dayGrid){this.dayGrid.unrenderSelection()}}});var Tt={renderHeadIntroHtml:function(){var e=this.view;var t;if(e.opt("weekNumbers")){t=this.start.format(e.opt("smallWeekFormat"));return""+'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+">"+"<span>"+J(t)+"</span>"+"</th>"}else{return'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"></th>"}},renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"></td>"},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+"></td>"}};var xt={renderBgIntroHtml:function(){var e=this.view;return""+'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+"<span>"+(e.opt("allDayHtml")||J(e.opt("allDayText")))+"</span>"+"</td>"},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+"></td>"}};var Rt=5;var kt=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];d.agenda={class:Ht,defaults:{allDaySlot:true,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true}};d.agendaDay={type:"agenda",duration:{days:1}};d.agendaWeek={type:"agenda",duration:{weeks:1}};return ne});