ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(e,t,i){"use strict";var n=e("./lib/oop");var r=e("./lib/event_emitter").EventEmitter;var o=e("./lib/lang");var s=e("./range").Range;var a=e("./anchor").Anchor;var c=e("./keyboard/hash_handler").HashHandler;var l=e("./tokenizer").Tokenizer;var h=s.comparePoints;var p=function(){this.snippetMap={};this.snippetNameMap={}};(function(){n.implement(this,r);this.getTokenizer=function(){function e(e,t,i){e=e.substr(1);if(/^\d+$/.test(e)&&!i.inFormatString)return[{tabstopId:parseInt(e,10)}];return[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}p.$tokenizer=new l({start:[{regex:/:/,onMatch:function(e,t,i){if(i.length&&i[0].expectIf){i[0].expectIf=false;i[0].elseBranch=i[0];return[i[0]]}return":"}},{regex:/\\./,onMatch:function(e,t,i){var n=e[1];if(n=="}"&&i.length){e=n}else if("`$\\".indexOf(n)!=-1){e=n}else if(i.inFormatString){if(n=="n")e="\n";else if(n=="t")e="\n";else if("ulULE".indexOf(n)!=-1){e={changeCase:n,local:n>"a"}}}return[e]}},{regex:/}/,onMatch:function(e,t,i){return[i.length?i.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,i,n){var r=e(t.substr(1),i,n);n.unshift(r[0]);return r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:false}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,i){i[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+t("/")+"+)/(?:("+t("/")+"*)/)(\\w*):?",onMatch:function(e,t,i){var n=i[0];n.fmtString=e;e=this.splitRegex.exec(e);n.guard=e[1];n.fmt=e[2];n.flag=e[3];return""},next:"start"},{regex:"`"+t("`")+"*`",onMatch:function(e,t,i){i[0].code=e.splice(1,-1);return""},next:"start"},{regex:"\\?",onMatch:function(e,t,i){if(i[0])i[0].expectIf=true},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+t("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,i){i.inFormatString=true},next:"start"}]});p.prototype.getTokenizer=function(){return p.$tokenizer};return p.$tokenizer};this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})};this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var i=t.substr(1);return(this.variables[t[0]+"__"]||{})[i]}if(/^\d+$/.test(t)){return(this.variables.__||{})[t]}t=t.replace(/^TM_/,"");if(!e)return;var n=e.session;switch(t){case"CURRENT_WORD":var r=n.getWordRange();case"SELECTION":case"SELECTED_TEXT":return n.getTextRange(r);case"CURRENT_LINE":return n.getLine(e.getCursorPosition().row);case"PREV_LINE":return n.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return n.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return n.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}};this.variables={};this.getVariableValue=function(e,t){if(this.variables.hasOwnProperty(t))return this.variables[t](e,t)||"";return this.$getDefaultValue(e,t)||""};this.tmStrFormat=function(e,t,i){var n=t.flag||"";var r=t.guard;r=new RegExp(r,n.replace(/[^gi]/,""));var o=this.tokenizeTmSnippet(t.fmt,"formatString");var s=this;var a=e.replace(r,function(){s.variables.__=arguments;var e=s.resolveVariables(o,i);var t="E";for(var n=0;n<e.length;n++){var r=e[n];if(typeof r=="object"){e[n]="";if(r.changeCase&&r.local){var a=e[n+1];if(a&&typeof a=="string"){if(r.changeCase=="u")e[n]=a[0].toUpperCase();else e[n]=a[0].toLowerCase();e[n+1]=a.substr(1)}}else if(r.changeCase){t=r.changeCase}}else if(t=="U"){e[n]=r.toUpperCase()}else if(t=="L"){e[n]=r.toLowerCase()}}return e.join("")});this.variables.__=null;return a};this.resolveVariables=function(e,t){var i=[];for(var n=0;n<e.length;n++){var r=e[n];if(typeof r=="string"){i.push(r)}else if(typeof r!="object"){continue}else if(r.skip){s(r)}else if(r.processed<n){continue}else if(r.text){var o=this.getVariableValue(t,r.text);if(o&&r.fmtString)o=this.tmStrFormat(o,r);r.processed=n;if(r.expectIf==null){if(o){i.push(o);s(r)}}else{if(o){r.skip=r.elseBranch}else s(r)}}else if(r.tabstopId!=null){i.push(r)}else if(r.changeCase!=null){i.push(r)}}function s(t){var i=e.indexOf(t,n+1);if(i!=-1)n=i}return i};this.insertSnippetForSelection=function(e,t){var i=e.getCursorPosition();var n=e.session.getLine(i.row);var r=e.session.getTabString();var o=n.match(/^\s*/)[0];if(i.column<o.length)o=o.slice(0,i.column);var s=this.tokenizeTmSnippet(t);s=this.resolveVariables(s,e);s=s.map(function(e){if(e=="\n")return e+o;if(typeof e=="string")return e.replace(/\t/g,r);return e});var a=[];s.forEach(function(e,t){if(typeof e!="object")return;var i=e.tabstopId;var n=a[i];if(!n){n=a[i]=[];n.index=i;n.value=""}if(n.indexOf(e)!==-1)return;n.push(e);var r=s.indexOf(e,t+1);if(r===-1)return;var o=s.slice(t+1,r);var c=o.some(function(e){return typeof e==="object"});if(c&&!n.value){n.value=o}else if(o.length&&(!n.value||typeof n.value!=="string")){n.value=o.join("")}});a.forEach(function(e){e.length=0});var c={};function l(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(typeof n=="object"){if(c[n.tabstopId])continue;var r=e.lastIndexOf(n,i-1);n=t[r]||{tabstopId:n.tabstopId}}t[i]=n}return t}for(var h=0;h<s.length;h++){var p=s[h];if(typeof p!="object")continue;var f=p.tabstopId;var d=s.indexOf(p,h+1);if(c[f]){if(c[f]===p)c[f]=null;continue}var g=a[f];var v=typeof g.value=="string"?[g.value]:l(g.value);v.unshift(h+1,Math.max(0,d-h));v.push(p);c[f]=p;s.splice.apply(s,v);if(g.indexOf(p)===-1)g.push(p)}var m=0,b=0;var x="";s.forEach(function(e){if(typeof e==="string"){if(e[0]==="\n"){b=e.length-1;m++}else b+=e.length;x+=e}else{if(!e.start)e.start={row:m,column:b};else e.end={row:m,column:b}}});var w=e.getSelectionRange();var T=e.session.replace(w,x);var y=new u(e);var S=e.inVirtualSelectionMode&&e.selection.index;y.addTabstops(a,w.start,T,S)};this.insertSnippet=function(e,t){var i=this;if(e.inVirtualSelectionMode)return i.insertSnippetForSelection(e,t);e.forEachSelection(function(){i.insertSnippetForSelection(e,t)},null,{keepOrder:true});if(e.tabstopManager)e.tabstopManager.tabNext()};this.$getScope=function(e){var t=e.session.$mode.$id||"";t=t.split("/").pop();if(t==="html"||t==="php"){if(t==="php"&&!e.session.$mode.inlinePhp)t="html";var i=e.getCursorPosition();var n=e.session.getState(i.row);if(typeof n==="object"){n=n[0]}if(n.substring){if(n.substring(0,3)=="js-")t="javascript";else if(n.substring(0,4)=="css-")t="css";else if(n.substring(0,4)=="php-")t="php"}}return t};this.getActiveScopes=function(e){var t=this.$getScope(e);var i=[t];var n=this.snippetMap;if(n[t]&&n[t].includeScopes){i.push.apply(i,n[t].includeScopes)}i.push("_");return i};this.expandWithTab=function(e,t){var i=this;var n=e.forEachSelection(function(){return i.expandSnippetForSelection(e,t)},null,{keepOrder:true});if(n&&e.tabstopManager)e.tabstopManager.tabNext();return n};this.expandSnippetForSelection=function(e,t){var i=e.getCursorPosition();var n=e.session.getLine(i.row);var r=n.substring(0,i.column);var o=n.substr(i.column);var s=this.snippetMap;var a;this.getActiveScopes(e).some(function(e){var t=s[e];if(t)a=this.findMatchingSnippet(t,r,o);return!!a},this);if(!a)return false;if(t&&t.dryRun)return true;e.session.doc.removeInLine(i.row,i.column-a.replaceBefore.length,i.column+a.replaceAfter.length);this.variables.M__=a.matchBefore;this.variables.T__=a.matchAfter;this.insertSnippetForSelection(e,a.content);this.variables.M__=this.variables.T__=null;return true};this.findMatchingSnippet=function(e,t,i){for(var n=e.length;n--;){var r=e[n];if(r.startRe&&!r.startRe.test(t))continue;if(r.endRe&&!r.endRe.test(i))continue;if(!r.startRe&&!r.endRe)continue;r.matchBefore=r.startRe?r.startRe.exec(t):[""];r.matchAfter=r.endRe?r.endRe.exec(i):[""];r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:"";r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(i)[0]:"";return r}};this.snippetMap={};this.snippetNameMap={};this.register=function(e,t){var i=this.snippetMap;var n=this.snippetNameMap;var r=this;if(!e)e=[];function s(e){if(e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e))e="(?:"+e+")";return e||""}function a(e,t,i){e=s(e);t=s(t);if(i){e=t+e;if(e&&e[e.length-1]!="$")e=e+"$"}else{e=e+t;if(e&&e[0]!="^")e="^"+e}return new RegExp(e)}function c(e){if(!e.scope)e.scope=t||"_";t=e.scope;if(!i[t]){i[t]=[];n[t]={}}var s=n[t];if(e.name){var c=s[e.name];if(c)r.unregister(c);s[e.name]=e}i[t].push(e);if(e.tabTrigger&&!e.trigger){if(!e.guard&&/^\w/.test(e.tabTrigger))e.guard="\\b";e.trigger=o.escapeRegExp(e.tabTrigger)}e.startRe=a(e.trigger,e.guard,true);e.triggerRe=new RegExp(e.trigger,"",true);e.endRe=a(e.endTrigger,e.endGuard,true);e.endTriggerRe=new RegExp(e.endTrigger,"",true)}if(e&&e.content)c(e);else if(Array.isArray(e))e.forEach(c);this._signal("registerSnippets",{scope:t})};this.unregister=function(e,t){var i=this.snippetMap;var n=this.snippetNameMap;function r(e){var r=n[e.scope||t];if(r&&r[e.name]){delete r[e.name];var o=i[e.scope||t];var s=o&&o.indexOf(e);if(s>=0)o.splice(s,1)}}if(e.content)r(e);else if(Array.isArray(e))e.forEach(r)};this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");var t=[],i={};var n=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;var r;while(r=n.exec(e)){if(r[1]){try{i=JSON.parse(r[1]);t.push(i)}catch(e){}}if(r[4]){i.content=r[4].replace(/^\t/gm,"");t.push(i);i={}}else{var o=r[2],s=r[3];if(o=="regex"){var a=/\/((?:[^\/\\]|\\.)*)|$/g;i.guard=a.exec(s)[1];i.trigger=a.exec(s)[1];i.endTrigger=a.exec(s)[1];i.endGuard=a.exec(s)[1]}else if(o=="snippet"){i.tabTrigger=s.match(/^\S*/)[0];if(!i.name)i.name=s}else{i[o]=s}}}return t};this.getSnippetByName=function(e,t){var i=this.snippetNameMap;var n;this.getActiveScopes(t).some(function(t){var r=i[t];if(r)n=r[e];return!!n},this);return n}}).call(p.prototype);var u=function(e){if(e.tabstopManager)return e.tabstopManager;e.tabstopManager=this;this.$onChange=this.onChange.bind(this);this.$onChangeSelection=o.delayedCall(this.onChangeSelection.bind(this)).schedule;this.$onChangeSession=this.onChangeSession.bind(this);this.$onAfterExec=this.onAfterExec.bind(this);this.attach(e)};(function(){this.attach=function(e){this.index=0;this.ranges=[];this.tabstops=[];this.$openTabstops=null;this.selectedTabstop=null;this.editor=e;this.editor.on("change",this.$onChange);this.editor.on("changeSelection",this.$onChangeSelection);this.editor.on("changeSession",this.$onChangeSession);this.editor.commands.on("afterExec",this.$onAfterExec);this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)};this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this);this.ranges=null;this.tabstops=null;this.selectedTabstop=null;this.editor.removeListener("change",this.$onChange);this.editor.removeListener("changeSelection",this.$onChangeSelection);this.editor.removeListener("changeSession",this.$onChangeSession);this.editor.commands.removeListener("afterExec",this.$onAfterExec);this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);this.editor.tabstopManager=null;this.editor=null};this.onChange=function(e){var t=e;var i=e.action[0]=="r";var n=e.start;var r=e.end;var o=n.row;var s=r.row;var a=s-o;var c=r.column-n.column;if(i){a=-a;c=-c}if(!this.$inChange&&i){var l=this.selectedTabstop;var p=l&&!l.some(function(e){return h(e.start,n)<=0&&h(e.end,r)>=0});if(p)return this.detach()}var u=this.ranges;for(var f=0;f<u.length;f++){var d=u[f];if(d.end.row<n.row)continue;if(i&&h(n,d.start)<0&&h(r,d.end)>0){this.removeRange(d);f--;continue}if(d.start.row==o&&d.start.column>n.column)d.start.column+=c;if(d.end.row==o&&d.end.column>=n.column)d.end.column+=c;if(d.start.row>=o)d.start.row+=a;if(d.end.row>=o)d.end.row+=a;if(h(d.start,d.end)>0)this.removeRange(d)}if(!u.length)this.detach()};this.updateLinkedFields=function(){var e=this.selectedTabstop;if(!e||!e.hasLinkedRanges)return;this.$inChange=true;var i=this.editor.session;var n=i.getTextRange(e.firstNonLinked);for(var r=e.length;r--;){var o=e[r];if(!o.linked)continue;var s=t.snippetManager.tmStrFormat(n,o.original);i.replace(o,s)}this.$inChange=false};this.onAfterExec=function(e){if(e.command&&!e.command.readOnly)this.updateLinkedFields()};this.onChangeSelection=function(){if(!this.editor)return;var e=this.editor.selection.lead;var t=this.editor.selection.anchor;var i=this.editor.selection.isEmpty();for(var n=this.ranges.length;n--;){if(this.ranges[n].linked)continue;var r=this.ranges[n].contains(e.row,e.column);var o=i||this.ranges[n].contains(t.row,t.column);if(r&&o)return}this.detach()};this.onChangeSession=function(){this.detach()};this.tabNext=function(e){var t=this.tabstops.length;var i=this.index+(e||1);i=Math.min(Math.max(i,1),t);if(i==t)i=0;this.selectTabstop(i);if(i===0)this.detach()};this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t)this.addTabstopMarkers(t);this.index=e;t=this.tabstops[this.index];if(!t||!t.length)return;this.selectedTabstop=t;if(!this.editor.inVirtualSelectionMode){var i=this.editor.multiSelect;i.toSingleRange(t.firstNonLinked.clone());for(var n=t.length;n--;){if(t.hasLinkedRanges&&t[n].linked)continue;i.addRange(t[n].clone(),true)}if(i.ranges[0])i.addRange(i.ranges[0].clone())}else{this.editor.selection.setRange(t.firstNonLinked)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)};this.addTabstops=function(e,t,i){if(!this.$openTabstops)this.$openTabstops=[];if(!e[0]){var n=s.fromPoints(i,i);g(n.start,t);g(n.end,t);e[0]=[n];e[0].index=0}var r=this.index;var o=[r+1,0];var a=this.ranges;e.forEach(function(e,i){var n=this.$openTabstops[i]||e;for(var r=e.length;r--;){var c=e[r];var l=s.fromPoints(c.start,c.end||c.start);d(l.start,t);d(l.end,t);l.original=c;l.tabstop=n;a.push(l);if(n!=e)n.unshift(l);else n[r]=l;if(c.fmtString){l.linked=true;n.hasLinkedRanges=true}else if(!n.firstNonLinked)n.firstNonLinked=l}if(!n.firstNonLinked)n.hasLinkedRanges=false;if(n===e){o.push(n);this.$openTabstops[i]=n}this.addTabstopMarkers(n)},this);if(o.length>2){if(this.tabstops.length)o.push(o.splice(2,1)[0]);this.tabstops.splice.apply(this.tabstops,o)}};this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){if(!e.markerId)e.markerId=t.addMarker(e,"ace_snippet-marker","text")})};this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId);e.markerId=null})};this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1);t=this.ranges.indexOf(e);this.ranges.splice(t,1);this.editor.session.removeMarker(e.markerId);if(!e.tabstop.length){t=this.tabstops.indexOf(e.tabstop);if(t!=-1)this.tabstops.splice(t,1);if(!this.tabstops.length)this.detach()}};this.keyboardHandler=new c;this.keyboardHandler.bindKeys({Tab:function(e){if(t.snippetManager&&t.snippetManager.expandWithTab(e)){return}e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(e){return false}})}).call(u.prototype);var f={};f.onChange=a.prototype.onChange;f.setPosition=function(e,t){this.pos.row=e;this.pos.column=t};f.update=function(e,t,i){this.$insertRight=i;this.pos=e;this.onChange(t)};var d=function(e,t){if(e.row==0)e.column+=t.column;e.row+=t.row};var g=function(e,t){if(e.row==t.row)e.column-=t.column;e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}");t.snippetManager=new p;var v=e("./editor").Editor;(function(){this.insertSnippet=function(e,i){return t.snippetManager.insertSnippet(this,e,i)};this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(v.prototype)});ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,i){"use strict";var n=e("../virtual_renderer").VirtualRenderer;var r=e("../editor").Editor;var o=e("../range").Range;var s=e("../lib/event");var a=e("../lib/lang");var c=e("../lib/dom");var l=function(e){var t=new n(e);t.$maxLines=4;var i=new r(t);i.setHighlightActiveLine(false);i.setShowPrintMargin(false);i.renderer.setShowGutter(false);i.renderer.setHighlightGutterLine(false);i.$mouseHandler.$focusWaitTimout=0;i.$highlightTagPending=true;return i};var h=function(e){var t=c.createElement("div");var i=new l(t);if(e)e.appendChild(t);t.style.display="none";i.renderer.content.style.cursor="default";i.renderer.setStyle("ace_autocomplete");i.setOption("displayIndentGuides",false);i.setOption("dragDelay",150);var n=function(){};i.focus=n;i.$isFocused=true;i.renderer.$cursorLayer.restartTimer=n;i.renderer.$cursorLayer.element.style.opacity=0;i.renderer.$maxLines=8;i.renderer.$keepTextAreaAtCursor=false;i.setHighlightActiveLine(false);i.session.highlight("");i.session.$searchHighlight.clazz="ace_highlight-marker";i.on("mousedown",function(e){var t=e.getDocumentPosition();i.selection.moveToPosition(t);p.start.row=p.end.row=t.row;e.stop()});var r;var h=new o(-1,0,-1,Infinity);var p=new o(-1,0,-1,Infinity);p.id=i.session.addMarker(p,"ace_active-line","fullLine");i.setSelectOnHover=function(e){if(!e){h.id=i.session.addMarker(h,"ace_line-hover","fullLine")}else if(h.id){i.session.removeMarker(h.id);h.id=null}};i.setSelectOnHover(false);i.on("mousemove",function(e){if(!r){r=e;return}if(r.x==e.x&&r.y==e.y){return}r=e;r.scrollTop=i.renderer.scrollTop;var t=r.getDocumentPosition().row;if(h.start.row!=t){if(!h.id)i.setRow(t);f(t)}});i.renderer.on("beforeRender",function(){if(r&&h.start.row!=-1){r.$pos=null;var e=r.getDocumentPosition().row;if(!h.id)i.setRow(e);f(e,true)}});i.renderer.on("afterRender",function(){var e=i.getRow();var t=i.renderer.$textLayer;var n=t.element.childNodes[e-t.config.firstRow];if(n==t.selectedNode)return;if(t.selectedNode)c.removeCssClass(t.selectedNode,"ace_selected");t.selectedNode=n;if(n)c.addCssClass(n,"ace_selected")});var u=function(){f(-1)};var f=function(e,t){if(e!==h.start.row){h.start.row=h.end.row=e;if(!t)i.session._emit("changeBackMarker");i._emit("changeHoverMarker")}};i.getHoveredRow=function(){return h.start.row};s.addListener(i.container,"mouseout",u);i.on("hide",u);i.on("changeSelection",u);i.session.doc.getLength=function(){return i.data.length};i.session.doc.getLine=function(e){var t=i.data[e];if(typeof t=="string")return t;return t&&t.value||""};var d=i.session.bgTokenizer;d.$tokenizeRow=function(e){var t=i.data[e];var n=[];if(!t)return n;if(typeof t=="string")t={value:t};if(!t.caption)t.caption=t.value||t.name;var r=-1;var o,s;for(var a=0;a<t.caption.length;a++){s=t.caption[a];o=t.matchMask&1<<a?1:0;if(r!==o){n.push({type:t.className||""+(o?"completion-highlight":""),value:s});r=o}else{n[n.length-1].value+=s}}if(t.meta){var c=i.renderer.$size.scrollerWidth/i.renderer.layerConfig.characterWidth;var l=t.meta;if(l.length+t.caption.length>c-2){l=l.substr(0,c-t.caption.length-3)+"…"}n.push({type:"rightAlignedText",value:l})}return n};d.$updateOnChange=n;d.start=n;i.session.$computeWidth=function(){return this.screenWidth=0};i.$blockScrolling=Infinity;i.isOpen=false;i.isTopdown=false;i.data=[];i.setData=function(e){i.setValue(a.stringRepeat("\n",e.length),-1);i.data=e||[];i.setRow(0)};i.getData=function(e){return i.data[e]};i.getRow=function(){return p.start.row};i.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e));if(p.start.row!=e){i.selection.clearSelection();p.start.row=p.end.row=e||0;i.session._emit("changeBackMarker");i.moveCursorTo(e||0,0);if(i.isOpen)i._signal("select")}};i.on("changeSelection",function(){if(i.isOpen)i.setRow(i.selection.lead.row);i.renderer.scrollCursorIntoView()});i.hide=function(){this.container.style.display="none";this._signal("hide");i.isOpen=false};i.show=function(e,t,n){var o=this.container;var s=window.innerHeight;var a=window.innerWidth;var c=this.renderer;var l=c.$maxLines*t*1.4;var h=e.top+this.$borderSize;if(h+l>s-t&&!n){o.style.top="";o.style.bottom=s-h+"px";i.isTopdown=false}else{h+=t;o.style.top=h+"px";o.style.bottom="";i.isTopdown=true}o.style.display="";this.renderer.$textLayer.checkForSizeChanges();var p=e.left;if(p+o.offsetWidth>a)p=a-o.offsetWidth;o.style.left=p+"px";this._signal("show");r=null;i.isOpen=true};i.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize};i.$imageSize=0;i.$borderSize=1;return i};c.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}");t.AcePopup=h});ace.define("ace/autocomplete/util",["require","exports","module"],function(e,t,i){"use strict";t.parForEach=function(e,t,i){var n=0;var r=e.length;if(r===0)i();for(var o=0;o<r;o++){t(e[o],function(e,t){n++;if(n===r)i(e,t)})}};var n=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,i){i=i||n;var r=[];for(var o=t-1;o>=0;o--){if(i.test(e[o]))r.push(e[o]);else break}return r.reverse().join("")};t.retrieveFollowingIdentifier=function(e,t,i){i=i||n;var r=[];for(var o=t;o<e.length;o++){if(i.test(e[o]))r.push(e[o]);else break}return r}});ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(e,t,i){"use strict";var n=e("./keyboard/hash_handler").HashHandler;var r=e("./autocomplete/popup").AcePopup;var o=e("./autocomplete/util");var s=e("./lib/event");var a=e("./lib/lang");var c=e("./lib/dom");var l=e("./snippets").snippetManager;var h=function(){this.autoInsert=false;this.autoSelect=true;this.exactMatch=false;this.gatherCompletionsId=0;this.keyboardHandler=new n;this.keyboardHandler.bindKeys(this.commands);this.blurListener=this.blurListener.bind(this);this.changeListener=this.changeListener.bind(this);this.mousedownListener=this.mousedownListener.bind(this);this.mousewheelListener=this.mousewheelListener.bind(this);this.changeTimer=a.delayedCall(function(){this.updateCompletions(true)}.bind(this));this.tooltipTimer=a.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){this.popup=new r(document.body||document.documentElement);this.popup.on("click",function(e){this.insertMatch();e.stop()}.bind(this));this.popup.focus=this.editor.focus.bind(this.editor);this.popup.on("show",this.tooltipTimer.bind(null,null));this.popup.on("select",this.tooltipTimer.bind(null,null));this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null));return this.popup};this.getPopup=function(){return this.popup||this.$init()};this.openPopup=function(e,t,i){if(!this.popup)this.$init();this.popup.setData(this.completions.filtered);e.keyBinding.addKeyboardHandler(this.keyboardHandler);var n=e.renderer;this.popup.setRow(this.autoSelect?0:-1);if(!i){this.popup.setTheme(e.getTheme());this.popup.setFontSize(e.getFontSize());var r=n.layerConfig.lineHeight;var o=n.$cursorLayer.getPixelPosition(this.base,true);o.left-=this.popup.getTextLeftOffset();var s=e.container.getBoundingClientRect();o.top+=s.top-n.layerConfig.offset;o.left+=s.left-e.renderer.scrollLeft;o.left+=n.gutterWidth;this.popup.show(o,r)}else if(i&&!t){this.detach()}};this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);this.editor.off("changeSelection",this.changeListener);this.editor.off("blur",this.blurListener);this.editor.off("mousedown",this.mousedownListener);this.editor.off("mousewheel",this.mousewheelListener);this.changeTimer.cancel();this.hideDocTooltip();this.gatherCompletionsId+=1;if(this.popup&&this.popup.isOpen)this.popup.hide();if(this.base)this.base.detach();this.activated=false;this.completions=this.base=null};this.changeListener=function(e){var t=this.editor.selection.lead;if(t.row!=this.base.row||t.column<this.base.column){this.detach()}if(this.activated)this.changeTimer.schedule();else this.detach()};this.blurListener=function(e){var t=document.activeElement;var i=this.editor.textInput.getElement();var n=e.relatedTarget&&e.relatedTarget==this.tooltipNode;var r=this.popup&&this.popup.container;if(t!=i&&t.parentNode!=r&&!n&&t!=this.tooltipNode&&e.relatedTarget!=i){this.detach()}};this.mousedownListener=function(e){this.detach()};this.mousewheelListener=function(e){this.detach()};this.goTo=function(e){var t=this.popup.getRow();var i=this.popup.session.getLength()-1;switch(e){case"up":t=t<=0?i:t-1;break;case"down":t=t>=i?-1:t+1;break;case"start":t=0;break;case"end":t=i;break}this.popup.setRow(t)};this.insertMatch=function(e,t){if(!e)e=this.popup.getData(this.popup.getRow());if(!e)return false;if(e.completer&&e.completer.insertMatch){e.completer.insertMatch(this.editor,e)}else{if(this.completions.filterText){var i=this.editor.selection.getAllRanges();for(var n=0,r;r=i[n];n++){r.start.column-=this.completions.filterText.length;this.editor.session.remove(r)}}if(e.snippet)l.insertSnippet(this.editor,e.snippet);else this.editor.execCommand("insertstring",e.value||e)}this.detach()};this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:true})},Tab:function(e){var t=e.completer.insertMatch();if(!t&&!e.tabstopManager)e.completer.goTo("down");else return t},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}};this.gatherCompletions=function(e,t){var i=e.getSession();var n=e.getCursorPosition();var r=i.getLine(n.row);var s=o.retrievePrecedingIdentifier(r,n.column);this.base=i.doc.createAnchor(n.row,n.column-s.length);this.base.$insertRight=true;var a=[];var c=e.completers.length;e.completers.forEach(function(r,l){r.getCompletions(e,i,n,s,function(n,r){if(!n)a=a.concat(r);var s=e.getCursorPosition();var l=i.getLine(s.row);t(null,{prefix:o.retrievePrecedingIdentifier(l,s.column,r[0]&&r[0].identifierRegex),matches:a,finished:--c===0})})});return true};this.showPopup=function(e){if(this.editor)this.detach();this.activated=true;this.editor=e;if(e.completer!=this){if(e.completer)e.completer.detach();e.completer=this}e.on("changeSelection",this.changeListener);e.on("blur",this.blurListener);e.on("mousedown",this.mousedownListener);e.on("mousewheel",this.mousewheelListener);this.updateCompletions()};this.updateCompletions=function(e){if(e&&this.base&&this.completions){var t=this.editor.getCursorPosition();var i=this.editor.session.getTextRange({start:this.base,end:t});if(i==this.completions.filterText)return;this.completions.setFilter(i);if(!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==i&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,i,e);return}var n=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(t,i){var r=function(){if(!i.finished)return;return this.detach()}.bind(this);var o=i.prefix;var s=i&&i.matches;if(!s||!s.length)return r();if(o.indexOf(i.prefix)!==0||n!=this.gatherCompletionsId)return;this.completions=new p(s);if(this.exactMatch)this.completions.exactMatch=true;this.completions.setFilter(o);var a=this.completions.filtered;if(!a.length)return r();if(a.length==1&&a[0].value==o&&!a[0].snippet)return r();if(this.autoInsert&&a.length==1&&i.finished)return this.insertMatch(a[0]);this.openPopup(this.editor,o,e)}.bind(this))};this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()};this.updateDocTooltip=function(){var e=this.popup;var t=e.data;var i=t&&(t[e.getHoveredRow()]||t[e.getRow()]);var n=null;if(!i||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();this.editor.completers.some(function(e){if(e.getDocTooltip)n=e.getDocTooltip(i);return n});if(!n)n=i;if(typeof n=="string")n={docText:n};if(!n||!(n.docHTML||n.docText))return this.hideDocTooltip();this.showDocTooltip(n)};this.showDocTooltip=function(e){if(!this.tooltipNode){this.tooltipNode=c.createElement("div");this.tooltipNode.className="ace_tooltip ace_doc-tooltip";this.tooltipNode.style.margin=0;this.tooltipNode.style.pointerEvents="auto";this.tooltipNode.tabIndex=-1;this.tooltipNode.onblur=this.blurListener.bind(this)}var t=this.tooltipNode;if(e.docHTML){t.innerHTML=e.docHTML}else if(e.docText){t.textContent=e.docText}if(!t.parentNode)document.body.appendChild(t);var i=this.popup;var n=i.container.getBoundingClientRect();t.style.top=i.container.style.top;t.style.bottom=i.container.style.bottom;if(window.innerWidth-n.right<320){t.style.right=window.innerWidth-n.left+"px";t.style.left=""}else{t.style.left=n.right+1+"px";t.style.right=""}t.style.display="block"};this.hideDocTooltip=function(){this.tooltipTimer.cancel();if(!this.tooltipNode)return;var e=this.tooltipNode;if(!this.editor.isFocused()&&document.activeElement==e)this.editor.focus();this.tooltipNode=null;if(e.parentNode)e.parentNode.removeChild(e)}}).call(h.prototype);h.startCommand={name:"startAutocomplete",exec:function(e){if(!e.completer)e.completer=new h;e.completer.autoInsert=false;e.completer.autoSelect=true;e.completer.showPopup(e);e.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var p=function(e,t){this.all=e;this.filtered=e;this.filterText=t||"";this.exactMatch=false};(function(){this.setFilter=function(e){if(e.length>this.filterText&&e.lastIndexOf(this.filterText,0)===0)var t=this.filtered;else var t=this.all;this.filterText=e;t=this.filterCompletions(t,this.filterText);t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var i=null;t=t.filter(function(e){var t=e.snippet||e.caption||e.value;if(t===i)return false;i=t;return true});this.filtered=t};this.filterCompletions=function(e,t){var i=[];var n=t.toUpperCase();var r=t.toLowerCase();e:for(var o=0,s;s=e[o];o++){var a=s.value||s.caption||s.snippet;if(!a)continue;var c=-1;var l=0;var h=0;var p,u;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else{for(var f=0;f<t.length;f++){var d=a.indexOf(r[f],c+1);var g=a.indexOf(n[f],c+1);p=d>=0?g<0||d<g?d:g:g;if(p<0)continue e;u=p-c-1;if(u>0){if(c===-1)h+=10;h+=u}l=l|1<<p;c=p}}s.matchMask=l;s.exactMatch=h?0:1;s.score=(s.score||0)-h;i.push(s)}return i}}).call(p.prototype);t.Autocomplete=h;t.FilteredList=p});ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,i){var n=e("../range").Range;var r=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function o(e,t){var i=e.getTextRange(n.fromPoints({row:0,column:0},t));return i.split(r).length-1}function s(e,t){var i=o(e,t);var n=e.getValue().split(r);var s=Object.create(null);var a=n[i];n.forEach(function(e,t){if(!e||e===a)return;var r=Math.abs(i-t);var o=n.length-r;if(s[e]){s[e]=Math.max(o,s[e])}else{s[e]=o}});return s}t.getCompletions=function(e,t,i,n,r){var o=s(t,i,n);var a=Object.keys(o);r(null,a.map(function(e){
return{caption:e,value:e,score:o[e],meta:"local"}}))}});ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,i){"use strict";var n=e("../snippets").snippetManager;var r=e("../autocomplete").Autocomplete;var o=e("../config");var s=e("../lib/lang");var a=e("../autocomplete/util");var c=e("../autocomplete/text_completer");var l={getCompletions:function(e,t,i,n,r){if(t.$mode.completer){return t.$mode.completer.getCompletions(e,t,i,n,r)}var o=e.session.getState(i.row);var s=t.$mode.getCompletions(o,t,i,n);r(null,s)}};var h={getCompletions:function(e,t,i,r,o){var s=n.snippetMap;var a=[];n.getActiveScopes(e).forEach(function(e){var t=s[e]||[];for(var i=t.length;i--;){var n=t[i];var r=n.name||n.tabTrigger;if(!r)continue;a.push({caption:r,snippet:n.content,meta:n.tabTrigger&&!n.name?n.tabTrigger+"⇥ ":"snippet",type:"snippet"})}},this);o(null,a)},getDocTooltip:function(e){if(e.type=="snippet"&&!e.docHTML){e.docHTML=["<b>",s.escapeHTML(e.caption),"</b>","<hr></hr>",s.escapeHTML(e.snippet)].join("")}}};var p=[h,c,l];t.setCompleters=function(e){p=e||[]};t.addCompleter=function(e){p.push(e)};t.textCompleter=c;t.keyWordCompleter=l;t.snippetCompleter=h;var u={name:"expandSnippet",exec:function(e){return n.expandWithTab(e)},bindKey:"Tab"};var f=function(e,t){d(t.session.$mode)};var d=function(e){var t=e.$id;if(!n.files)n.files={};g(t);if(e.modes)e.modes.forEach(d)};var g=function(e){if(!e||n.files[e])return;var t=e.replace("mode","snippets");n.files[e]={};o.loadModule(t,function(t){if(t){n.files[e]=t;if(!t.snippets&&t.snippetText)t.snippets=n.parseSnippetFile(t.snippetText);n.register(t.snippets||[],t.scope);if(t.includeScopes){n.snippetMap[t.scope].includeScopes=t.includeScopes;t.includeScopes.forEach(function(e){g("ace/mode/"+e)})}}})};function v(e){var t=e.getCursorPosition();var i=e.session.getLine(t.row);var n;e.completers.forEach(function(e){if(e.identifierRegexps){e.identifierRegexps.forEach(function(e){if(!n&&e)n=a.retrievePrecedingIdentifier(i,t.column,e)})}});return n||a.retrievePrecedingIdentifier(i,t.column)}var m=function(e){var t=e.editor;var i=t.completer&&t.completer.activated;if(e.command.name==="backspace"){if(i&&!v(t))t.completer.detach()}else if(e.command.name==="insertstring"){var n=v(t);if(n&&!i){if(!t.completer){t.completer=new r}t.completer.autoInsert=false;t.completer.showPopup(t)}}};var b=e("../editor").Editor;e("../config").defineOptions(b.prototype,"editor",{enableBasicAutocompletion:{set:function(e){if(e){if(!this.completers)this.completers=Array.isArray(e)?e:p;this.commands.addCommand(r.startCommand)}else{this.commands.removeCommand(r.startCommand)}},value:false},enableLiveAutocompletion:{set:function(e){if(e){if(!this.completers)this.completers=Array.isArray(e)?e:p;this.commands.on("afterExec",m)}else{this.commands.removeListener("afterExec",m)}},value:false},enableSnippets:{set:function(e){if(e){this.commands.addCommand(u);this.on("changeMode",f);f(null,this)}else{this.commands.removeCommand(u);this.off("changeMode",f)}},value:false}})});(function(){ace.require(["ace/ext/language_tools"],function(){})})();