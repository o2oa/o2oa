(function(t){if(typeof exports=="object"&&typeof module=="object")t(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],t);else t(CodeMirror)})(function(t){"use strict";t.defineMode("stex",function(){"use strict";function t(t,e){t.cmdState.push(e)}function e(t){if(t.cmdState.length>0){return t.cmdState[t.cmdState.length-1]}else{return null}}function n(t){var e=t.cmdState.pop();if(e){e.closeBracket()}}function r(t){var e=t.cmdState;for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.name=="DEFAULT"){continue}return r}return{styleIdentifier:function(){return null}}}function i(t,e,n){return function(){this.name=t;this.bracketNo=0;this.style=e;this.styles=n;this.argument=null;this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null};this.openBracket=function(){this.bracketNo++;return"bracket"};this.closeBracket=function(){}}}var a={};a["importmodule"]=i("importmodule","tag",["string","builtin"]);a["documentclass"]=i("documentclass","tag",["","atom"]);a["usepackage"]=i("usepackage","tag",["atom"]);a["begin"]=i("begin","tag",["atom"]);a["end"]=i("end","tag",["atom"]);a["DEFAULT"]=function(){this.name="DEFAULT";this.style="tag";this.styleIdentifier=this.openBracket=this.closeBracket=function(){}};function u(t,e){t.f=e}function c(n,i){var c;if(n.match(/^\\[a-zA-Z@]+/)){var s=n.current().slice(1);c=a[s]||a["DEFAULT"];c=new c;t(i,c);u(i,f);return c.style}if(n.match(/^\\[$&%#{}_]/)){return"tag"}if(n.match(/^\\[,;!\/\\]/)){return"tag"}if(n.match("\\[")){u(i,function(t,e){return o(t,e,"\\]")});return"keyword"}if(n.match("$$")){u(i,function(t,e){return o(t,e,"$$")});return"keyword"}if(n.match("$")){u(i,function(t,e){return o(t,e,"$")});return"keyword"}var l=n.next();if(l=="%"){n.skipToEnd();return"comment"}else if(l=="}"||l=="]"){c=e(i);if(c){c.closeBracket(l);u(i,f)}else{return"error"}return"bracket"}else if(l=="{"||l=="["){c=a["DEFAULT"];c=new c;t(i,c);return"bracket"}else if(/\d/.test(l)){n.eatWhile(/[\w.%]/);return"atom"}else{n.eatWhile(/[\w\-_]/);c=r(i);if(c.name=="begin"){c.argument=n.current()}return c.styleIdentifier()}}function o(t,e,n){if(t.eatSpace()){return null}if(t.match(n)){u(e,c);return"keyword"}if(t.match(/^\\[a-zA-Z@]+/)){return"tag"}if(t.match(/^[a-zA-Z]+/)){return"variable-2"}if(t.match(/^\\[$&%#{}_]/)){return"tag"}if(t.match(/^\\[,;!\/]/)){return"tag"}if(t.match(/^[\^_&]/)){return"tag"}if(t.match(/^[+\-<>|=,\/@!*:;'"`~#?]/)){return null}if(t.match(/^(\d+\.\d*|\d*\.\d+|\d+)/)){return"number"}var r=t.next();if(r=="{"||r=="}"||r=="["||r=="]"||r=="("||r==")"){return"bracket"}if(r=="%"){t.skipToEnd();return"comment"}return"error"}function f(t,r){var i=t.peek(),a;if(i=="{"||i=="["){a=e(r);a.openBracket(i);t.eat(i);u(r,c);return"bracket"}if(/[ \t\r]/.test(i)){t.eat(i);return null}u(r,c);n(r);return c(t,r)}return{startState:function(){return{cmdState:[],f:c}},copyState:function(t){return{cmdState:t.cmdState.slice(),f:t.f}},token:function(t,e){return e.f(t,e)},blankLine:function(t){t.f=c},lineComment:"%"}});t.defineMIME("text/x-stex","stex");t.defineMIME("text/x-latex","stex")});