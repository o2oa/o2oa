(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("dtd",function(e){var t=e.indentUnit,n;function r(e,t){n=t;return e}function i(e,t){var n=e.next();if(n=="<"&&e.eat("!")){if(e.eatWhile(/[\-]/)){t.tokenize=l;return l(e,t)}else if(e.eatWhile(/[\w]/))return r("keyword","doindent")}else if(n=="<"&&e.eat("?")){t.tokenize=u("meta","?>");return r("meta",n)}else if(n=="#"&&e.eatWhile(/[\w]/))return r("atom","tag");else if(n=="|")return r("keyword","seperator");else if(n.match(/[\(\)\[\]\-\.,\+\?>]/))return r(null,n);else if(n.match(/[\[\]]/))return r("rule",n);else if(n=='"'||n=="'"){t.tokenize=s(n);return t.tokenize(e,t)}else if(e.eatWhile(/[a-zA-Z\?\+\d]/)){var i=e.current();if(i.substr(i.length-1,i.length).match(/\?|\+/)!==null)e.backUp(1);return r("tag","tag")}else if(n=="%"||n=="*")return r("number","number");else{e.eatWhile(/[\w\\\-_%.{,]/);return r(null,null)}}function l(e,t){var n=0,l;while((l=e.next())!=null){if(n>=2&&l==">"){t.tokenize=i;break}n=l=="-"?n+1:0}return r("comment","comment")}function s(e){return function(t,n){var l=false,s;while((s=t.next())!=null){if(s==e&&!l){n.tokenize=i;break}l=!l&&s=="\\"}return r("string","tag")}}function u(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=i;break}n.next()}return e}}return{startState:function(e){return{tokenize:i,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var r=t.tokenize(e,t);var i=t.stack[t.stack.length-1];if(e.current()=="["||n==="doindent"||n=="[")t.stack.push("rule");else if(n==="endtag")t.stack[t.stack.length-1]="endtag";else if(e.current()=="]"||n=="]"||n==">"&&i=="rule")t.stack.pop();else if(n=="[")t.stack.push("[");return r},indent:function(e,r){var i=e.stack.length;if(r.match(/\]\s+|\]/))i=i-1;else if(r.substr(r.length-1,r.length)===">"){if(r.substr(0,1)==="<")i;else if(n=="doindent"&&r.length>1)i;else if(n=="doindent")i--;else if(n==">"&&r.length>1)i;else if(n=="tag"&&r!==">")i;else if(n=="tag"&&e.stack[e.stack.length-1]=="rule")i--;else if(n=="tag")i++;else if(r===">"&&e.stack[e.stack.length-1]=="rule"&&n===">")i--;else if(r===">"&&e.stack[e.stack.length-1]=="rule")i;else if(r.substr(0,1)!=="<"&&r.substr(0,1)===">")i=i-1;else if(r===">")i;else i=i-1;if(n==null||n=="]")i--}return e.baseIndent+i*t},electricChars:"]>"}});e.defineMIME("application/xml-dtd","dtd")});