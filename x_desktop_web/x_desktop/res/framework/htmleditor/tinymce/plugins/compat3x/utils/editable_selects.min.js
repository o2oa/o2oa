var TinyMCE_EditableSelects={editSelectElm:null,init:function(){var e=document.getElementsByTagName("select"),t,l=document,n;for(t=0;t<e.length;t++){if(e[t].className.indexOf("mceEditableSelect")!=-1){n=new Option(tinyMCEPopup.editor.translate("value"),"__mce_add_custom__");n.className="mceAddSelectValue";e[t].options[e[t].options.length]=n;e[t].onchange=TinyMCE_EditableSelects.onChangeEditableSelect}}},onChangeEditableSelect:function(e){var t=document,l,n=window.event?window.event.srcElement:e.target;if(n.options[n.selectedIndex].value=="__mce_add_custom__"){l=t.createElement("input");l.id=n.id+"_custom";l.name=n.name+"_custom";l.type="text";l.style.width=n.offsetWidth+"px";n.parentNode.insertBefore(l,n);n.style.display="none";l.focus();l.onblur=TinyMCE_EditableSelects.onBlurEditableSelectInput;l.onkeydown=TinyMCE_EditableSelects.onKeyDown;TinyMCE_EditableSelects.editSelectElm=n}},onBlurEditableSelectInput:function(){var e=TinyMCE_EditableSelects.editSelectElm;if(e){if(e.previousSibling.value!=""){addSelectValue(document.forms[0],e.id,e.previousSibling.value,e.previousSibling.value);selectByValue(document.forms[0],e.id,e.previousSibling.value)}else selectByValue(document.forms[0],e.id,"");e.style.display="inline";e.parentNode.removeChild(e.previousSibling);TinyMCE_EditableSelects.editSelectElm=null}},onKeyDown:function(e){e=e||window.event;if(e.keyCode==13)TinyMCE_EditableSelects.onBlurEditableSelectInput()}};