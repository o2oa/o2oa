(function(e){if(typeof define==="function"&&define.amd){define(["jquery","moment"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"),require("moment"))}else{e(jQuery,moment)}})(function(e,t){var i=e.fullCalendar={version:"2.6.1",internalApiVersion:3};var n=i.views={};e.fn.fullCalendar=function(t){var i=Array.prototype.slice.call(arguments,1);var n=this;this.each(function(r,s){var a=e(s);var o=a.data("fullCalendar");var l;if(typeof t==="string"){if(o&&e.isFunction(o[t])){l=o[t].apply(o,i);if(!r){n=l}if(t==="destroy"){a.removeData("fullCalendar")}}}else if(!o){o=new ut(a,t);a.data("fullCalendar",o);o.render()}});return n};var r=["header","buttonText","buttonIcons","themeButtonIcons"];function s(e){return $(e,r)}function a(t){var i={views:t.views||{}};var n;e.each(t,function(t,s){if(t!="views"){if(e.isPlainObject(s)&&!/(time|duration|interval)$/i.test(t)&&e.inArray(t,r)==-1){n=null;e.each(s,function(e,r){if(/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(e)){if(!i.views[e]){i.views[e]={}}i.views[e][t]=r}else{if(!n){n={}}n[e]=r}});if(n){i[t]=n}}else{i[t]=s}}});return i}i.intersectRanges=N;i.applyAll=te;i.debounce=de;i.isInt=le;i.htmlEscape=ne;i.cssToStr=se;i.proxy=ue;i.capitaliseFirstLetter=ae;function o(e,t){if(t.left){e.css({"border-left-width":1,"margin-left":t.left-1})}if(t.right){e.css({"border-right-width":1,"margin-right":t.right-1})}}function l(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function u(){e("body").addClass("fc-not-allowed")}function d(){e("body").removeClass("fc-not-allowed")}function c(t,i,n){var r=Math.floor(i/t.length);var s=Math.floor(i-r*(t.length-1));var a=[];var o=[];var l=[];var u=0;f(t);t.each(function(i,n){var d=i===t.length-1?s:r;var c=e(n).outerHeight(true);if(c<d){a.push(n);o.push(c);l.push(e(n).height())}else{u+=c}});if(n){i-=u;r=Math.floor(i/a.length);s=Math.floor(i-r*(a.length-1))}e(a).each(function(t,i){var n=t===a.length-1?s:r;var u=o[t];var d=l[t];var c=n-(u-d);if(u<n){e(i).height(c)}})}function f(e){e.height("")}function h(t){var i=0;t.find("> span").each(function(t,n){var r=e(n).outerWidth();if(r>i){i=r}});i++;t.width(i);return i}function v(e,t){e.height(t).addClass("fc-scroller");if(e[0].scrollHeight-1>e[0].clientHeight){return true}g(e);return false}function g(e){e.height("").removeClass("fc-scroller")}i.getOuterRect=m;i.getClientRect=y;i.getContentRect=w;i.getScrollbarWidths=S;function p(t){var i=t.css("position"),n=t.parents().filter(function(){var t=e(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"||!n.length?e(t[0].ownerDocument||document):n}function m(e){var t=e.offset();return{left:t.left,right:t.left+e.outerWidth(),top:t.top,bottom:t.top+e.outerHeight()}}function y(e){var t=e.offset();var i=S(e);var n=t.left+C(e,"border-left-width")+i.left;var r=t.top+C(e,"border-top-width")+i.top;return{left:n,right:n+e[0].clientWidth,top:r,bottom:r+e[0].clientHeight}}function w(e){var t=e.offset();var i=t.left+C(e,"border-left-width")+C(e,"padding-left");var n=t.top+C(e,"border-top-width")+C(e,"padding-top");return{left:i,right:i+e.width(),top:n,bottom:n+e.height()}}function S(e){var t=e.innerWidth()-e[0].clientWidth;var i={left:0,right:0,top:0,bottom:e.innerHeight()-e[0].clientHeight};if(E()&&e.css("direction")=="rtl"){i.left=t}else{i.right=t}return i}var b=null;function E(){if(b===null){b=D()}return b}function D(){var t=e("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body");var i=t.children();var n=i.offset().left>t.offset().left;t.remove();return n}function C(e,t){return parseFloat(e.css(t))||0}function H(e){return e.which==1&&!e.ctrlKey}i.intersectRects=T;function T(e,t){var i={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};if(i.left<i.right&&i.top<i.bottom){return i}return false}function x(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function R(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function k(e,t){return{left:e.left-t.left,top:e.top-t.top}}i.parseFieldSpecs=I;i.compareByFieldSpecs=F;i.compareByFieldSpec=z;i.flexibleCompare=M;function I(t){var i=[];var n=[];var r,s;if(typeof t==="string"){n=t.split(/\s*,\s*/)}else if(typeof t==="function"){n=[t]}else if(e.isArray(t)){n=t}for(r=0;r<n.length;r++){s=n[r];if(typeof s==="string"){i.push(s.charAt(0)=="-"?{field:s.substring(1),order:-1}:{field:s,order:1})}else if(typeof s==="function"){i.push({func:s})}}return i}function F(e,t,i){var n;var r;for(n=0;n<i.length;n++){r=z(e,t,i[n]);if(r){return r}}return 0}function z(e,t,i){if(i.func){return i.func(e,t)}return M(e[i.field],t[i.field])*(i.order||1)}function M(t,i){if(!t&&!i){return 0}if(i==null){return-1}if(t==null){return 1}if(e.type(t)==="string"||e.type(i)==="string"){return String(t).localeCompare(String(i))}return t-i}function N(e,t){var i=e.start;var n=e.end;var r=t.start;var s=t.end;var a,o;var l,u;if(n>r&&i<s){if(i>=r){a=i.clone();l=true}else{a=r.clone();l=false}if(n<=s){o=n.clone();u=true}else{o=s.clone();u=false}return{start:a,end:o,isStart:l,isEnd:u}}}i.computeIntervalUnit=O;i.divideRangeByDuration=A;i.divideDurationByDuration=Y;i.multiplyDuration=W;i.durationHasTime=j;var B=["sun","mon","tue","wed","thu","fri","sat"];var L=["year","month","week","day","hour","minute","second","millisecond"];function G(e,i){return t.duration({days:e.clone().stripTime().diff(i.clone().stripTime(),"days"),ms:e.time()-i.time()})}function P(e,i){return t.duration({days:e.clone().stripTime().diff(i.clone().stripTime(),"days")})}function V(e,i,n){return t.duration(Math.round(e.diff(i,n,true)),n)}function O(e,t){var i,n;var r;for(i=0;i<L.length;i++){n=L[i];r=_(n,e,t);if(r>=1&&le(r)){break}}return n}function _(e,i,n){if(n!=null){return n.diff(i,e,true)}else if(t.isDuration(i)){return i.as(e)}else{return i.end.diff(i.start,e,true)}}function A(e,t,i){var n;if(j(i)){return(t-e)/i}n=i.asMonths();if(Math.abs(n)>=1&&le(n)){return t.diff(e,"months",true)/n}return t.diff(e,"days",true)/i.asDays()}function Y(e,t){var i,n;if(j(e)||j(t)){return e/t}i=e.asMonths();n=t.asMonths();if(Math.abs(i)>=1&&le(i)&&Math.abs(n)>=1&&le(n)){return i/n}return e.asDays()/t.asDays()}function W(e,i){var n;if(j(e)){return t.duration(e*i)}n=e.asMonths();if(Math.abs(n)>=1&&le(n)){return t.duration({months:n*i})}return t.duration({days:e.asDays()*i})}function j(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function Z(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function U(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}i.log=function(){var e=window.console;if(e&&e.log){return e.log.apply(e,arguments)}};i.warn=function(){var e=window.console;if(e&&e.warn){return e.warn.apply(e,arguments)}else{return i.log.apply(i,arguments)}};var q={}.hasOwnProperty;function $(e,t){var i={};var n,r;var s;var a,o;var l;if(t){for(n=0;n<t.length;n++){r=t[n];s=[];for(a=e.length-1;a>=0;a--){o=e[a][r];if(typeof o==="object"){s.unshift(o)}else if(o!==undefined){i[r]=o;break}}if(s.length){i[r]=$(s)}}}for(n=e.length-1;n>=0;n--){l=e[n];for(r in l){if(!(r in i)){i[r]=l[r]}}}return i}function X(e){var t=function(){};t.prototype=e;return new t}function Q(e,t){for(var i in e){if(J(e,i)){t[i]=e[i]}}}function K(e,t){var i=["constructor","toString","valueOf"];var n,r;for(n=0;n<i.length;n++){r=i[n];if(e[r]!==Object.prototype[r]){t[r]=e[r]}}}function J(e,t){return q.call(e,t)}function ee(t){return/undefined|null|boolean|number|string/.test(e.type(t))}function te(t,i,n){if(e.isFunction(t)){t=[t]}if(t){var r;var s;for(r=0;r<t.length;r++){s=t[r].apply(i,n)||s}return s}}function ie(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined){return arguments[e]}}}function ne(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function re(e){return e.replace(/&.*?;/g,"")}function se(t){var i=[];e.each(t,function(e,t){if(t!=null){i.push(e+":"+t)}});return i.join(";")}function ae(e){return e.charAt(0).toUpperCase()+e.slice(1)}function oe(e,t){return e-t}function le(e){return e%1===0}function ue(e,t){var i=e[t];return function(){return i.apply(e,arguments)}}function de(e,t){var i;var n;var r;var s;var a=function(){var o=+new Date-s;if(o<t&&o>0){i=setTimeout(a,t-o)}else{i=null;e.apply(r,n);if(!i){r=n=null}}};return function(){r=this;n=arguments;s=+new Date;if(!i){i=setTimeout(a,t)}}}var ce=/^\s*\d{4}-\d\d$/;var fe=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var he=t.fn;var ve=e.extend({},he);var ge;var pe;var me;i.moment=function(){return ye(arguments)};i.moment.utc=function(){var e=ye(arguments,true);if(e.hasTime()){e.utc()}return e};i.moment.parseZone=function(){return ye(arguments,true,true)};function ye(i,n,r){var s=i[0];var a=i.length==1&&typeof s==="string";var o;var l;var u;var d;if(t.isMoment(s)){d=t.apply(null,i);Se(s,d)}else if(Z(s)||s===undefined){d=t.apply(null,i)}else{o=false;l=false;if(a){if(ce.test(s)){s+="-01";i=[s];o=true;l=true}else if(u=fe.exec(s)){o=!u[5];l=true}}else if(e.isArray(s)){l=true}if(n||o){d=t.utc.apply(t,i)}else{d=t.apply(null,i)}if(o){d._ambigTime=true;d._ambigZone=true}else if(r){if(l){d._ambigZone=true}else if(a){if(d.utcOffset){d.utcOffset(s)}else{d.zone(s)}}}}d._fullCalendar=true;return d}he.clone=function(){var e=ve.clone.apply(this,arguments);Se(this,e);if(this._fullCalendar){e._fullCalendar=true}return e};he.week=he.weeks=function(e){var t=(this._locale||this._lang)._fullCalendar_weekCalc;if(e==null&&typeof t==="function"){return t(this)}else if(t==="ISO"){return ve.isoWeek.apply(this,arguments)}return ve.week.apply(this,arguments)};he.time=function(e){if(!this._fullCalendar){return ve.time.apply(this,arguments)}if(e==null){return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!t.isDuration(e)&&!t.isMoment(e)){e=t.duration(e)}var i=0;if(t.isDuration(e)){i=Math.floor(e.asDays())*24}return this.hours(i+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())}};he.stripTime=function(){var e;if(!this._ambigTime){e=this.toArray();this.utc();pe(this,e.slice(0,3));this._ambigTime=true;this._ambigZone=true}return this};he.hasTime=function(){return!this._ambigTime};he.stripZone=function(){var e,t;if(!this._ambigZone){e=this.toArray();t=this._ambigTime;this.utc();pe(this,e);this._ambigTime=t||false;this._ambigZone=true}return this};he.hasZone=function(){return!this._ambigZone};he.local=function(){var e=this.toArray();var t=this._ambigZone;ve.local.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;if(t){me(this,e)}return this};he.utc=function(){ve.utc.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;return this};e.each(["zone","utcOffset"],function(e,t){if(ve[t]){he[t]=function(e){if(e!=null){this._ambigTime=false;this._ambigZone=false}return ve[t].apply(this,arguments)}}});he.format=function(){if(this._fullCalendar&&arguments[0]){return De(this,arguments[0])}if(this._ambigTime){return Ee(this,"YYYY-MM-DD")}if(this._ambigZone){return Ee(this,"YYYY-MM-DD[T]HH:mm:ss")}return ve.format.apply(this,arguments)};he.toISOString=function(){if(this._ambigTime){return Ee(this,"YYYY-MM-DD")}if(this._ambigZone){return Ee(this,"YYYY-MM-DD[T]HH:mm:ss")}return ve.toISOString.apply(this,arguments)};he.isWithin=function(e,t){var i=we([this,e,t]);return i[0]>=i[1]&&i[0]<i[2]};he.isSame=function(e,t){var n;if(!this._fullCalendar){return ve.isSame.apply(this,arguments)}if(t){n=we([this,e],true);return ve.isSame.call(n[0],n[1],t)}else{e=i.moment.parseZone(e);return ve.isSame.call(this,e)&&Boolean(this._ambigTime)===Boolean(e._ambigTime)&&Boolean(this._ambigZone)===Boolean(e._ambigZone)}};e.each(["isBefore","isAfter"],function(e,t){he[t]=function(e,i){var n;if(!this._fullCalendar){return ve[t].apply(this,arguments)}n=we([this,e]);return ve[t].call(n[0],n[1],i)}});function we(e,n){var r=false;var s=false;var a=e.length;var o=[];var l,u;for(l=0;l<a;l++){u=e[l];if(!t.isMoment(u)){u=i.moment.parseZone(u)}r=r||u._ambigTime;s=s||u._ambigZone;o.push(u)}for(l=0;l<a;l++){u=o[l];if(!n&&r&&!u._ambigTime){o[l]=u.clone().stripTime()}else if(s&&!u._ambigZone){o[l]=u.clone().stripZone()}}return o}function Se(e,t){if(e._ambigTime){t._ambigTime=true}else if(t._ambigTime){t._ambigTime=false}if(e._ambigZone){t._ambigZone=true}else if(t._ambigZone){t._ambigZone=false}}function be(e,t){e.year(t[0]||0).month(t[1]||0).date(t[2]||0).hours(t[3]||0).minutes(t[4]||0).seconds(t[5]||0).milliseconds(t[6]||0)}ge="_d"in t()&&"updateOffset"in t;pe=ge?function(e,i){e._d.setTime(Date.UTC.apply(Date,i));t.updateOffset(e,false)}:be;me=ge?function(e,i){e._d.setTime(+new Date(i[0]||0,i[1]||0,i[2]||0,i[3]||0,i[4]||0,i[5]||0,i[6]||0));t.updateOffset(e,false)}:be;function Ee(e,t){return ve.format.call(e,t)}function De(e,t){return Ce(e,ze(t))}function Ce(e,t){var i="";var n;for(n=0;n<t.length;n++){i+=Te(e,t[n])}return i}var He={t:function(e){return Ee(e,"a").charAt(0)},T:function(e){return Ee(e,"A").charAt(0)}};function Te(e,t){var i;var n;if(typeof t==="string"){return t}else if(i=t.token){if(He[i]){return He[i](e)}return Ee(e,i)}else if(t.maybe){n=Ce(e,t.maybe);if(n.match(/[1-9]/)){return n}}return""}function xe(e,t,n,r,s){var a;e=i.moment.parseZone(e);t=i.moment.parseZone(t);a=(e.localeData||e.lang).call(e);n=a.longDateFormat(n)||n;r=r||" - ";return Re(e,t,ze(n),r,s)}i.formatRange=xe;function Re(e,t,i,n,r){var s=e.clone().stripZone();var a=t.clone().stripZone();var o;var l;var u="";var d;var c="";var f;var h="";var v="";var g="";for(l=0;l<i.length;l++){o=Ie(e,t,s,a,i[l]);if(o===false){break}u+=o}for(d=i.length-1;d>l;d--){o=Ie(e,t,s,a,i[d]);if(o===false){break}c=o+c}for(f=l;f<=d;f++){h+=Te(e,i[f]);v+=Te(t,i[f])}if(h||v){if(r){g=v+n+h}else{g=h+n+v}}return u+g+c}var ke={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function Ie(e,t,i,n,r){var s;var a;if(typeof r==="string"){return r}else if(s=r.token){a=ke[s.charAt(0)];if(a&&i.isSame(n,a)){return Ee(e,s)}}return false}var Fe={};function ze(e){if(e in Fe){return Fe[e]}return Fe[e]=Me(e)}function Me(e){var t=[];var i=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;var n;while(n=i.exec(e)){if(n[1]){t.push(n[1])}else if(n[2]){t.push({maybe:Me(n[2])})}else if(n[3]){t.push({token:n[3]})}else if(n[5]){t.push(n[5])}}return t}i.Class=Ne;function Ne(){}Ne.extend=function(){var e=arguments.length;var t;var i;for(t=0;t<e;t++){i=arguments[t];if(t<e-1){Le(this,i)}}return Be(this,i||{})};Ne.mixin=function(e){Le(this,e)};function Be(e,t){var i;if(J(t,"constructor")){i=t.constructor}if(typeof i!=="function"){i=t.constructor=function(){e.apply(this,arguments)}}i.prototype=X(e.prototype);Q(t,i.prototype);K(t,i.prototype);Q(e,i);return i}function Le(e,t){Q(t.prototype||t,e.prototype)}var Ge=i.Emitter=Ne.extend({callbackHash:null,on:function(e,t){this.getCallbacks(e).add(t);return this},off:function(e,t){this.getCallbacks(e).remove(t);return this},trigger:function(e){var t=Array.prototype.slice.call(arguments,1);this.triggerWith(e,this,t);return this},triggerWith:function(e,t,i){var n=this.getCallbacks(e);n.fireWith(t,i);return this},getCallbacks:function(t){var i;if(!this.callbackHash){this.callbackHash={}}i=this.callbackHash[t];if(!i){i=this.callbackHash[t]=e.Callbacks()}return i}});var Pe=Ne.extend({isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var t=this;var i=this.options;this.el=e('<div class="fc-popover"/>').addClass(i.className||"").css({top:0,left:0}).append(i.content).appendTo(i.parentEl);this.el.on("click",".fc-close",function(){t.hide()});if(i.autoHide){e(document).on("mousedown",this.documentMousedownProxy=ue(this,"documentMousedown"))}},documentMousedown:function(t){if(this.el&&!e(t.target).closest(this.el).length){this.hide()}},removeElement:function(){this.hide();if(this.el){this.el.remove();this.el=null}e(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t=this.options;var i=this.el.offsetParent().offset();var n=this.el.outerWidth();var r=this.el.outerHeight();var s=e(window);var a=p(this.el);var o;var l;var u;var d;var c;d=t.top||0;if(t.left!==undefined){c=t.left}else if(t.right!==undefined){c=t.right-n}else{c=0}if(a.is(window)||a.is(document)){a=s;o=0;l=0}else{u=a.offset();o=u.top;l=u.left}o+=s.scrollTop();l+=s.scrollLeft();if(t.viewportConstrain!==false){d=Math.min(d,o+a.outerHeight()-r-this.margin);d=Math.max(d,o+this.margin);c=Math.min(c,l+a.outerWidth()-n-this.margin);c=Math.max(c,l+this.margin)}this.el.css({top:d-i.top,left:c-i.left})},trigger:function(e){if(this.options[e]){this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}});var Ve=i.CoordCache=Ne.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:false,isVertical:false,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(t){this.els=e(t.els);this.isHorizontal=t.isHorizontal;this.isVertical=t.isVertical;this.forcedOffsetParentEl=t.offsetParent?e(t.offsetParent):null},build:function(){var e=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=e.offset();this.boundingRect=this.queryBoundingRect();if(this.isHorizontal){this.buildElHorizontals()}if(this.isVertical){this.buildElVerticals()}},clear:function(){this.origin=null;this.boundingRect=null;this.lefts=null;this.rights=null;this.tops=null;this.bottoms=null},ensureBuilt:function(){if(!this.origin){this.build()}},queryBoundingRect:function(){var e=p(this.els.eq(0));if(!e.is(document)){return y(e)}},buildElHorizontals:function(){var t=[];var i=[];this.els.each(function(n,r){var s=e(r);var a=s.offset().left;var o=s.outerWidth();t.push(a);i.push(a+o)});this.lefts=t;this.rights=i},buildElVerticals:function(){var t=[];var i=[];this.els.each(function(n,r){var s=e(r);var a=s.offset().top;var o=s.outerHeight();t.push(a);i.push(a+o)});this.tops=t;this.bottoms=i},getHorizontalIndex:function(e){this.ensureBuilt();var t=this.boundingRect;var i=this.lefts;var n=this.rights;var r=i.length;var s;if(!t||e>=t.left&&e<t.right){for(s=0;s<r;s++){if(e>=i[s]&&e<n[s]){return s}}}},getVerticalIndex:function(e){this.ensureBuilt();var t=this.boundingRect;var i=this.tops;var n=this.bottoms;var r=i.length;var s;if(!t||e>=t.top&&e<t.bottom){for(s=0;s<r;s++){if(e>=i[s]&&e<n[s]){return s}}}},getLeftOffset:function(e){this.ensureBuilt();return this.lefts[e]},getLeftPosition:function(e){this.ensureBuilt();return this.lefts[e]-this.origin.left},getRightOffset:function(e){this.ensureBuilt();return this.rights[e]},getRightPosition:function(e){this.ensureBuilt();return this.rights[e]-this.origin.left},getWidth:function(e){this.ensureBuilt();return this.rights[e]-this.lefts[e]},getTopOffset:function(e){this.ensureBuilt();return this.tops[e]},getTopPosition:function(e){this.ensureBuilt();return this.tops[e]-this.origin.top},getBottomOffset:function(e){this.ensureBuilt();return this.bottoms[e]},getBottomPosition:function(e){this.ensureBuilt();return this.bottoms[e]-this.origin.top},getHeight:function(e){this.ensureBuilt();return this.bottoms[e]-this.tops[e]}});var Oe=i.DragListener=Ne.extend({options:null,isListening:false,isDragging:false,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(e){e=e||{};this.options=e;this.subjectEl=e.subjectEl},mousedown:function(e){if(H(e)){e.preventDefault();this.startListening(e);if(!this.options.distance){this.startDrag(e)}}},startListening:function(t){var i;if(!this.isListening){if(t&&this.options.scroll){i=p(e(t.target));if(!i.is(window)&&!i.is(document)){this.scrollEl=i;this.scrollHandlerProxy=de(ue(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}e(document).on("mousemove",this.mousemoveProxy=ue(this,"mousemove")).on("mouseup",this.mouseupProxy=ue(this,"mouseup")).on("selectstart",this.preventDefault);if(t){this.originX=t.pageX;this.originY=t.pageY}else{this.originX=0;this.originY=0}this.isListening=true;this.listenStart(t)}},listenStart:function(e){this.trigger("listenStart",e)},mousemove:function(e){var t=e.pageX-this.originX;var i=e.pageY-this.originY;var n;var r;if(!this.isDragging){n=this.options.distance||1;r=t*t+i*i;if(r>=n*n){this.startDrag(e)}}if(this.isDragging){this.drag(t,i,e)}},startDrag:function(e){if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.dragStart(e)}},dragStart:function(e){var t=this.subjectEl;this.trigger("dragStart",e);if(this.subjectHref=t?t.attr("href"):null){t.removeAttr("href")}},drag:function(e,t,i){this.trigger("drag",e,t,i);this.updateScroll(i)},mouseup:function(e){this.stopListening(e)},stopDrag:function(e){if(this.isDragging){this.stopScrolling();this.dragStop(e);this.isDragging=false}},dragStop:function(e){var t=this;this.trigger("dragStop",e);setTimeout(function(){if(t.subjectHref){t.subjectEl.attr("href",t.subjectHref)}},0)},stopListening:function(t){this.stopDrag(t);if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}e(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.listenStop(t)}},listenStop:function(e){this.trigger("listenStop",e)},trigger:function(e){if(this.options[e]){this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(e){e.preventDefault()},computeScrollBounds:function(){var e=this.scrollEl;this.scrollBounds=e?m(e):null},updateScroll:function(e){var t=this.scrollSensitivity;var i=this.scrollBounds;var n,r;var s,a;var o=0;var l=0;if(i){n=(t-(e.pageY-i.top))/t;r=(t-(i.bottom-e.pageY))/t;s=(t-(e.pageX-i.left))/t;a=(t-(i.right-e.pageX))/t;if(n>=0&&n<=1){o=n*this.scrollSpeed*-1}else if(r>=0&&r<=1){o=r*this.scrollSpeed}if(s>=0&&s<=1){l=s*this.scrollSpeed*-1}else if(a>=0&&a<=1){l=a*this.scrollSpeed}}this.setScrollVel(o,l)},setScrollVel:function(e,t){this.scrollTopVel=e;this.scrollLeftVel=t;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(ue(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var e=this.scrollEl;if(this.scrollTopVel<0){if(e.scrollTop()<=0){this.scrollTopVel=0}}else if(this.scrollTopVel>0){if(e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight){this.scrollTopVel=0}}if(this.scrollLeftVel<0){if(e.scrollLeft()<=0){this.scrollLeftVel=0}}else if(this.scrollLeftVel>0){if(e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth){this.scrollLeftVel=0}}},scrollIntervalFunc:function(){var e=this.scrollEl;var t=this.scrollIntervalMs/1e3;if(this.scrollTopVel){e.scrollTop(e.scrollTop()+this.scrollTopVel*t)}if(this.scrollLeftVel){e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.scrollStop()}},scrollHandler:function(){if(!this.scrollIntervalId){this.scrollStop()}},scrollStop:function(){}});var _e=Oe.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(e,t){Oe.call(this,t);this.component=e},listenStart:function(e){var t=this.subjectEl;var i;var n;var r;Oe.prototype.listenStart.apply(this,arguments);this.computeCoords();if(e){n={left:e.pageX,top:e.pageY};r=n;if(t){i=m(t);r=x(r,i)}this.origHit=this.queryHit(r.left,r.top);if(t&&this.options.subjectCenter){if(this.origHit){i=T(this.origHit,i)||i}r=R(i)}this.coordAdjust=k(r,n)}else{this.origHit=null;this.coordAdjust=null}},computeCoords:function(){this.component.prepareHits();this.computeScrollBounds()},dragStart:function(e){var t;Oe.prototype.dragStart.apply(this,arguments);t=this.queryHit(e.pageX,e.pageY);if(t){this.hitOver(t)}},drag:function(e,t,i){var n;Oe.prototype.drag.apply(this,arguments);n=this.queryHit(i.pageX,i.pageY);if(!Ae(n,this.hit)){if(this.hit){this.hitOut()}if(n){this.hitOver(n)}}},dragStop:function(){this.hitDone();Oe.prototype.dragStop.apply(this,arguments)},hitOver:function(e){var t=Ae(e,this.origHit);this.hit=e;this.trigger("hitOver",this.hit,t,this.origHit)},hitOut:function(){if(this.hit){this.trigger("hitOut",this.hit);this.hitDone();this.hit=null}},hitDone:function(){if(this.hit){this.trigger("hitDone",this.hit)}},listenStop:function(){Oe.prototype.listenStop.apply(this,arguments);this.origHit=null;this.hit=null;this.component.releaseHits()},scrollStop:function(){Oe.prototype.scrollStop.apply(this,arguments);this.computeCoords()},queryHit:function(e,t){if(this.coordAdjust){e+=this.coordAdjust.left;t+=this.coordAdjust.top}return this.component.queryHit(e,t)}});function Ae(e,t){if(!e&&!t){return true}if(e&&t){return e.component===t.component&&Ye(e,t)&&Ye(t,e)}return false}function Ye(e,t){for(var i in e){if(!/^(component|left|right|top|bottom)$/.test(i)){if(e[i]!==t[i]){return false}}}return true}var We=Ne.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,constructor:function(t,i){this.options=i=i||{};this.sourceEl=t;this.parentEl=i.parentEl?e(i.parentEl):t.parent()},start:function(t){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=t.pageY;this.mouseX0=t.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}e(document).on("mousemove",this.mousemoveProxy=ue(this,"mousemove"))}},stop:function(t,i){var n=this;var r=this.options.revertDuration;function s(){this.isAnimating=false;n.removeElement();this.top0=this.left0=null;if(i){i()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;e(document).off("mousemove",this.mousemoveProxy);if(t&&r&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:r,complete:s})}else{s()}}},getEl:function(){var e=this.el;if(!e){this.sourceEl.width();e=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return e},removeElement:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var e;var t;this.getEl();if(this.top0===null){this.sourceEl.width();e=this.sourceEl.offset();t=this.el.offsetParent().offset();this.top0=e.top-t.top;this.left0=e.left-t.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(e){this.topDelta=e.pageY-this.mouseY0;this.leftDelta=e.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}});var je=i.Grid=Ne.extend({view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,externalDragStartProxy:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,constructor:function(e){this.view=e;this.isRTL=e.opt("isRTL");this.elsByFill={};this.externalDragStartProxy=ue(this,"externalDragStart")},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return true},computeDisplayEventEnd:function(){return true},setRange:function(e){this.start=e.start.clone();this.end=e.end.clone();this.rangeUpdated();this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var e=this.view;var t;var i;this.eventTimeFormat=e.opt("eventTimeFormat")||e.opt("timeFormat")||this.computeEventTimeFormat();t=e.opt("displayEventTime");if(t==null){t=this.computeDisplayEventTime()}i=e.opt("displayEventEnd");if(i==null){i=this.computeDisplayEventEnd()}this.displayEventTime=t;this.displayEventEnd=i},spanToSegs:function(e){},diffDates:function(e,t){if(this.largeUnit){return V(e,t,this.largeUnit)}else{return G(e,t)}},prepareHits:function(){},releaseHits:function(){},queryHit:function(e,t){},getHitSpan:function(e){},getHitEl:function(e){},setElement:function(t){var i=this;this.el=t;t.on("mousedown",function(t){if(!e(t.target).is(".fc-event-container *, .fc-more")&&!e(t.target).closest(".fc-popover").length){i.dayMousedown(t)}});this.bindSegHandlers();this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers();this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){e(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){e(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(e){var t=this;var i=this.view;var n=i.opt("selectable");var r;var s;var a=new _e(this,{scroll:i.opt("dragScroll"),dragStart:function(){i.unselect()},hitOver:function(e,i,a){if(a){r=i?e:null;if(n){s=t.computeSelection(t.getHitSpan(a),t.getHitSpan(e));if(s){t.renderSelection(s)}else if(s===false){u()}}}},hitOut:function(){r=null;s=null;t.unrenderSelection();d()},listenStop:function(e){if(r){i.triggerDayClick(t.getHitSpan(r),t.getHitEl(r),e)}if(s){i.reportSelection(s,e)}d()}});a.mousedown(e)},renderEventLocationHelper:function(e,t){var i=this.fabricateHelperEvent(e,t);this.renderHelper(i,t)},fabricateHelperEvent:function(e,t){var i=t?X(t.event):{};i.start=e.start.clone();i.end=e.end?e.end.clone():null;i.allDay=null;this.view.calendar.normalizeEventDates(i);i.className=(i.className||[]).concat("fc-helper");if(!t){i.editable=false}return i},renderHelper:function(e,t){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var i=this.computeSelectionSpan(e,t);if(i&&!this.view.calendar.isSelectionSpanAllowed(i)){return false}return i},computeSelectionSpan:function(e,t){var i=[e.start,e.end,t.start,t.end];i.sort(oe);return{start:i[0].clone(),end:i[3].clone()}},renderHighlight:function(e){this.renderFill("highlight",this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},renderFill:function(e,t){},unrenderFill:function(e){var t=this.elsByFill[e];if(t){t.remove();delete this.elsByFill[e]}},renderFillSegEls:function(t,i){var n=this;var r=this[t+"SegEl"];var s="";var a=[];var o;if(i.length){for(o=0;o<i.length;o++){s+=this.fillSegHtml(t,i[o])}e(s).each(function(t,s){var o=i[t];var l=e(s);if(r){l=r.call(n,o,l)}if(l){l=e(l);if(l.is(n.fillSegTag)){o.el=l;a.push(o)}}})}return a},fillSegTag:"div",fillSegHtml:function(e,t){var i=this[e+"SegClasses"];var n=this[e+"SegCss"];var r=i?i.call(this,t):[];var s=se(n?n.call(this,t):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},getDayClasses:function(e){
var t=this.view;var i=t.calendar.getNow();var n=["fc-"+B[e.day()]];if(t.intervalDuration.as("months")==1&&e.month()!=t.intervalStart.month()){n.push("fc-other-month")}if(e.isSame(i,"day")){n.push("fc-today",t.highlightStateClass)}else if(e<i){n.push("fc-past")}else{n.push("fc-future")}return n}});je.mixin({mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,isDraggingExternal:false,segs:null,renderEvents:function(e){var t=[];var i=[];var n;for(n=0;n<e.length;n++){(Ze(e[n])?t:i).push(e[n])}this.segs=[].concat(this.renderBgEvents(t),this.renderFgEvents(i))},renderBgEvents:function(e){var t=this.eventsToSegs(e);return this.renderBgSegs(t)||t},renderFgEvents:function(e){var t=this.eventsToSegs(e);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.triggerSegMouseout();this.unrenderFgSegs();this.unrenderBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(e){},unrenderFgSegs:function(){},renderFgSegEls:function(t,i){var n=this.view;var r="";var s=[];var a;if(t.length){for(a=0;a<t.length;a++){r+=this.fgSegHtml(t[a],i)}e(r).each(function(i,r){var a=t[i];var o=n.resolveEventEl(a.event,e(r));if(o){o.data("fc-seg",a);a.el=o;s.push(a)}})}return s},fgSegHtml:function(e,t){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event;var i=t.source||{};return["fc-bgevent"].concat(t.className,i.className||[])},bgEventSegCss:function(e){return{"background-color":this.getSegSkinCss(e)["background-color"]}},businessHoursSegClasses:function(e){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var t=this;var i=this.view;e.each({mouseenter:function(e,i){t.triggerSegMouseover(e,i)},mouseleave:function(e,i){t.triggerSegMouseout(e,i)},click:function(e,t){return i.trigger("eventClick",this,e.event,t)},mousedown:function(n,r){if(e(r.target).is(".fc-resizer")&&i.isEventResizable(n.event)){t.segResizeMousedown(n,r,e(r.target).is(".fc-start-resizer"))}else if(i.isEventDraggable(n.event)){t.segDragMousedown(n,r)}}},function(i,n){t.el.on(i,".fc-event-container > *",function(i){var r=e(this).data("fc-seg");if(r&&!t.isDraggingSeg&&!t.isResizingSeg){return n.call(this,r,i)}})})},triggerSegMouseover:function(e,t){if(!this.mousedOverSeg){this.mousedOverSeg=e;this.view.trigger("eventMouseover",e.el[0],e.event,t)}},triggerSegMouseout:function(e,t){t=t||{};if(this.mousedOverSeg){e=e||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",e.el[0],e.event,t)}},segDragMousedown:function(e,t){var i=this;var n=this.view;var r=n.calendar;var s=e.el;var a=e.event;var o;var l=new We(e.el,{parentEl:n.el,opacity:n.opt("dragOpacity"),revertDuration:n.opt("dragRevertDuration"),zIndex:2});var c=new _e(n,{distance:5,scroll:n.opt("dragScroll"),subjectEl:s,subjectCenter:true,listenStart:function(e){l.hide();l.start(e)},dragStart:function(t){i.triggerSegMouseout(e,t);i.segDragStart(e,t);n.hideEvent(a)},hitOver:function(t,s,d){if(e.hit){d=e.hit}o=i.computeEventDrop(d.component.getHitSpan(d),t.component.getHitSpan(t),a);if(o&&!r.isEventSpanAllowed(i.eventToSpan(o),a)){u();o=null}if(o&&n.renderDrag(o,e)){l.hide()}else{l.show()}if(s){o=null}},hitOut:function(){n.unrenderDrag();l.show();o=null},hitDone:function(){d()},dragStop:function(t){l.stop(!o,function(){n.unrenderDrag();n.showEvent(a);i.segDragStop(e,t);if(o){n.reportEventDrop(a,o,this.largeUnit,s,t)}})},listenStop:function(){l.stop()}});c.mousedown(t)},segDragStart:function(e,t){this.isDraggingSeg=true;this.view.trigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=false;this.view.trigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,i){var n=this.view.calendar;var r=e.start;var s=t.start;var a;var o;if(r.hasTime()===s.hasTime()){a=this.diffDates(s,r);if(i.allDay&&j(a)){o={start:i.start.clone(),end:n.getEventEnd(i),allDay:false};n.normalizeEventTimes(o)}else{o={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay}}o.start.add(a);if(o.end){o.end.add(a)}}else{o={start:s.clone(),end:null,allDay:!s.hasTime()}}return o},applyDragOpacity:function(e){var t=this.view.opt("dragOpacity");if(t!=null){e.each(function(e,i){i.style.opacity=t})}},externalDragStart:function(t,i){var n=this.view;var r;var s;if(n.opt("droppable")){r=e((i?i.item:null)||t.target);s=n.opt("dropAccept");if(e.isFunction(s)?s.call(r[0],r):r.is(s)){if(!this.isDraggingExternal){this.listenToExternalDrag(r,t,i)}}}},listenToExternalDrag:function(e,t,i){var n=this;var r=this.view.calendar;var s=Qe(e);var a;var o=new _e(this,{listenStart:function(){n.isDraggingExternal=true},hitOver:function(e){a=n.computeExternalDrop(e.component.getHitSpan(e),s);if(a&&!r.isExternalSpanAllowed(n.eventToSpan(a),a,s.eventProps)){u();a=null}if(a){n.renderDrag(a)}},hitOut:function(){a=null},hitDone:function(){d();n.unrenderDrag()},dragStop:function(){if(a){n.view.reportExternalDrop(s,a,e,t,i)}},listenStop:function(){n.isDraggingExternal=false}});o.startDrag(t)},computeExternalDrop:function(e,t){var i=this.view.calendar;var n={start:i.applyTimezone(e.start),end:null};if(t.startTime&&!n.start.hasTime()){n.start.time(t.startTime)}if(t.duration){n.end=n.start.clone().add(t.duration)}return n},renderDrag:function(e,t){},unrenderDrag:function(){},segResizeMousedown:function(e,t,i){var n=this;var r=this.view;var s=r.calendar;var a=e.el;var o=e.event;var l=s.getEventEnd(o);var c;var f=new _e(this,{distance:5,scroll:r.opt("dragScroll"),subjectEl:a,dragStart:function(t){n.triggerSegMouseout(e,t);n.segResizeStart(e,t)},hitOver:function(t,a,d){var f=n.getHitSpan(d);var h=n.getHitSpan(t);c=i?n.computeEventStartResize(f,h,o):n.computeEventEndResize(f,h,o);if(c){if(!s.isEventSpanAllowed(n.eventToSpan(c),o)){u();c=null}else if(c.start.isSame(o.start)&&c.end.isSame(l)){c=null}}if(c){r.hideEvent(o);n.renderEventResize(c,e)}},hitOut:function(){c=null},hitDone:function(){n.unrenderEventResize();r.showEvent(o);d()},dragStop:function(t){n.segResizeStop(e,t);if(c){r.reportEventResize(o,c,this.largeUnit,a,t)}}});f.mousedown(t)},segResizeStart:function(e,t){this.isResizingSeg=true;this.view.trigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=false;this.view.trigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,i){return this.computeEventResize("start",e,t,i)},computeEventEndResize:function(e,t,i){return this.computeEventResize("end",e,t,i)},computeEventResize:function(e,t,i,n){var r=this.view.calendar;var s=this.diffDates(i[e],t[e]);var a;var o;a={start:n.start.clone(),end:r.getEventEnd(n),allDay:n.allDay};if(a.allDay&&j(s)){a.allDay=false;r.normalizeEventTimes(a)}a[e].add(s);if(!a.start.isBefore(a.end)){o=this.minResizeDuration||(n.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);if(e=="start"){a.start=a.end.clone().subtract(o)}else{a.end=a.start.clone().add(o)}}return a},renderEventResize:function(e,t){},unrenderEventResize:function(){},getEventTimeText:function(e,t,i){if(t==null){t=this.eventTimeFormat}if(i==null){i=this.displayEventEnd}if(this.displayEventTime&&e.start.hasTime()){if(i&&e.end){return this.view.formatRange(e,t)}else{return e.start.format(t)}}return""},getSegClasses:function(e,t,i){var n=e.event;var r=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);if(t){r.push("fc-draggable")}if(i){r.push("fc-resizable")}return r},getSegSkinCss:function(e){var t=e.event;var i=this.view;var n=t.source||{};var r=t.color;var s=n.color;var a=i.opt("eventColor");return{"background-color":t.backgroundColor||r||n.backgroundColor||s||i.opt("eventBackgroundColor")||a,"border-color":t.borderColor||r||n.borderColor||s||i.opt("eventBorderColor")||a,color:t.textColor||n.textColor||i.opt("eventTextColor")}},eventToSegs:function(e){return this.eventsToSegs([e])},eventToSpan:function(e){return this.eventToSpans(e)[0]},eventToSpans:function(e){var t=this.eventToRange(e);return this.eventRangeToSpans(t,e)},eventsToSegs:function(t,i){var n=this;var r=$e(t);var s=[];e.each(r,function(e,t){var r=[];var a;for(a=0;a<t.length;a++){r.push(n.eventToRange(t[a]))}if(Ue(t[0])){r=n.invertRanges(r);for(a=0;a<r.length;a++){s.push.apply(s,n.eventRangeToSegs(r[a],t[0],i))}}else{for(a=0;a<r.length;a++){s.push.apply(s,n.eventRangeToSegs(r[a],t[a],i))}}});return s},eventToRange:function(e){return{start:e.start.clone().stripZone(),end:(e.end?e.end.clone():this.view.calendar.getDefaultEventEnd(e.allDay!=null?e.allDay:!e.start.hasTime(),e.start)).stripZone()}},eventRangeToSegs:function(e,t,i){var n=this.eventRangeToSpans(e,t);var r=[];var s;for(s=0;s<n.length;s++){r.push.apply(r,this.eventSpanToSegs(n[s],t,i))}return r},eventRangeToSpans:function(t,i){return[e.extend({},t)]},eventSpanToSegs:function(e,t,i){var n=i?i(e):this.spanToSegs(e);var r,s;for(r=0;r<n.length;r++){s=n[r];s.event=t;s.eventStartMS=+e.start;s.eventDurationMS=e.end-e.start}return n},invertRanges:function(e){var t=this.view;var i=t.start.clone();var n=t.end.clone();var r=[];var s=i;var a,o;e.sort(Xe);for(a=0;a<e.length;a++){o=e[a];if(o.start>s){r.push({start:s,end:o.start})}s=o.end}if(s<n){r.push({start:s,end:n})}return r},sortEventSegs:function(e){e.sort(ue(this,"compareEventSegs"))},compareEventSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||F(e.event,t.event,this.view.eventOrderSpecs)}});function Ze(e){var t=qe(e);return t==="background"||t==="inverse-background"}i.isBgEvent=Ze;function Ue(e){return qe(e)==="inverse-background"}function qe(e){return ie((e.source||{}).rendering,e.rendering)}function $e(e){var t={};var i,n;for(i=0;i<e.length;i++){n=e[i];(t[n._id]||(t[n._id]=[])).push(n)}return t}function Xe(e,t){return e.start-t.start}i.dataAttrPrefix="";function Qe(n){var r=i.dataAttrPrefix;var s;var a;var o;var l;if(r){r+="-"}s=n.data(r+"event")||null;if(s){if(typeof s==="object"){s=e.extend({},s)}else{s={}}a=s.start;if(a==null){a=s.time}o=s.duration;l=s.stick;delete s.start;delete s.time;delete s.duration;delete s.stick}if(a==null){a=n.data(r+"start")}if(a==null){a=n.data(r+"time")}if(o==null){o=n.data(r+"duration")}if(l==null){l=n.data(r+"stick")}a=a!=null?t.duration(a):null;o=o!=null?t.duration(o):null;l=Boolean(l);return{eventProps:s,startTime:a,duration:o,stick:l}}var Ke=i.DayTableMixin={breakOnWeeks:false,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){var e=this.view;var t=this.start.clone();var i=-1;var n=[];var r=[];var s;var a;var o;while(t.isBefore(this.end)){if(e.isHiddenDay(t)){n.push(i+.5)}else{i++;n.push(i);r.push(t.clone())}t.add(1,"days")}if(this.breakOnWeeks){a=r[0].day();for(s=1;s<r.length;s++){if(r[s].day()==a){break}}o=Math.ceil(r.length/s)}else{o=1;s=r.length}this.dayDates=r;this.dayIndices=n;this.daysPerRow=s;this.rowCnt=o;this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt();this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()},getCellRange:function(e,t){var i=this.getCellDate(e,t);var n=i.clone().add(1,"days");return{start:i,end:n}},getCellDayIndex:function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)},getColDayIndex:function(e){if(this.isRTL){return this.colCnt-1-e}else{return e}},getDateDayIndex:function(e){var t=this.dayIndices;var i=e.diff(this.start,"days");if(i<0){return t[0]-1}else if(i>=t.length){return t[t.length-1]+1}else{return t[i]}},computeColHeadFormat:function(){if(this.rowCnt>1||this.colCnt>10){return"ddd"}else if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},sliceRangeByRow:function(e){var t=this.daysPerRow;var i=this.view.computeDayRange(e);var n=this.getDateDayIndex(i.start);var r=this.getDateDayIndex(i.end.clone().subtract(1,"days"));var s=[];var a;var o,l;var u,d;for(a=0;a<this.rowCnt;a++){o=a*t;l=o+t-1;u=Math.max(n,o);d=Math.min(r,l);u=Math.ceil(u);d=Math.floor(d);if(u<=d){s.push({row:a,firstRowDayIndex:u-o,lastRowDayIndex:d-o,isStart:u===n,isEnd:d===r})}}return s},sliceRangeByDay:function(e){var t=this.daysPerRow;var i=this.view.computeDayRange(e);var n=this.getDateDayIndex(i.start);var r=this.getDateDayIndex(i.end.clone().subtract(1,"days"));var s=[];var a;var o,l;var u;var d,c;for(a=0;a<this.rowCnt;a++){o=a*t;l=o+t-1;for(u=o;u<=l;u++){d=Math.max(n,u);c=Math.min(r,u);d=Math.ceil(d);c=Math.floor(c);if(d<=c){s.push({row:a,firstRowDayIndex:d-o,lastRowDayIndex:c-o,isStart:d===n,isEnd:c===r})}}}return s},renderHeadHtml:function(){var e=this.view;return""+'<div class="fc-row '+e.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.renderHeadTrHtml()+"</thead>"+"</table>"+"</div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return""+"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var e=[];var t,i;for(t=0;t<this.colCnt;t++){i=this.getCellDate(0,t);e.push(this.renderHeadDateCellHtml(i))}return e.join("")},renderHeadDateCellHtml:function(e,t,i){var n=this.view;return""+'<th class="fc-day-header '+n.widgetHeaderClass+" fc-"+B[e.day()]+'"'+(this.rowCnt==1?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(t>1?' colspan="'+t+'"':"")+(i?" "+i:"")+">"+ne(e.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(e){return""+"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):"")+"</tr>"},renderBgIntroHtml:function(e){return this.renderIntroHtml()},renderBgCellsHtml:function(e){var t=[];var i,n;for(i=0;i<this.colCnt;i++){n=this.getCellDate(e,i);t.push(this.renderBgCellHtml(n))}return t.join("")},renderBgCellHtml:function(e,t){var i=this.view;var n=this.getDayClasses(e);n.unshift("fc-day",i.widgetContentClass);return'<td class="'+n.join(" ")+'"'+' data-date="'+e.format("YYYY-MM-DD")+'"'+(t?" "+t:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(e){var t=this.renderIntroHtml();if(t){if(this.isRTL){e.append(t)}else{e.prepend(t)}}}};var Je=i.DayGrid=je.extend(Ke,{numbersVisible:false,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(e){var t=this.view;var i=this.rowCnt;var n=this.colCnt;var r="";var s;var a;for(s=0;s<i;s++){r+=this.renderDayRowHtml(s,e)}this.el.html(r);this.rowEls=this.el.find(".fc-row");this.cellEls=this.el.find(".fc-day");this.rowCoordCache=new Ve({els:this.rowEls,isVertical:true});this.colCoordCache=new Ve({els:this.cellEls.slice(0,this.colCnt),isHorizontal:true});for(s=0;s<i;s++){for(a=0;a<n;a++){t.trigger("dayRender",null,this.getCellDate(s,a),this.getCellEl(s,a))}}},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents(true);var t=this.eventsToSegs(e);this.renderFill("businessHours",t,"bgevent")},renderDayRowHtml:function(e,t){var i=this.view;var n=["fc-row","fc-week",i.widgetContentClass];if(t){n.push("fc-rigid")}return""+'<div class="'+n.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.renderBgTrHtml(e)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table>"+"</div>"+"</div>"},renderNumberTrHtml:function(e){return""+"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):"")+"</tr>"},renderNumberIntroHtml:function(e){return this.renderIntroHtml()},renderNumberCellsHtml:function(e){var t=[];var i,n;for(i=0;i<this.colCnt;i++){n=this.getCellDate(e,i);t.push(this.renderNumberCellHtml(n))}return t.join("")},renderNumberCellHtml:function(e){var t;if(!this.view.dayNumbersVisible){return"<td/>"}t=this.getDayClasses(e);t.unshift("fc-day-number");if(this.view.opt("rendingNumberCellFun")){var i=this.view.opt("rendingNumberCellFun").call(this,e,e.format(),e.date());return'<td class="'+t.join(" ")+'" data-date="'+e.format()+'">'+e.date()+(i?i:"")+"</td>"}else{return""+'<td class="'+t.join(" ")+'" data-date="'+e.format()+'">'+e.date()+"</td>"}},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(e){var t=this.sliceRangeByRow(e);var i,n;for(i=0;i<t.length;i++){n=t[i];if(this.isRTL){n.leftCol=this.daysPerRow-1-n.lastRowDayIndex;n.rightCol=this.daysPerRow-1-n.firstRowDayIndex}else{n.leftCol=n.firstRowDayIndex;n.rightCol=n.lastRowDayIndex}}return t},prepareHits:function(){this.colCoordCache.build();this.rowCoordCache.build();this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear();this.rowCoordCache.clear()},queryHit:function(e,t){var i=this.colCoordCache.getHorizontalIndex(e);var n=this.rowCoordCache.getVerticalIndex(t);if(n!=null&&i!=null){return this.getCellHit(n,i)}},getHitSpan:function(e){return this.getCellRange(e.row,e.col)},getHitEl:function(e){return this.getCellEl(e.row,e.col)},getCellHit:function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}},getCellEl:function(e,t){return this.cellEls.eq(e*this.colCnt+t)},renderDrag:function(e,t){this.renderHighlight(this.eventToSpan(e));if(t&&!t.el.closest(this.el).length){this.renderEventLocationHelper(e,t);this.applyDragOpacity(this.helperEls);return true}},unrenderDrag:function(){this.unrenderHighlight();this.unrenderHelper()},renderEventResize:function(e,t){this.renderHighlight(this.eventToSpan(e));this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight();this.unrenderHelper()},renderHelper:function(t,i){var n=[];var r=this.eventToSegs(t);var s;r=this.renderFgSegEls(r);s=this.renderSegRows(r);this.rowEls.each(function(t,r){var a=e(r);var o=e('<div class="fc-helper-skeleton"><table/></div>');var l;if(i&&i.row===t){l=i.el.position().top}else{l=a.find(".fc-content-skeleton tbody").position().top}o.css("top",l).find("table").append(s[t].tbodyEl);a.append(o);n.push(o[0])});this.helperEls=e(n)},unrenderHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(t,i,n){var r=[];var s,a;var o;i=this.renderFillSegEls(t,i);for(s=0;s<i.length;s++){a=i[s];o=this.renderFillRow(t,a,n);this.rowEls.eq(a.row).append(o);r.push(o[0])}this.elsByFill[t]=e(r);return i},renderFillRow:function(t,i,n){var r=this.colCnt;var s=i.leftCol;var a=i.rightCol+1;var o;var l;n=n||t.toLowerCase();o=e('<div class="fc-'+n+'-skeleton">'+"<table><tr/></table>"+"</div>");l=o.find("tr");if(s>0){l.append('<td colspan="'+s+'"/>')}l.append(i.el.attr("colspan",a-s));if(a<r){l.append('<td colspan="'+(r-a)+'"/>')}this.bookendCells(l);return o}});Je.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover();je.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return je.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var i=e.grep(t,function(e){return e.event.allDay});return je.prototype.renderBgSegs.call(this,i)},renderFgSegs:function(t){var i;t=this.renderFgSegEls(t);i=this.rowStructs=this.renderSegRows(t);this.rowEls.each(function(t,n){e(n).find(".fc-content-skeleton > table").append(i[t].tbodyEl)});return t},unrenderFgSegs:function(){var e=this.rowStructs||[];var t;while(t=e.pop()){t.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(e){var t=[];var i;var n;i=this.groupSegRows(e);for(n=0;n<i.length;n++){t.push(this.renderSegRow(n,i[n]))}return t},fgSegHtml:function(e,t){var i=this.view;var n=e.event;var r=i.isEventDraggable(n);var s=!t&&n.allDay&&e.isStart&&i.isEventResizableFromStart(n);var a=!t&&n.allDay&&e.isEnd&&i.isEventResizableFromEnd(n);var o=this.getSegClasses(e,r,s||a);var l=se(this.getSegSkinCss(e));var u="";var d;var c;o.unshift("fc-day-grid-event","fc-h-event");if(e.isStart){d=this.getEventTimeText(n);if(d){u='<span class="fc-time">'+ne(d)+"</span>"}}c='<span class="fc-title">'+(ne(n.title||"")||"&nbsp;")+"</span>";return'<a class="'+o.join(" ")+'"'+(n.url?' href="'+ne(n.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(this.isRTL?c+" "+u:u+" "+c)+"</div>"+(s?'<div class="fc-resizer fc-start-resizer" />':"")+(a?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(t,i){var n=this.colCnt;var r=this.buildSegLevels(i);var s=Math.max(1,r.length);var a=e("<tbody/>");var o=[];var l=[];var u=[];var d,c;var f;var h;var v,g;var p;function m(t){while(f<t){p=(u[d-1]||[])[f];if(p){p.attr("rowspan",parseInt(p.attr("rowspan")||1,10)+1)}else{p=e("<td/>");h.append(p)}l[d][f]=p;u[d][f]=p;f++}}for(d=0;d<s;d++){c=r[d];f=0;h=e("<tr/>");o.push([]);l.push([]);u.push([]);if(c){for(v=0;v<c.length;v++){g=c[v];m(g.leftCol);p=e('<td class="fc-event-container"/>').append(g.el);if(g.leftCol!=g.rightCol){p.attr("colspan",g.rightCol-g.leftCol+1)}else{u[d][f]=p}while(f<=g.rightCol){l[d][f]=p;o[d][f]=g;f++}h.append(p)}}m(n);this.bookendCells(h);a.append(h)}return{row:t,tbodyEl:a,cellMatrix:l,segMatrix:o,segLevels:r,segs:i}},buildSegLevels:function(e){var t=[];var i,n;var r;this.sortEventSegs(e);for(i=0;i<e.length;i++){n=e[i];for(r=0;r<t.length;r++){if(!et(n,t[r])){break}}n.level=r;(t[r]||(t[r]=[])).push(n)}for(r=0;r<t.length;r++){t[r].sort(tt)}return t},groupSegRows:function(e){var t=[];var i;for(i=0;i<this.rowCnt;i++){t.push([])}for(i=0;i<e.length;i++){t[e[i].row].push(e[i])}return t}});function et(e,t){var i,n;for(i=0;i<t.length;i++){n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol){return true}}return false}function tt(e,t){return e.leftCol-t.leftCol}Je.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(e){var t=this.rowStructs||[];var i;var n;for(i=0;i<t.length;i++){this.unlimitRow(i);if(!e){n=false}else if(typeof e==="number"){n=e}else{n=this.computeRowLevelLimit(i)}if(n!==false){this.limitRow(i,n)}}},computeRowLevelLimit:function(t){var i=this.rowEls.eq(t);var n=i.height();var r=this.rowStructs[t].tbodyEl.children();var s,a;var o;function l(t,i){o=Math.max(o,e(i).outerHeight())}for(s=0;s<r.length;s++){a=r.eq(s).removeClass("fc-limited");o=0;a.find("> td > :first-child").each(l);if(a.position().top+o>n){return s}}return false},limitRow:function(t,i){var n=this;var r=this.rowStructs[t];var s=[];var a=0;var o;var l;var u;var d,c;var f;var h;var v;var g,p;var m;var y;var w,S,b;function E(r){while(a<r){f=n.getCellSegs(t,a,i);if(f.length){g=l[i-1][a];b=n.renderMoreLink(t,a,f);S=e("<div/>").append(b);g.append(S);s.push(S[0])}a++}}if(i&&i<r.segLevels.length){o=r.segLevels[i-1];l=r.cellMatrix;u=r.tbodyEl.children().slice(i).addClass("fc-limited").get();for(d=0;d<o.length;d++){c=o[d];E(c.leftCol);v=[];h=0;while(a<=c.rightCol){f=this.getCellSegs(t,a,i);v.push(f);h+=f.length;a++}if(h){g=l[i-1][c.leftCol];p=g.attr("rowspan")||1;m=[];for(y=0;y<v.length;y++){w=e('<td class="fc-more-cell"/>').attr("rowspan",p);f=v[y];b=this.renderMoreLink(t,c.leftCol+y,[c].concat(f));S=e("<div/>").append(b);w.append(S);m.push(w[0]);s.push(w[0])}g.addClass("fc-limited").after(e(m));u.push(g[0])}}E(this.colCnt);r.moreEls=e(s);r.limitedEls=e(u)}},unlimitRow:function(e){var t=this.rowStructs[e];if(t.moreEls){t.moreEls.remove();t.moreEls=null}if(t.limitedEls){t.limitedEls.removeClass("fc-limited");t.limitedEls=null}},renderMoreLink:function(t,i,n){var r=this;var s=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(a){var o=s.opt("eventLimitClick");var l=r.getCellDate(t,i);var u=e(this);var d=r.getCellEl(t,i);var c=r.getCellSegs(t,i);var f=r.resliceDaySegs(c,l);var h=r.resliceDaySegs(n,l);if(typeof o==="function"){o=s.trigger("eventLimitClick",null,{date:l,dayEl:d,moreEl:u,segs:f,hiddenSegs:h},a)}if(o==="popover"){r.showSegPopover(t,i,u,f)}else if(typeof o==="string"){s.calendar.zoomTo(l,o)}})},showSegPopover:function(e,t,i,n){var r=this;var s=this.view;var a=i.parent();var o;var l;if(this.rowCnt==1){o=s.el}else{o=this.rowEls.eq(e)}l={className:"fc-more-popover",content:this.renderSegPopoverContent(e,t,n),parentEl:this.el,top:o.offset().top,autoHide:true,viewportConstrain:s.opt("popoverViewportConstrain"),hide:function(){r.segPopover.removeElement();r.segPopover=null;r.popoverSegs=null}};if(this.isRTL){l.right=a.offset().left+a.outerWidth()+1}else{l.left=a.offset().left-1}this.segPopover=new Pe(l);this.segPopover.show()},renderSegPopoverContent:function(t,i,n){var r=this.view;var s=r.opt("theme");var a=this.getCellDate(t,i).format(r.opt("dayPopoverFormat"));var o=e('<div class="fc-header '+r.widgetHeaderClass+'">'+'<span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+ne(a)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+r.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>");var l=o.find(".fc-event-container");var u;n=this.renderFgSegEls(n,true);this.popoverSegs=n;for(u=0;u<n.length;u++){this.prepareHits();n[u].hit=this.getCellHit(t,i);this.releaseHits();l.append(n[u].el)}return o},resliceDaySegs:function(t,i){var n=e.map(t,function(e){return e.event});var r=i.clone();var s=r.clone().add(1,"days");var a={start:r,end:s};t=this.eventsToSegs(n,function(e){var t=N(e,a);return t?[t]:[]});this.sortEventSegs(t);return t},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");if(typeof t==="function"){return t(e)}else{return"+"+e+" "+t}},getCellSegs:function(e,t,i){var n=this.rowStructs[e].segMatrix;var r=i||0;var s=[];var a;while(r<n.length){a=n[r][t];if(a){s.push(a)}r++}return s}});var it=i.TimeGrid=je.extend(Ke,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){je.apply(this,arguments);this.processOptions()},renderDates:function(){this.el.html(this.renderHtml());this.colEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.colCoordCache=new Ve({els:this.colEls,isHorizontal:true});this.slatCoordCache=new Ve({els:this.slatEls,isVertical:true});this.renderContentSkeleton()},renderHtml:function(){return""+'<div class="fc-bg">'+"<table>"+this.renderBgTrHtml(0)+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.renderSlatRowHtml()+"</table>"+"</div>"},renderSlatRowHtml:function(){var e=this.view;var i=this.isRTL;var n="";var r=t.duration(+this.minTime);var s;var a;var o;while(r<this.maxTime){s=this.start.clone().time(r);a=le(Y(r,this.labelInterval));o='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(a?"<span>"+ne(s.format(this.labelFormat))+"</span>":"")+"</td>";n+='<tr data-time="'+s.format("HH:mm:ss")+'"'+(a?"":' class="fc-minor"')+">"+(!i?o:"")+'<td class="'+e.widgetContentClass+'"/>'+(i?o:"")+"</tr>";r.add(this.slotDuration)}return n},processOptions:function(){var i=this.view;var n=i.opt("slotDuration");var r=i.opt("snapDuration");var s;n=t.duration(n);r=r?t.duration(r):n;this.slotDuration=n;this.snapDuration=r;this.snapsPerSlot=n/r;this.minResizeDuration=r;this.minTime=t.duration(i.opt("minTime"));this.maxTime=t.duration(i.opt("maxTime"));s=i.opt("slotLabelFormat");if(e.isArray(s)){s=s[s.length-1]}this.labelFormat=s||i.opt("axisFormat")||i.opt("smallTimeFormat");s=i.opt("slotLabelInterval");this.labelInterval=s?t.duration(s):this.computeLabelInterval(n)},computeLabelInterval:function(e){var i;var n;var r;for(i=kt.length-1;i>=0;i--){n=t.duration(kt[i]);r=Y(n,e);if(le(r)&&r>1){return n}}return t.duration(e)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return true},prepareHits:function(){this.colCoordCache.build();this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(e,t){var i=this.snapsPerSlot;var n=this.colCoordCache;var r=this.slatCoordCache;var s=n.getHorizontalIndex(e);var a=r.getVerticalIndex(t);if(s!=null&&a!=null){var o=r.getTopOffset(a);var l=r.getHeight(a);var u=(t-o)/l;var d=Math.floor(u*i);var c=a*i+d;var f=o+d/i*l;var h=o+(d+1)/i*l;return{col:s,snap:c,component:this,left:n.getLeftOffset(s),right:n.getRightOffset(s),top:f,bottom:h}}},getHitSpan:function(e){var t=this.getCellDate(0,e.col);var i=this.computeSnapTime(e.snap);var n;t.time(i);n=t.clone().add(this.snapDuration);return{start:t,end:n}},getHitEl:function(e){return this.colEls.eq(e.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(e){return t.duration(this.minTime+this.snapDuration*e)},spanToSegs:function(e){var t=this.sliceRangeByTimes(e);var i;for(i=0;i<t.length;i++){if(this.isRTL){t[i].col=this.daysPerRow-1-t[i].dayIndex}else{t[i].col=t[i].dayIndex}}return t},sliceRangeByTimes:function(e){var t=[];var i;var n;var r;var s;for(n=0;n<this.daysPerRow;n++){r=this.dayDates[n].clone();s={start:r.clone().time(this.minTime),end:r.clone().time(this.maxTime)};i=N(e,s);if(i){i.dayIndex=n;t.push(i)}}return t},updateSize:function(e){this.slatCoordCache.build();if(e){this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))}},computeDateTop:function(e,i){return this.computeTimeTop(t.duration(e-i.clone().stripTime()))},computeTimeTop:function(e){var t=this.slatEls.length;var i=(e-this.minTime)/this.slotDuration;var n;var r;i=Math.max(0,i);i=Math.min(t,i);n=Math.floor(i);n=Math.min(n,t-1);r=i-n;return this.slatCoordCache.getTopPosition(n)+this.slatCoordCache.getHeight(n)*r},renderDrag:function(e,t){if(t){this.renderEventLocationHelper(e,t);for(var i=0;i<this.helperSegs.length;i++){this.applyDragOpacity(this.helperSegs[i].el)}return true}else{this.renderHighlight(this.eventToSpan(e))}},unrenderDrag:function(){this.unrenderHelper();this.unrenderHighlight()},renderEventResize:function(e,t){this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,t){this.renderHelperSegs(this.eventToSegs(e),t)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents();var t=this.eventsToSegs(e);this.renderBusinessSegs(t)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(t){var i=this.spanToSegs({start:t,end:t});var n=this.computeDateTop(t,t);var r=[];var s;for(s=0;s<i.length;s++){r.push(e('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",n).appendTo(this.colContainerEls.eq(i[s].col))[0])}if(i.length>0){r.push(e('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",n).appendTo(this.el.find(".fc-content-skeleton"))[0])}this.nowIndicatorEls=e(r)},unrenderNowIndicator:function(){if(this.nowIndicatorEls){this.nowIndicatorEls.remove();this.nowIndicatorEls=null}},renderSelection:function(e){if(this.view.opt("selectHelper")){this.renderEventLocationHelper(e)}else{this.renderHighlight(e)}},unrenderSelection:function(){this.unrenderHelper();this.unrenderHighlight()},renderHighlight:function(e){this.renderHighlightSegs(this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});it.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){
var t="";var i;var n;for(i=0;i<this.colCnt;i++){t+="<td>"+'<div class="fc-content-col">'+'<div class="fc-event-container fc-helper-container"></div>'+'<div class="fc-event-container"></div>'+'<div class="fc-highlight-container"></div>'+'<div class="fc-bgevent-container"></div>'+'<div class="fc-business-container"></div>'+"</div>"+"</td>"}n=e('<div class="fc-content-skeleton">'+"<table>"+"<tr>"+t+"</tr>"+"</table>"+"</div>");this.colContainerEls=n.find(".fc-content-col");this.helperContainerEls=n.find(".fc-helper-container");this.fgContainerEls=n.find(".fc-event-container:not(.fc-helper-container)");this.bgContainerEls=n.find(".fc-bgevent-container");this.highlightContainerEls=n.find(".fc-highlight-container");this.businessContainerEls=n.find(".fc-business-container");this.bookendCells(n.find("tr"));this.el.append(n)},renderFgSegs:function(e){e=this.renderFgSegsIntoContainers(e,this.fgContainerEls);this.fgSegs=e;return e},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(e,t){var i,n;var r;e=this.renderFgSegsIntoContainers(e,this.helperContainerEls);for(i=0;i<e.length;i++){n=e[i];if(t&&t.col===n.col){r=t.el;n.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")})}}this.helperSegs=e},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(e){e=this.renderFillSegEls("bgEvent",e);this.updateSegVerticals(e);this.attachSegsByCol(this.groupSegsByCol(e),this.bgContainerEls);this.bgSegs=e;return e},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(e){e=this.renderFillSegEls("highlight",e);this.updateSegVerticals(e);this.attachSegsByCol(this.groupSegsByCol(e),this.highlightContainerEls);this.highlightSegs=e},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(e){e=this.renderFillSegEls("businessHours",e);this.updateSegVerticals(e);this.attachSegsByCol(this.groupSegsByCol(e),this.businessContainerEls);this.businessSegs=e},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(e){var t=[];var i;for(i=0;i<this.colCnt;i++){t.push([])}for(i=0;i<e.length;i++){t[e[i].col].push(e[i])}return t},attachSegsByCol:function(e,t){var i;var n;var r;for(i=0;i<this.colCnt;i++){n=e[i];for(r=0;r<n.length;r++){t.eq(i).append(n[r].el)}}},unrenderNamedSegs:function(e){var t=this[e];var i;if(t){for(i=0;i<t.length;i++){t[i].el.remove()}this[e]=null}},renderFgSegsIntoContainers:function(e,t){var i;var n;e=this.renderFgSegEls(e);i=this.groupSegsByCol(e);for(n=0;n<this.colCnt;n++){this.updateFgSegCoords(i[n])}this.attachSegsByCol(i,t);return e},fgSegHtml:function(e,t){var i=this.view;var n=e.event;var r=i.isEventDraggable(n);var s=!t&&e.isStart&&i.isEventResizableFromStart(n);var a=!t&&e.isEnd&&i.isEventResizableFromEnd(n);var o=this.getSegClasses(e,r,s||a);var l=se(this.getSegSkinCss(e));var u;var d;var c;o.unshift("fc-time-grid-event","fc-v-event");if(i.isMultiDayEvent(n)){if(e.isStart||e.isEnd){u=this.getEventTimeText(e);d=this.getEventTimeText(e,"LT");c=this.getEventTimeText(e,null,false)}}else{u=this.getEventTimeText(n);d=this.getEventTimeText(n,"LT");c=this.getEventTimeText(n,null,false)}return'<a class="'+o.join(" ")+'"'+(n.url?' href="'+ne(n.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(u?'<div class="fc-time"'+' data-start="'+ne(c)+'"'+' data-full="'+ne(d)+'"'+">"+"<span>"+ne(u)+"</span>"+"</div>":"")+(n.title?'<div class="fc-title">'+ne(n.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(a?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(e){this.computeSegVerticals(e);this.assignSegVerticals(e)},computeSegVerticals:function(e){var t,i;for(t=0;t<e.length;t++){i=e[t];i.top=this.computeDateTop(i.start,i.start);i.bottom=this.computeDateTop(i.end,i.start)}},assignSegVerticals:function(e){var t,i;for(t=0;t<e.length;t++){i=e[t];i.el.css(this.generateSegVerticalCss(i))}},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},updateFgSegCoords:function(e){this.computeSegVerticals(e);this.computeFgSegHorizontals(e);this.assignSegVerticals(e);this.assignFgSegHorizontals(e)},computeFgSegHorizontals:function(e){var t;var i;var n;this.sortEventSegs(e);t=nt(e);rt(t);if(i=t[0]){for(n=0;n<i.length;n++){st(i[n])}for(n=0;n<i.length;n++){this.computeFgSegForwardBack(i[n],0,0)}}},computeFgSegForwardBack:function(e,t,i){var n=e.forwardSegs;var r;if(e.forwardCoord===undefined){if(!n.length){e.forwardCoord=1}else{this.sortForwardSegs(n);this.computeFgSegForwardBack(n[0],t+1,i);e.forwardCoord=n[0].backwardCoord}e.backwardCoord=e.forwardCoord-(e.forwardCoord-i)/(t+1);for(r=0;r<n.length;r++){this.computeFgSegForwardBack(n[r],0,e.forwardCoord)}}},sortForwardSegs:function(e){e.sort(ue(this,"compareForwardSegs"))},compareForwardSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)},assignFgSegHorizontals:function(e){var t,i;for(t=0;t<e.length;t++){i=e[t];i.el.css(this.generateFgSegHorizontalCss(i));if(i.bottom-i.top<30){i.el.addClass("fc-short")}}},generateFgSegHorizontalCss:function(e){var t=this.view.opt("slotEventOverlap");var i=e.backwardCoord;var n=e.forwardCoord;var r=this.generateSegVerticalCss(e);var s;var a;if(t){n=Math.min(1,i+(n-i)*2)}if(this.isRTL){s=1-n;a=i}else{s=i;a=1-n}r.zIndex=e.level+1;r.left=s*100+"%";r.right=a*100+"%";if(t&&e.forwardPressure){r[this.isRTL?"marginLeft":"marginRight"]=10*2}return r}});function nt(e){var t=[];var i,n;var r;for(i=0;i<e.length;i++){n=e[i];for(r=0;r<t.length;r++){if(!at(n,t[r]).length){break}}n.level=r;(t[r]||(t[r]=[])).push(n)}return t}function rt(e){var t,i;var n,r;var s;for(t=0;t<e.length;t++){i=e[t];for(n=0;n<i.length;n++){r=i[n];r.forwardSegs=[];for(s=t+1;s<e.length;s++){at(r,e[s],r.forwardSegs)}}}}function st(e){var t=e.forwardSegs;var i=0;var n,r;if(e.forwardPressure===undefined){for(n=0;n<t.length;n++){r=t[n];st(r);i=Math.max(i,1+r.forwardPressure)}e.forwardPressure=i}}function at(e,t,i){i=i||[];for(var n=0;n<t.length;n++){if(ot(e,t[n])){i.push(t[n])}}return i}function ot(e,t){return e.bottom>t.top&&e.top<t.bottom}var lt=i.View=Ne.extend({type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:false,isEventsRendered:false,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:false,isSelected:false,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(e,i,n,r){this.calendar=e;this.type=this.name=i;this.options=n;this.intervalDuration=r||t.duration(1,"day");this.nextDayThreshold=t.duration(this.opt("nextDayThreshold"));this.initThemingProps();this.initHiddenDays();this.isRTL=this.opt("isRTL");this.eventOrderSpecs=I(this.opt("eventOrder"));this.documentMousedownProxy=ue(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(e){return this.options[e]},trigger:function(e,t){var i=this.calendar;return i.trigger.apply(i,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(e){this.setRange(this.computeRange(e))},setRange:function(t){e.extend(this,t);this.updateTitle()},computeRange:function(e){var t=O(this.intervalDuration);var i=e.clone().startOf(t);var n=i.clone().add(this.intervalDuration);var r,s;if(/year|month|week|day/.test(t)){i.stripTime();n.stripTime()}else{if(!i.hasTime()){i=this.calendar.time(0)}if(!n.hasTime()){n=this.calendar.time(0)}}r=i.clone();r=this.skipHiddenDays(r);s=n.clone();s=this.skipHiddenDays(s,-1,true);return{intervalUnit:t,intervalStart:i,intervalEnd:n,start:r,end:s}},computePrevDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(e,t){if(this.intervalDuration.as("days")<=1){if(this.isHiddenDay(e)){e=this.skipHiddenDays(e,t);e.startOf("day")}}return e},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){if(this.intervalUnit=="year"){return"YYYY"}else if(this.intervalUnit=="month"){return this.opt("monthYearFormat")}else if(this.intervalDuration.as("days")>1){return"ll"}else{return"LL"}},formatRange:function(e,t,i){var n=e.end;if(!n.hasTime()){n=n.clone().subtract(1)}return xe(e.start,n,t,i,this.opt("isRTL"))},setElement:function(e){this.el=e;this.bindGlobalHandlers()},removeElement:function(){this.clear();if(this.isSkeletonRendered){this.unrenderSkeleton();this.isSkeletonRendered=false}this.unbindGlobalHandlers();this.el.remove()},display:function(t){var i=this;var n=null;if(this.displaying){n=this.queryScroll()}this.calendar.freezeContentHeight();return this.clear().then(function(){return i.displaying=e.when(i.displayView(t)).then(function(){i.forceScroll(i.computeInitialScroll(n));i.calendar.unfreezeContentHeight();i.triggerRender()})})},clear:function(){var t=this;var i=this.displaying;if(i){return i.then(function(){t.displaying=null;t.clearEvents();return t.clearView()})}else{return e.when()}},displayView:function(e){if(!this.isSkeletonRendered){this.renderSkeleton();this.isSkeletonRendered=true}if(e){this.setDate(e)}if(this.render){this.render()}this.renderDates();this.updateSize();this.renderBusinessHours();this.startNowIndicator()},clearView:function(){this.unselect();this.stopNowIndicator();this.triggerUnrender();this.unrenderBusinessHours();this.unrenderDates();if(this.destroy){this.destroy()}},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){e(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){e(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header";this.widgetContentClass=e+"-widget-content";this.highlightStateClass=e+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var e=this;var i;var n;var r;if(this.opt("nowIndicator")){i=this.getNowIndicatorUnit();if(i){n=ue(this,"updateNowIndicator");this.initialNowDate=this.calendar.getNow();this.initialNowQueriedMs=+new Date;this.renderNowIndicator(this.initialNowDate);this.isNowIndicatorRendered=true;r=this.initialNowDate.clone().startOf(i).add(1,i)-this.initialNowDate;this.nowIndicatorTimeoutID=setTimeout(function(){e.nowIndicatorTimeoutID=null;n();r=+t.duration(1,i);r=Math.max(100,r);e.nowIndicatorIntervalID=setInterval(n,r)},r)}}},updateNowIndicator:function(){if(this.isNowIndicatorRendered){this.unrenderNowIndicator();this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs))}},stopNowIndicator:function(){if(this.isNowIndicatorRendered){if(this.nowIndicatorTimeoutID){clearTimeout(this.nowIndicatorTimeoutID);this.nowIndicatorTimeoutID=null}if(this.nowIndicatorIntervalID){clearTimeout(this.nowIndicatorIntervalID);this.nowIndicatorIntervalID=null}this.unrenderNowIndicator();this.isNowIndicatorRendered=false}},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},updateSize:function(e){var t;if(e){t=this.queryScroll()}this.updateHeight(e);this.updateWidth(e);this.updateNowIndicator();if(e){this.setScroll(t)}},updateWidth:function(e){},updateHeight:function(e){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(e,t){},computeScrollerHeight:function(e){var t=this.scrollerEl;var i;var n;i=this.el.add(t);i.css({position:"relative",left:-1});n=this.el.outerHeight()-t.height();i.css({position:"",left:""});return e-n},computeInitialScroll:function(e){return 0},queryScroll:function(){if(this.scrollerEl){return this.scrollerEl.scrollTop()}},setScroll:function(e){if(this.scrollerEl){return this.scrollerEl.scrollTop(e)}},forceScroll:function(e){var t=this;this.setScroll(e);setTimeout(function(){t.setScroll(e)},0)},displayEvents:function(e){var t=this.queryScroll();this.clearEvents();this.renderEvents(e);this.isEventsRendered=true;this.setScroll(t);this.triggerEventRender()},clearEvents:function(){var e;if(this.isEventsRendered){e=this.queryScroll();this.triggerEventUnrender();if(this.destroyEvents){this.destroyEvents()}this.unrenderEvents();this.setScroll(e);this.isEventsRendered=false}},renderEvents:function(e){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(e){this.trigger("eventAfterRender",e.event,e.event,e.el)});this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)})},resolveEventEl:function(t,i){var n=this.trigger("eventRender",t,t,i);if(n===false){i=null}else if(n&&n!==true){i=e(n)}return i},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var i=this.getEventSegs();var n;for(n=0;n<i.length;n++){if(!t||i[n].event._id===t._id){if(i[n].el){e.call(this,i[n])}}}},getEventSegs:function(){return[]},isEventDraggable:function(e){var t=e.source||{};return ie(e.startEditable,t.startEditable,this.opt("eventStartEditable"),e.editable,t.editable,this.opt("editable"))},reportEventDrop:function(e,t,i,n,r){var s=this.calendar;var a=s.mutateEvent(e,t,i);var o=function(){a.undo();s.reportEventChange()};this.triggerEventDrop(e,a.dateDelta,o,n,r);s.reportEventChange()},triggerEventDrop:function(e,t,i,n,r){this.trigger("eventDrop",n[0],e,t,i,r,{})},reportExternalDrop:function(t,i,n,r,s){var a=t.eventProps;var o;var l;if(a){o=e.extend({},a,i);l=this.calendar.renderEvent(o,t.stick)[0]}this.triggerExternalDrop(l,i,n,r,s)},triggerExternalDrop:function(e,t,i,n,r){this.trigger("drop",i[0],t.start,n,r);if(e){this.trigger("eventReceive",null,e)}},renderDrag:function(e,t){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return ie(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportEventResize:function(e,t,i,n,r){var s=this.calendar;var a=s.mutateEvent(e,t,i);var o=function(){a.undo();s.reportEventChange()};this.triggerEventResize(e,a.durationDelta,o,n,r);s.reportEventChange()},triggerEventResize:function(e,t,i,n,r){this.trigger("eventResize",n[0],e,t,i,r,{})},select:function(e,t){this.unselect(t);this.renderSelection(e);this.reportSelection(e,t)},renderSelection:function(e){},reportSelection:function(e,t){this.isSelected=true;this.triggerSelect(e,t)},triggerSelect:function(e,t){this.trigger("select",null,this.calendar.applyTimezone(e.start),this.calendar.applyTimezone(e.end),t)},unselect:function(e){if(this.isSelected){this.isSelected=false;if(this.destroySelection){this.destroySelection()}this.unrenderSelection();this.trigger("unselect",null,e)}},unrenderSelection:function(){},documentMousedown:function(t){var i;if(this.isSelected&&this.opt("unselectAuto")&&H(t)){i=this.opt("unselectCancel");if(!i||!e(t.target).closest(i).length){this.unselect(t)}}},triggerDayClick:function(e,t,i){this.trigger("dayClick",t,this.calendar.applyTimezone(e.start),i)},initHiddenDays:function(){var t=this.opt("hiddenDays")||[];var i=[];var n=0;var r;if(this.opt("weekends")===false){t.push(0,6)}for(r=0;r<7;r++){if(!(i[r]=e.inArray(r,t)!==-1)){n++}}if(!n){throw"invalid hiddenDays"}this.isHiddenDayHash=i},isHiddenDay:function(e){if(t.isMoment(e)){e=e.day()}return this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,i){var n=e.clone();t=t||1;while(this.isHiddenDayHash[(n.day()+(i?t:0)+7)%7]){n.add(t,"days")}return n},computeDayRange:function(e){var t=e.start.clone().stripTime();var i=e.end;var n=null;var r;if(i){n=i.clone().stripTime();r=+i.time();if(r&&r>=this.nextDayThreshold){n.add(1,"days")}}if(!i||n<=t){n=t.clone().add(1,"days")}return{start:t,end:n}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return t.end.diff(t.start,"days")>1}});var ut=i.Calendar=Ne.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:dt,initialize:function(){},initOptions:function(e){var t,i;var n,r;e=a(e);t=e.lang;i=ct[t];if(!i){t=ut.defaults.lang;i=ct[t]||{}}n=ie(e.isRTL,i.isRTL,ut.defaults.isRTL);r=n?ut.rtlDefaults:{};this.dirDefaults=r;this.langDefaults=i;this.overrides=e;this.options=s([ut.defaults,r,i,e]);gt(this.options);this.viewSpecCache={}},getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(t){var n;var r;var s;if(e.inArray(t,L)!=-1){n=this.header.getViewsWithButtons();e.each(i.views,function(e){n.push(e)});for(r=0;r<n.length;r++){s=this.getViewSpec(n[r]);if(s){if(s.singleUnit==t){return s}}}}},buildViewSpec:function(e){var i=this.overrides.views||{};var r=[];var a=[];var o=[];var l=e;var u;var d;var c;var f;while(l){u=n[l];d=i[l];l=null;if(typeof u==="function"){u={class:u}}if(u){r.unshift(u);a.unshift(u.defaults||{});c=c||u.duration;l=l||u.type}if(d){o.unshift(d);c=c||d.duration;l=l||d.type}}u=$(r);u.type=e;if(!u["class"]){return false}if(c){c=t.duration(c);if(c.valueOf()){u.duration=c;f=O(c);if(c.as(f)===1){u.singleUnit=f;o.unshift(i[f]||{})}}}u.defaults=s(a);u.overrides=s(o);this.buildViewSpecOptions(u);this.buildViewSpecButtonText(u,e);return u},buildViewSpecOptions:function(e){e.options=s([ut.defaults,e.defaults,this.dirDefaults,this.langDefaults,this.overrides,e.overrides]);gt(e.options)},buildViewSpecButtonText:function(e,t){function i(i){var n=i.buttonText||{};return n[t]||(e.singleUnit?n[e.singleUnit]:null)}e.buttonTextOverride=i(this.overrides)||e.overrides.buttonText;e.buttonTextDefault=i(this.langDefaults)||i(this.dirDefaults)||e.defaults.buttonText||i(ut.defaults)||(e.duration?this.humanizeDuration(e.duration):null)||t},instantiateView:function(e){var t=this.getViewSpec(e);return new t["class"](this,e,t.options,t.duration)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))},pushLoading:function(){if(!this.loadingLevel++){this.trigger("loading",null,true,this.view)}},popLoading:function(){if(!--this.loadingLevel){this.trigger("loading",null,false,this.view)}},buildSelectSpan:function(e,t){var i=this.moment(e).stripZone();var n;if(t){n=this.moment(t).stripZone()}else if(i.hasTime()){n=i.clone().add(this.defaultTimedEventDuration)}else{n=i.clone().add(this.defaultAllDayEventDuration)}return{start:i,end:n}}});ut.mixin(Ge);function dt(n,r){var s=this;s.initOptions(r||{});var a=this.options;s.render=D;s.destroy=H;s.refetchEvents=z;s.reportEvents=G;s.reportEventChange=P;s.rerenderEvents=M;s.changeView=x;s.select=_;s.unselect=A;s.prev=Y;s.next=W;s.prevYear=j;s.nextYear=Z;s.today=U;s.gotoDate=q;s.incrementDate=$;s.zoomTo=Q;s.getDate=K;s.getCalendar=te;s.getView=ie;s.option=ne;s.trigger=re;var o=X(pt(a.lang));if(a.monthNames){o._months=a.monthNames}if(a.monthNamesShort){o._monthsShort=a.monthNamesShort}if(a.dayNames){o._weekdays=a.dayNames}if(a.dayNamesShort){o._weekdaysShort=a.dayNamesShort}if(a.firstDay!=null){var l=X(o._week);l.dow=a.firstDay;o._week=l}o._fullCalendar_weekCalc=function(e){if(typeof e==="function"){return e}else if(e==="local"){return e}else if(e==="iso"||e==="ISO"){return"ISO"}}(a.weekNumberCalculation);s.defaultAllDayEventDuration=t.duration(a.defaultAllDayEventDuration);s.defaultTimedEventDuration=t.duration(a.defaultTimedEventDuration);s.moment=function(){var e;if(a.timezone==="local"){e=i.moment.apply(null,arguments);if(e.hasTime()){e.local()}}else if(a.timezone==="UTC"){e=i.moment.utc.apply(null,arguments)}else{e=i.moment.parseZone.apply(null,arguments)}if("_locale"in e){e._locale=o}else{e._lang=o}return e};s.getIsAmbigTimezone=function(){return a.timezone!=="local"&&a.timezone!=="UTC"};s.applyTimezone=function(e){if(!e.hasTime()){return e.clone()}var t=s.moment(e.toArray());var i=e.time()-t.time();var n;if(i){n=t.clone().add(i);if(e.time()-n.time()===0){t=n}}return t};s.getNow=function(){var e=a.now;if(typeof e==="function"){e=e()}return s.moment(e).stripZone()};s.getEventEnd=function(e){if(e.end){return e.end.clone()}else{return s.getDefaultEventEnd(e.allDay,e.start)}};s.getDefaultEventEnd=function(e,t){var i=t.clone();if(e){i.stripTime().add(s.defaultAllDayEventDuration)}else{i.add(s.defaultTimedEventDuration)}if(s.getIsAmbigTimezone()){i.stripZone()}return i};s.humanizeDuration=function(e){return(e.locale||e.lang).call(e,a.lang).humanize()};St.call(s,a);var u=s.isFetchNeeded;var d=s.fetchEvents;var c=n[0];var f;var h;var v;var g;var p;var m={};var y;var w;var S=0;var b=[];var E;if(a.defaultDate!=null){E=s.moment(a.defaultDate).stripZone()}else{E=s.getNow()}function D(){if(!v){C()}else if(T()){k();x()}}function C(){g=a.theme?"ui":"fc";n.addClass("fc");if(a.isRTL){n.addClass("fc-rtl")}else{n.addClass("fc-ltr")}if(a.theme){n.addClass("ui-widget")}else{n.addClass("fc-unthemed")}v=e("<div class='fc-view-container'/>").prependTo(n);f=s.header=new mt(s,a);h=f.render();if(h){n.prepend(h)}x(a.defaultView);if(a.handleWindowResize){w=de(F,a.windowResizeDelay);e(window).resize(w)}}function H(){if(p){p.removeElement()}f.removeElement();v.remove();n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");if(w){e(window).unbind("resize",w)}}function T(){return n.is(":visible")}function x(t){S++;if(p&&t&&p.type!==t){f.deactivateButton(p.type);J();p.removeElement();p=s.view=null}if(!p&&t){p=s.view=m[t]||(m[t]=s.instantiateView(t));p.setElement(e("<div class='fc-view fc-"+t+"-view' />").appendTo(v));f.activateButton(t)}if(p){E=p.massageCurrentDate(E);if(!p.displaying||!E.isWithin(p.intervalStart,p.intervalEnd)){if(T()){p.display(E);ee();V();O();B()}}}ee();S--}s.getSuggestedViewHeight=function(){if(y===undefined){k()}return y};s.isHeightAuto=function(){return a.contentHeight==="auto"||a.height==="auto"};function R(e){if(T()){if(e){I()}S++;p.updateSize(true);S--;return true}}function k(){if(T()){I()}}function I(){if(typeof a.contentHeight==="number"){y=a.contentHeight}else if(typeof a.height==="number"){y=a.height-(h?h.outerHeight(true):0)}else{y=Math.round(v.width()/Math.max(a.aspectRatio,.5))}}function F(e){if(!S&&e.target===window&&p.start){if(R(true)){p.trigger("windowResize",c)}}}function z(){N();L()}function M(){if(T()){J();p.displayEvents(b);ee()}}function N(){J();p.clearEvents();ee()}function B(){if(!a.lazyFetching||u(p.start,p.end)){L()}else{M()}}function L(){d(p.start,p.end)}function G(e){b=e;M()}function P(){M()}function V(){f.updateTitle(p.title)}function O(){var e=s.getNow();if(e.isWithin(p.intervalStart,p.intervalEnd)){f.disableButton("today")}else{f.enableButton("today")}}function _(e,t){p.select(s.buildSelectSpan.apply(s,arguments))}function A(){if(p){p.unselect()}}function Y(){E=p.computePrevDate(E);x()}function W(){E=p.computeNextDate(E);x()}function j(){E.add(-1,"years");x()}function Z(){E.add(1,"years");x()}function U(){E=s.getNow();x()}function q(e){E=s.moment(e).stripZone();x()}function $(e){E.add(t.duration(e));x()}function Q(e,t){var i;t=t||"day";i=s.getViewSpec(t)||s.getUnitViewSpec(t);E=e.clone();x(i?i.type:null)}function K(){return s.applyTimezone(E)}s.freezeContentHeight=J;s.unfreezeContentHeight=ee;function J(){v.css({width:"100%",height:v.height(),overflow:"hidden"})}function ee(){v.css({width:"",height:"",overflow:""})}function te(){return s}function ie(){return p}function ne(e,t){if(t===undefined){return a[e]}if(e=="height"||e=="contentHeight"||e=="aspectRatio"){a[e]=t;R(true)}}function re(e,t){var i=Array.prototype.slice.call(arguments,2);t=t||c;this.triggerWith(e,t,i);if(a[e]){return a[e].apply(t,i)}}s.initialize()}ut.defaults={titleRangeSeparator:"  ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,isRTL:false,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventOrder:"title",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};ut.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};ut.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var ct=i.langs={};i.datepickerLang=function(t,i,n){var r=ct[t]||(ct[t]={});r.isRTL=n.isRTL;r.weekNumberTitle=n.weekHeader;e.each(ft,function(e,t){r[e]=t(n)});if(e.datepicker){e.datepicker.regional[i]=e.datepicker.regional[t]=n;e.datepicker.regional.en=e.datepicker.regional[""];e.datepicker.setDefaults(n)}};i.lang=function(t,i){var n;var r;n=ct[t]||(ct[t]={});if(i){n=ct[t]=s([n,i])}r=pt(t);e.each(ht,function(e,t){if(n[e]==null){n[e]=t(r,n)}});ut.defaults.lang=t};var ft={buttonText:function(e){return{prev:re(e.prevText),next:re(e.nextText),today:re(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}};var ht={dayOfMonthFormat:function(e,t){var i=e.longDateFormat("l");i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(t.isRTL){i+=" ddd"}else{i="ddd "+i}return i},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}};var vt={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};function gt(t){e.each(vt,function(e,i){if(t[e]==null){t[e]=i(t)}})}function pt(e){var i=t.localeData||t.langData;return i.call(t,e)||i.call(t,"en")}i.lang("en",ut.englishDefaults);function mt(t,i){var n=this;n.render=o;n.removeElement=l;n.updateTitle=d;n.activateButton=c;n.deactivateButton=f;n.disableButton=h;n.enableButton=v;n.getViewsWithButtons=g;var r=e();var s=[];var a;function o(){var t=i.header;a=i.theme?"ui":"fc";if(t){r=e("<div class='fc-toolbar'/>").append(u("left")).append(u("right")).append(u("center")).append('<div class="fc-clear"/>');return r}}function l(){r.remove();r=e()}function u(n){var r=e('<div class="fc-'+n+'"/>');var o=i.header[n];if(o){e.each(o.split(" "),function(n){var o=e();var l=true;var u;e.each(this.split(","),function(n,r){var u;var d;var c;var f;var h;var v;var g;var p;var m;var y;if(r=="title"){o=o.add(e("<h2>&nbsp;</h2>"));l=false}else{if(u=(t.options.customButtons||{})[r]){c=function(e){if(u.click){u.click.call(y[0],e)}};f="";h=u.text}else if(d=t.getViewSpec(r)){c=function(){t.changeView(r)};s.push(r);f=d.buttonTextOverride;h=d.buttonTextDefault}else if(t[r]){c=function(){t[r]()};f=(t.overrides.buttonText||{})[r];h=i.buttonText[r]}if(c){v=u?u.themeIcon:i.themeButtonIcons[r];g=u?u.icon:i.buttonIcons[r];if(f){p=ne(f)}else if(v&&i.theme){p="<span class='ui-icon ui-icon-"+v+"'></span>"}else if(g&&!i.theme){p="<span class='fc-icon fc-icon-"+g+"'></span>"}else{p=ne(h)}m=["fc-"+r+"-button",a+"-button",a+"-state-default"];y=e('<button type="button" class="'+m.join(" ")+'">'+p+"</button>").click(function(e){if(!y.hasClass(a+"-state-disabled")){c(e);if(y.hasClass(a+"-state-active")||y.hasClass(a+"-state-disabled")){y.removeClass(a+"-state-hover")}}}).mousedown(function(){y.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")}).mouseup(function(){y.removeClass(a+"-state-down")}).hover(function(){y.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")},function(){y.removeClass(a+"-state-hover").removeClass(a+"-state-down")});o=o.add(y)}}});if(l){o.first().addClass(a+"-corner-left").end().last().addClass(a+"-corner-right").end()}if(o.length>1){u=e("<div/>");if(l){u.addClass("fc-button-group")}u.append(o);r.append(u)}else{r.append(o)}})}return r}function d(e){r.find("h2").text(e)}function c(e){r.find(".fc-"+e+"-button").addClass(a+"-state-active")}function f(e){r.find(".fc-"+e+"-button").removeClass(a+"-state-active")}function h(e){r.find(".fc-"+e+"-button").attr("disabled","disabled").addClass(a+"-state-disabled")}function v(e){r.find(".fc-"+e+"-button").removeAttr("disabled").removeClass(a+"-state-disabled")}function g(){return s}}i.sourceNormalizers=[];i.sourceFetchers=[];var yt={dataType:"json",cache:false};var wt=1;function St(n){var r=this;r.isFetchNeeded=h;r.fetchEvents=v;r.addEventSource=m;r.removeEventSource=w;r.updateEvent=E;r.renderEvent=H;r.removeEvents=T;r.clientEvents=x;r.mutateEvent=M;r.normalizeEventDates=I;r.normalizeEventTimes=F;var s=r.reportEvents;var a={events:[]};var o=[a];var l,u;var d=0;var c=0;var f=[];e.each((n.events?[n.events]:[]).concat(n.eventSources||[]),function(e,t){var i=y(t);if(i){o.push(i)}});function h(e,t){return!l||e<l||t>u}function v(e,t){l=e;u=t;f=[];var i=++d;var n=o.length;c=n;for(var r=0;r<n;r++){g(o[r],i)}}function g(t,i){p(t,function(n){var r=e.isArray(t.events);var a,o;var l;if(i==d){if(n){for(a=0;a<n.length;a++){o=n[a];if(r){l=o}else{l=R(o,t)}if(l){f.push.apply(f,z(l))}}}c--;if(!c){s(f)}}})}function p(t,s){var a;var o=i.sourceFetchers;var d;for(a=0;a<o.length;a++){d=o[a].call(r,t,l.clone(),u.clone(),n.timezone,s);if(d===true){return}else if(typeof d=="object"){p(d,s);return}}var c=t.events;if(c){if(e.isFunction(c)){r.pushLoading();c.call(r,l.clone(),u.clone(),n.timezone,function(e){s(e);r.popLoading()})}else if(e.isArray(c)){s(c)}else{s()}}else{var f=t.url;if(f){var h=t.success;var v=t.error;var g=t.complete;var m;if(e.isFunction(t.data)){m=t.data()}else{m=t.data}var y=e.extend({},m||{});var w=ie(t.startParam,n.startParam);var S=ie(t.endParam,n.endParam);var b=ie(t.timezoneParam,n.timezoneParam);if(w){y[w]=l.format()}if(S){y[S]=u.format()}if(n.timezone&&n.timezone!="local"){
y[b]=n.timezone}r.pushLoading();e.ajax(e.extend({},yt,t,{data:y,success:function(t){t=t||[];var i=te(h,this,arguments);if(e.isArray(i)){t=i}s(t)},error:function(){te(v,this,arguments);s()},complete:function(){te(g,this,arguments);r.popLoading()}}))}else{s()}}}function m(e){var t=y(e);if(t){o.push(t);c++;g(t,d)}}function y(t){var n=i.sourceNormalizers;var s;var a;if(e.isFunction(t)||e.isArray(t)){s={events:t}}else if(typeof t==="string"){s={url:t}}else if(typeof t==="object"){s=e.extend({},t)}if(s){if(s.className){if(typeof s.className==="string"){s.className=s.className.split(/\s+/)}}else{s.className=[]}if(e.isArray(s.events)){s.origArray=s.events;s.events=e.map(s.events,function(e){return R(e,s)})}for(a=0;a<n.length;a++){n[a].call(r,s)}return s}}function w(t){o=e.grep(o,function(e){return!S(e,t)});f=e.grep(f,function(e){return!S(e.source,t)});s(f)}function S(e,t){return e&&t&&b(e)==b(t)}function b(e){return(typeof e==="object"?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function E(e){e.start=r.moment(e.start);if(e.end){e.end=r.moment(e.end)}else{e.end=null}M(e,D(e));s(f)}function D(t){var i={};e.each(t,function(e,t){if(C(e)){if(t!==undefined&&ee(t)){i[e]=t}}});return i}function C(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function H(e,t){var i=R(e);var n;var r,o;if(i){n=z(i);for(r=0;r<n.length;r++){o=n[r];if(!o.source){if(t){a.events.push(o);o.source=a}f.push(o)}}s(f);return n}return[]}function T(t){var i;var n;if(t==null){t=function(){return true}}else if(!e.isFunction(t)){i=t+"";t=function(e){return e._id==i}}f=e.grep(f,t,true);for(n=0;n<o.length;n++){if(e.isArray(o[n].events)){o[n].events=e.grep(o[n].events,t,true)}}s(f)}function x(t){if(e.isFunction(t)){return e.grep(f,t)}else if(t!=null){t+="";return e.grep(f,function(e){return e._id==t})}return f}function R(i,s){var a={};var o,l;var u;if(n.eventDataTransform){i=n.eventDataTransform(i)}if(s&&s.eventDataTransform){i=s.eventDataTransform(i)}e.extend(a,i);if(s){a.source=s}a._id=i._id||(i.id===undefined?"_fc"+wt++:i.id+"");if(i.className){if(typeof i.className=="string"){a.className=i.className.split(/\s+/)}else{a.className=i.className}}else{a.className=[]}o=i.start||i.date;l=i.end;if(U(o)){o=t.duration(o)}if(U(l)){l=t.duration(l)}if(i.dow||t.isDuration(o)||t.isDuration(l)){a.start=o?t.duration(o):null;a.end=l?t.duration(l):null;a._recurring=true}else{if(o){o=r.moment(o);if(!o.isValid()){return false}}if(l){l=r.moment(l);if(!l.isValid()){l=null}}u=i.allDay;if(u===undefined){u=ie(s?s.allDayDefault:undefined,n.allDayDefault)}k(o,l,u,a)}return a}function k(e,t,i,n){n.start=e;n.end=t;n.allDay=i;I(n);bt(n)}function I(e){F(e);if(e.end&&!e.end.isAfter(e.start)){e.end=null}if(!e.end){if(n.forceEventDuration){e.end=r.getDefaultEventEnd(e.allDay,e.start)}else{e.end=null}}}function F(e){if(e.allDay==null){e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())}if(e.allDay){e.start.stripTime();if(e.end){e.end.stripTime()}}else{if(!e.start.hasTime()){e.start=r.applyTimezone(e.start.time(0))}if(e.end&&!e.end.hasTime()){e.end=r.applyTimezone(e.end.time(0))}}}function z(t,i,n){var r=[];var s;var a;var o;var d;var c,f;var h,v;var g;i=i||l;n=n||u;if(t){if(t._recurring){if(a=t.dow){s={};for(o=0;o<a.length;o++){s[a[o]]=true}}d=i.clone().stripTime();while(d.isBefore(n)){if(!s||s[d.day()]){c=t.start;f=t.end;h=d.clone();v=null;if(c){h=h.time(c)}if(f){v=d.clone().time(f)}g=e.extend({},t);k(h,v,!c&&!f,g);r.push(g)}d.add(1,"days")}}else{r.push(t)}}return r}function M(t,i,n){var s={};var a;var o;var l;var u;var d;var c;function f(e,t){if(n){return V(e,t,n)}else if(i.allDay){return P(e,t)}else{return G(e,t)}}i=i||{};if(!i.start){i.start=t.start.clone()}if(i.end===undefined){i.end=t.end?t.end.clone():null}if(i.allDay==null){i.allDay=t.allDay}I(i);a={start:t._start.clone(),end:t._end?t._end.clone():r.getDefaultEventEnd(t._allDay,t._start),allDay:i.allDay};I(a);o=t._end!==null&&i.end===null;l=f(i.start,a.start);if(i.end){u=f(i.end,a.end);d=u.subtract(l)}else{d=null}e.each(i,function(e,t){if(C(e)){if(t!==undefined){s[e]=t}}});c=N(x(t._id),o,i.allDay,l,d,s);return{dateDelta:l,durationDelta:d,undo:c}}function N(t,i,n,s,a,o){var l=r.getIsAmbigTimezone();var u=[];if(s&&!s.valueOf()){s=null}if(a&&!a.valueOf()){a=null}e.each(t,function(t,d){var c;var f;c={start:d.start.clone(),end:d.end?d.end.clone():null,allDay:d.allDay};e.each(o,function(e){c[e]=d[e]});f={start:d._start,end:d._end,allDay:n};I(f);if(i){f.end=null}else if(a&&!f.end){f.end=r.getDefaultEventEnd(f.allDay,f.start)}if(s){f.start.add(s);if(f.end){f.end.add(s)}}if(a){f.end.add(a)}if(l&&!f.allDay&&(s||a)){f.start.stripZone();if(f.end){f.end.stripZone()}}e.extend(d,o,f);bt(d);u.push(function(){e.extend(d,c);bt(d)})});return function(){for(var e=0;e<u.length;e++){u[e]()}}}r.getBusinessHoursEvents=B;function B(t){var i=n.businessHours;var s={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var a=r.getView();var o;if(i){o=e.extend({},s,typeof i==="object"?i:{})}if(o){if(t){o.start=null;o.end=null}return z(R(o),a.start,a.end)}return[]}r.isEventSpanAllowed=L;r.isExternalSpanAllowed=O;r.isSelectionSpanAllowed=_;function L(e,t){var i=t.source||{};var r=ie(t.constraint,i.constraint,n.eventConstraint);var s=ie(t.overlap,i.overlap,n.eventOverlap);return A(e,r,s,t)}function O(t,i,n){var r;var s;if(n){r=e.extend({},n,i);s=z(R(r))[0]}if(s){return L(t,s)}else{return _(t)}}function _(e){return A(e,n.selectConstraint,n.selectOverlap)}function A(e,t,i,n){var s;var a;var o;var l,u;var d;if(t!=null){s=Y(t);a=false;for(l=0;l<s.length;l++){if(W(s[l],e)){a=true;break}}if(!a){return false}}o=r.getPeerEvents(e,n);for(l=0;l<o.length;l++){u=o[l];if(j(u,e)){if(i===false){return false}else if(typeof i==="function"&&!i(u,n)){return false}if(n){d=ie(u.overlap,(u.source||{}).overlap);if(d===false){return false}if(typeof d==="function"&&!d(n,u)){return false}}}}return true}function Y(e){if(e==="businessHours"){return B()}if(typeof e==="object"){return z(R(e))}return x(e)}function W(e,t){var i=e.start.clone().stripZone();var n=r.getEventEnd(e).stripZone();return t.start>=i&&t.end<=n}function j(e,t){var i=e.start.clone().stripZone();var n=r.getEventEnd(e).stripZone();return t.start<n&&t.end>i}r.getEventCache=function(){return f}}ut.prototype.getPeerEvents=function(e,t){var i=this.getEventCache();var n=[];var r,s;for(r=0;r<i.length;r++){s=i[r];if(!t||t._id!==s._id){n.push(s)}}return n};function bt(e){e._allDay=e.allDay;e._start=e.start.clone();e._end=e.end?e.end.clone():null}var Et=i.BasicView=lt.extend({dayGridClass:Je,dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid()},instantiateDayGrid:function(){var e=this.dayGridClass.extend(Dt);return new e(this)},setRange:function(e){lt.prototype.setRange.call(this,e);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(e)},computeRange:function(e){var t=lt.prototype.computeRange.call(this,e);if(/year|month/.test(t.intervalUnit)){t.start.startOf("week");t.start=this.skipHiddenDays(t.start);if(t.end.weekday()){t.end.add(1,"week").startOf("week");t.end=this.skipHiddenDays(t.end,-1,true)}}return t},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml());this.renderHead();this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml());this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates();this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="fc-head-container '+this.widgetHeaderClass+'"></td>'+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&typeof e!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=h(this.el.find(".fc-week-number"))}},setHeight:function(e,t){var i=this.opt("eventLimit");var n;g(this.scrollerEl);l(this.headRowEl);this.dayGrid.removeSegPopover();if(i&&typeof i==="number"){this.dayGrid.limitRows(i)}n=this.computeScrollerHeight(e);this.setGridHeight(n,t);if(i&&typeof i!=="number"){this.dayGrid.limitRows(i)}if(!t&&v(this.scrollerEl,n)){o(this.headRowEl,S(this.scrollerEl));n=this.computeScrollerHeight(e);this.scrollerEl.height(n)}},setGridHeight:function(e,t){if(t){f(this.dayGrid.rowEls)}else{c(this.dayGrid.rowEls,e,true)}},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(e,t){return this.dayGrid.queryHit(e,t)},getHitSpan:function(e){return this.dayGrid.getHitSpan(e)},getHitEl:function(e){return this.dayGrid.getHitEl(e)},renderEvents:function(e){this.dayGrid.renderEvents(e);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}});var Dt={renderHeadIntroHtml:function(){var e=this.view;if(e.weekNumbersVisible){return""+'<th class="fc-week-number '+e.widgetHeaderClass+'" '+e.weekNumberStyleAttr()+">"+"<span>"+ne(e.opt("weekNumberTitle"))+"</span>"+"</th>"}return""},renderNumberIntroHtml:function(e){var t=this.view;if(t.weekNumbersVisible){return""+'<td class="fc-week-number" '+t.weekNumberStyleAttr()+">"+"<span>"+this.getCellDate(e,0).format("w")+"</span>"+"</td>"}return""},renderBgIntroHtml:function(){var e=this.view;if(e.weekNumbersVisible){return'<td class="fc-week-number '+e.widgetContentClass+'" '+e.weekNumberStyleAttr()+"></td>"}return""},renderIntroHtml:function(){var e=this.view;if(e.weekNumbersVisible){return'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"></td>"}return""}};var Ct=i.MonthView=Et.extend({computeRange:function(e){var t=Et.prototype.computeRange.call(this,e);var i;if(this.isFixedWeeks()){i=Math.ceil(t.end.diff(t.start,"weeks",true));t.end.add(6-i,"weeks")}return t},setGridHeight:function(e,t){t=t||this.opt("weekMode")==="variable";if(t){e*=this.rowCnt/6}c(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");if(e){return e==="fixed"}return this.opt("fixedWeekCount")}});n.basic={class:Et};n.basicDay={type:"basic",duration:{days:1}};n.basicWeek={type:"basic",duration:{weeks:1}};n.month={class:Ct,duration:{months:1},defaults:{fixedWeekCount:true}};var Ht=i.AgendaView=lt.extend({timeGridClass:it,timeGrid:null,dayGridClass:Je,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid();if(this.opt("allDaySlot")){this.dayGrid=this.instantiateDayGrid()}},instantiateTimeGrid:function(){var e=this.timeGridClass.extend(Tt);return new e(this)},instantiateDayGrid:function(){var e=this.dayGridClass.extend(xt);return new e(this)},setRange:function(e){lt.prototype.setRange.call(this,e);this.timeGrid.setRange(e);if(this.dayGrid){this.dayGrid.setRange(e)}},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml());this.renderHead();this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.setElement(this.el.find(".fc-time-grid"));this.timeGrid.renderDates();this.bottomRuleEl=e('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates();this.timeGrid.removeElement();if(this.dayGrid){this.dayGrid.unrenderDates();this.dayGrid.removeElement()}},renderSkeletonHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="fc-head-container '+this.widgetHeaderClass+'"></td>'+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/>'+'<hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours();if(this.dayGrid){this.dayGrid.renderBusinessHours()}},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours();if(this.dayGrid){this.dayGrid.unrenderBusinessHours()}},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(e){this.timeGrid.renderNowIndicator(e)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(e){this.timeGrid.updateSize(e);lt.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=h(this.el.find(".fc-axis"))},setHeight:function(e,t){var i;var n;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");g(this.scrollerEl);l(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.removeSegPopover();i=this.opt("eventLimit");if(i&&typeof i!=="number"){i=Rt}if(i){this.dayGrid.limitRows(i)}}if(!t){n=this.computeScrollerHeight(e);if(v(this.scrollerEl,n)){o(this.noScrollRowEls,S(this.scrollerEl));n=this.computeScrollerHeight(e);this.scrollerEl.height(n)}else{this.scrollerEl.height(n).css("overflow","hidden");this.bottomRuleEl.show()}}},computeInitialScroll:function(){var e=t.duration(this.opt("scrollTime"));var i=this.timeGrid.computeTimeTop(e);i=Math.ceil(i);if(i){i++}return i},prepareHits:function(){this.timeGrid.prepareHits();if(this.dayGrid){this.dayGrid.prepareHits()}},releaseHits:function(){this.timeGrid.releaseHits();if(this.dayGrid){this.dayGrid.releaseHits()}},queryHit:function(e,t){var i=this.timeGrid.queryHit(e,t);if(!i&&this.dayGrid){i=this.dayGrid.queryHit(e,t)}return i},getHitSpan:function(e){return e.component.getHitSpan(e)},getHitEl:function(e){return e.component.getHitEl(e)},renderEvents:function(e){var t=[];var i=[];var n=[];var r;var s;for(s=0;s<e.length;s++){if(e[s].allDay){t.push(e[s])}else{i.push(e[s])}}r=this.timeGrid.renderEvents(i);if(this.dayGrid){n=this.dayGrid.renderEvents(t)}this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents();if(this.dayGrid){this.dayGrid.unrenderEvents()}},renderDrag:function(e,t){if(e.start.hasTime()){return this.timeGrid.renderDrag(e,t)}else if(this.dayGrid){return this.dayGrid.renderDrag(e,t)}},unrenderDrag:function(){this.timeGrid.unrenderDrag();if(this.dayGrid){this.dayGrid.unrenderDrag()}},renderSelection:function(e){if(e.start.hasTime()||e.end.hasTime()){this.timeGrid.renderSelection(e)}else if(this.dayGrid){this.dayGrid.renderSelection(e)}},unrenderSelection:function(){this.timeGrid.unrenderSelection();if(this.dayGrid){this.dayGrid.unrenderSelection()}}});var Tt={renderHeadIntroHtml:function(){var e=this.view;var t;if(e.opt("weekNumbers")){t=this.start.format(e.opt("smallWeekFormat"));return""+'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+">"+"<span>"+ne(t)+"</span>"+"</th>"}else{return'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"></th>"}},renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"></td>"},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+"></td>"}};var xt={renderBgIntroHtml:function(){var e=this.view;return""+'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+"<span>"+(e.opt("allDayHtml")||ne(e.opt("allDayText")))+"</span>"+"</td>"},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+"></td>"}};var Rt=5;var kt=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];n.agenda={class:Ht,defaults:{allDaySlot:true,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true}};n.agendaDay={type:"agenda",duration:{days:1}};n.agendaWeek={type:"agenda",duration:{weeks:1}};return i});