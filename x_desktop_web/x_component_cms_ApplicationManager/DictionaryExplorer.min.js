MWF.xDesktop.requireApp("cms.ApplicationManager","Explorer",null,false);MWF.xApplication.cms.ApplicationManager.DictionaryExplorer=new Class({Extends:MWF.xApplication.cms.ApplicationManager.Explorer,Implements:[Options,Events],options:{create:MWF.CMSCM.LP.dictionary.create,search:MWF.CMSCM.LP.dictionary.search,searchText:MWF.CMSCM.LP.dictionary.searchText,noElement:MWF.CMSCM.LP.dictionary.noDictionaryNoticeText},_createElement:function(t){var i=this;var e={onQueryLoad:function(){this.actions=i.app.restActions;this.application=i.app.options.column;this.column=i.app.options.column},onPostSave:function(){i.reload()}};this.app.desktop.openApplication(t,"cms.DictionaryDesigner",e)},_loadItemDataList:function(t){this.actions.listDictionary(this.app.options.column.id,t)},_getItemObject:function(t,i){return new MWF.xApplication.cms.ApplicationManager.DictionaryExplorer.Dictionary(this,t,{index:i})},setTooltip:function(){this.options.tooltip={create:MWF.CMSCM.LP.dictionary.create,search:MWF.CMSCM.LP.dictionary.search,searchText:MWF.CMSCM.LP.dictionary.searchText,noElement:MWF.CMSCM.LP.dictionary.noDictionaryNoticeText}},loadElementList:function(t){this._loadItemDataList(function(i){if(i.data.length){i.data.each(function(t){var i=this._getItemObject(t,this.itemArray.length+1);i.load();this.itemObject[t.id]=i;this.itemArray.push(i)}.bind(this));if(t)t()}else{var e=new Element("div",{styles:this.css.noElementNode,text:this.options.noCreate?MWF.CMSCM.LP.dictionary.noDictionaryNoCreateNoticeText:this.options.tooltip.noElement}).inject(this.elementContentListNode);if(!this.options.noCreate){e.addEvent("click",function(t){this._createElement(t)}.bind(this))}}}.bind(this))},deleteItems:function(){while(this.deleteMarkItems.length){var t=this.deleteMarkItems.shift();if(this.deleteMarkItems.length){t.deleteDictionary()}else{t.deleteDictionary(function(){this.hideDeleteAction();this.reload()}.bind(this))}}}});MWF.xApplication.cms.ApplicationManager.DictionaryExplorer.Dictionary=new Class({Extends:MWF.xApplication.cms.ApplicationManager.Explorer.Item,_customNodes:function(){},_open:function(t){var i=this;var e={onQueryLoad:function(){this.actions=i.explorer.actions;this.category=i;this.options.id=i.data.id;this.column=i.explorer.app.options.column;this.application=i.explorer.app.options.column;this.options.noModifyName=i.explorer.options.noModifyName;this.options.readMode=i.explorer.options.readMode}};this.explorer.app.desktop.openApplication(t,"cms.DictionaryDesigner",e)},_getIcon:function(){var t=(Math.random()*33).toInt();return"process_icon_"+t+".png"},_getLnkPar:function(){var t={icon:this.explorer.path+this.explorer.options.style+"/dictionaryIcon/lnk.png",title:this.data.name,par:'cms.DictionaryDesigner#{"id": "'+this.data.id+'", "application" : '+JSON.stringify(this.explorer.app.options.column)+"}"};return t},deleteDictionary:function(t){this.explorer.app.restActions.deleteDictionary(this.data.id,function(){this.node.destroy();if(t)t()}.bind(this))}});